function uw(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function cw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vh={exports:{}},fa={},Oh={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function hw(){if(wm)return ke;wm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function V(M,H,fe){this.props=M,this.context=H,this.refs=z,this.updater=fe||P}V.prototype.isReactComponent={},V.prototype.setState=function(M,H){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,H,"setState")},V.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function X(){}X.prototype=V.prototype;function ee(M,H,fe){this.props=M,this.context=H,this.refs=z,this.updater=fe||P}var Z=ee.prototype=new X;Z.constructor=ee,L(Z,V.prototype),Z.isPureReactComponent=!0;var Q=Array.isArray,Te=Object.prototype.hasOwnProperty,ue={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(M,H,fe){var Se,Ce={},xe=null,Le=null;if(H!=null)for(Se in H.ref!==void 0&&(Le=H.ref),H.key!==void 0&&(xe=""+H.key),H)Te.call(H,Se)&&!x.hasOwnProperty(Se)&&(Ce[Se]=H[Se]);var Me=arguments.length-2;if(Me===1)Ce.children=fe;else if(1<Me){for(var Be=Array(Me),yt=0;yt<Me;yt++)Be[yt]=arguments[yt+2];Ce.children=Be}if(M&&M.defaultProps)for(Se in Me=M.defaultProps,Me)Ce[Se]===void 0&&(Ce[Se]=Me[Se]);return{$$typeof:r,type:M,key:xe,ref:Le,props:Ce,_owner:ue.current}}function k(M,H){return{$$typeof:r,type:M.type,key:H,ref:M.ref,props:M.props,_owner:M._owner}}function A(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function O(M){var H={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return H[fe]})}var b=/\/+/g;function R(M,H){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):H.toString(36)}function tt(M,H,fe,Se,Ce){var xe=typeof M;(xe==="undefined"||xe==="boolean")&&(M=null);var Le=!1;if(M===null)Le=!0;else switch(xe){case"string":case"number":Le=!0;break;case"object":switch(M.$$typeof){case r:case e:Le=!0}}if(Le)return Le=M,Ce=Ce(Le),M=Se===""?"."+R(Le,0):Se,Q(Ce)?(fe="",M!=null&&(fe=M.replace(b,"$&/")+"/"),tt(Ce,H,fe,"",function(yt){return yt})):Ce!=null&&(A(Ce)&&(Ce=k(Ce,fe+(!Ce.key||Le&&Le.key===Ce.key?"":(""+Ce.key).replace(b,"$&/")+"/")+M)),H.push(Ce)),1;if(Le=0,Se=Se===""?".":Se+":",Q(M))for(var Me=0;Me<M.length;Me++){xe=M[Me];var Be=Se+R(xe,Me);Le+=tt(xe,H,fe,Be,Ce)}else if(Be=I(M),typeof Be=="function")for(M=Be.call(M),Me=0;!(xe=M.next()).done;)xe=xe.value,Be=Se+R(xe,Me++),Le+=tt(xe,H,fe,Be,Ce);else if(xe==="object")throw H=String(M),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Le}function Nt(M,H,fe){if(M==null)return M;var Se=[],Ce=0;return tt(M,Se,"","",function(xe){return H.call(fe,xe,Ce++)}),Se}function Dt(M){if(M._status===-1){var H=M._result;H=H(),H.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=H)}if(M._status===1)return M._result.default;throw M._result}var Ue={current:null},ie={transition:null},me={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ue};function oe(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:Nt,forEach:function(M,H,fe){Nt(M,function(){H.apply(this,arguments)},fe)},count:function(M){var H=0;return Nt(M,function(){H++}),H},toArray:function(M){return Nt(M,function(H){return H})||[]},only:function(M){if(!A(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ke.Component=V,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=ee,ke.StrictMode=s,ke.Suspense=g,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,ke.act=oe,ke.cloneElement=function(M,H,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Se=L({},M.props),Ce=M.key,xe=M.ref,Le=M._owner;if(H!=null){if(H.ref!==void 0&&(xe=H.ref,Le=ue.current),H.key!==void 0&&(Ce=""+H.key),M.type&&M.type.defaultProps)var Me=M.type.defaultProps;for(Be in H)Te.call(H,Be)&&!x.hasOwnProperty(Be)&&(Se[Be]=H[Be]===void 0&&Me!==void 0?Me[Be]:H[Be])}var Be=arguments.length-2;if(Be===1)Se.children=fe;else if(1<Be){Me=Array(Be);for(var yt=0;yt<Be;yt++)Me[yt]=arguments[yt+2];Se.children=Me}return{$$typeof:r,type:M.type,key:Ce,ref:xe,props:Se,_owner:Le}},ke.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},ke.createElement=S,ke.createFactory=function(M){var H=S.bind(null,M);return H.type=M,H},ke.createRef=function(){return{current:null}},ke.forwardRef=function(M){return{$$typeof:f,render:M}},ke.isValidElement=A,ke.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:Dt}},ke.memo=function(M,H){return{$$typeof:y,type:M,compare:H===void 0?null:H}},ke.startTransition=function(M){var H=ie.transition;ie.transition={};try{M()}finally{ie.transition=H}},ke.unstable_act=oe,ke.useCallback=function(M,H){return Ue.current.useCallback(M,H)},ke.useContext=function(M){return Ue.current.useContext(M)},ke.useDebugValue=function(){},ke.useDeferredValue=function(M){return Ue.current.useDeferredValue(M)},ke.useEffect=function(M,H){return Ue.current.useEffect(M,H)},ke.useId=function(){return Ue.current.useId()},ke.useImperativeHandle=function(M,H,fe){return Ue.current.useImperativeHandle(M,H,fe)},ke.useInsertionEffect=function(M,H){return Ue.current.useInsertionEffect(M,H)},ke.useLayoutEffect=function(M,H){return Ue.current.useLayoutEffect(M,H)},ke.useMemo=function(M,H){return Ue.current.useMemo(M,H)},ke.useReducer=function(M,H,fe){return Ue.current.useReducer(M,H,fe)},ke.useRef=function(M){return Ue.current.useRef(M)},ke.useState=function(M){return Ue.current.useState(M)},ke.useSyncExternalStore=function(M,H,fe){return Ue.current.useSyncExternalStore(M,H,fe)},ke.useTransition=function(){return Ue.current.useTransition()},ke.version="18.3.1",ke}var Em;function xd(){return Em||(Em=1,Oh.exports=hw()),Oh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function dw(){if(Tm)return fa;Tm=1;var r=xd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},I=null,P=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(P=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:I,ref:P,props:E,_owner:o.current}}return fa.Fragment=t,fa.jsx=h,fa.jsxs=h,fa}var Im;function fw(){return Im||(Im=1,Vh.exports=dw()),Vh.exports}var ne=fw(),W=xd();const Tr=cw(W),pw=uw({__proto__:null,default:Tr},[W]);var ru={},bh={exports:{}},Yt={},Lh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function mw(){return Sm||(Sm=1,function(r){function e(ie,me){var oe=ie.length;ie.push(me);e:for(;0<oe;){var M=oe-1>>>1,H=ie[M];if(0<o(H,me))ie[M]=me,ie[oe]=H,oe=M;else break e}}function t(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var me=ie[0],oe=ie.pop();if(oe!==me){ie[0]=oe;e:for(var M=0,H=ie.length,fe=H>>>1;M<fe;){var Se=2*(M+1)-1,Ce=ie[Se],xe=Se+1,Le=ie[xe];if(0>o(Ce,oe))xe<H&&0>o(Le,Ce)?(ie[M]=Le,ie[xe]=oe,M=xe):(ie[M]=Ce,ie[Se]=oe,M=Se);else if(xe<H&&0>o(Le,oe))ie[M]=Le,ie[xe]=oe,M=xe;else break e}}return me}function o(ie,me){var oe=ie.sortIndex-me.sortIndex;return oe!==0?oe:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,I=3,P=!1,L=!1,z=!1,V=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ie){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=ie)s(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function Q(ie){if(z=!1,Z(ie),!L)if(t(g)!==null)L=!0,Dt(Te);else{var me=t(y);me!==null&&Ue(Q,me.startTime-ie)}}function Te(ie,me){L=!1,z&&(z=!1,X(S),S=-1),P=!0;var oe=I;try{for(Z(me),E=t(g);E!==null&&(!(E.expirationTime>me)||ie&&!O());){var M=E.callback;if(typeof M=="function"){E.callback=null,I=E.priorityLevel;var H=M(E.expirationTime<=me);me=r.unstable_now(),typeof H=="function"?E.callback=H:E===t(g)&&s(g),Z(me)}else s(g);E=t(g)}if(E!==null)var fe=!0;else{var Se=t(y);Se!==null&&Ue(Q,Se.startTime-me),fe=!1}return fe}finally{E=null,I=oe,P=!1}}var ue=!1,x=null,S=-1,k=5,A=-1;function O(){return!(r.unstable_now()-A<k)}function b(){if(x!==null){var ie=r.unstable_now();A=ie;var me=!0;try{me=x(!0,ie)}finally{me?R():(ue=!1,x=null)}}else ue=!1}var R;if(typeof ee=="function")R=function(){ee(b)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,Nt=tt.port2;tt.port1.onmessage=b,R=function(){Nt.postMessage(null)}}else R=function(){V(b,0)};function Dt(ie){x=ie,ue||(ue=!0,R())}function Ue(ie,me){S=V(function(){ie(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){L||P||(L=!0,Dt(Te))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ie){switch(I){case 1:case 2:case 3:var me=3;break;default:me=I}var oe=I;I=me;try{return ie()}finally{I=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=I;I=ie;try{return me()}finally{I=oe}},r.unstable_scheduleCallback=function(ie,me,oe){var M=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?M+oe:M):oe=M,ie){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=oe+H,ie={id:v++,callback:me,priorityLevel:ie,startTime:oe,expirationTime:H,sortIndex:-1},oe>M?(ie.sortIndex=oe,e(y,ie),t(g)===null&&ie===t(y)&&(z?(X(S),S=-1):z=!0,Ue(Q,oe-M))):(ie.sortIndex=H,e(g,ie),L||P||(L=!0,Dt(Te))),ie},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(ie){var me=I;return function(){var oe=I;I=me;try{return ie.apply(this,arguments)}finally{I=oe}}}}(Mh)),Mh}var Cm;function gw(){return Cm||(Cm=1,Lh.exports=mw()),Lh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function yw(){if(km)return Yt;km=1;var r=xd(),e=gw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function P(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,i,a,c){if(i===null||typeof i>"u"||P(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(n,i,a,c,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];V[i]=new z(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function ee(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(X,ee);V[i]=new z(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(X,ee);V[i]=new z(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(X,ee);V[i]=new z(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function Z(n,i,a,c){var d=V.hasOwnProperty(i)?V[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,a,d,c)&&(a=null),c||d===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),ue=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),O=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),Nt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),ie=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,M;function H(n){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+n}var fe=!1;function Se(n,i){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,C=m.length-1;1<=w&&0<=C&&d[w]!==m[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==m[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==m[C]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=C);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function Ce(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case ue:return"Portal";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case tt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case A:return(n._context.displayName||"Context")+".Provider";case b:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Nt:return i=n.displayName||null,i!==null?i:xe(n.type)||"Memo";case Dt:i=n._payload,n=n._init;try{return xe(n(i))}catch{}}return null}function Le(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Me(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(n){var i=Be(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function tr(n){n._valueTracker||(n._valueTracker=yt(n))}function ts(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Rr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function yi(n,i){var a=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ns(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Me(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function vo(n,i){i=i.checked,i!=null&&Z(n,"checked",i,!1)}function wo(n,i){vo(n,i);var a=Me(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?rs(n,i.type,a):i.hasOwnProperty("defaultValue")&&rs(n,i.type,Me(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Ba(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function rs(n,i,a){(i!=="number"||Rr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var nr=Array.isArray;function rr(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Me(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Eo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function is(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(nr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Me(a)}}function ss(n,i){var a=Me(i.value),c=Me(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function To(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ut(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ut(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ir,Io=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ir.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Pr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(n){vi.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),_i[i]=_i[n]})});function So(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||_i.hasOwnProperty(n)&&_i[n]?(""+i).trim():i+"px"}function Co(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=So(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var ko=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ro(n,i){if(i){if(ko[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Po(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var as=null,hn=null,Ln=null;function ls(n){if(n=Jo(n)){if(typeof as!="function")throw Error(t(280));var i=n.stateNode;i&&(i=_l(i),as(n.stateNode,n.type,i))}}function Mn(n){hn?Ln?Ln.push(n):Ln=[n]:hn=n}function Ao(){if(hn){var n=hn,i=Ln;if(Ln=hn=null,ls(n),i)for(n=0;n<i.length;n++)ls(i[n])}}function Ei(n,i){return n(i)}function xo(){}var sr=!1;function No(n,i,a){if(sr)return n(i,a);sr=!0;try{return Ei(n,i,a)}finally{sr=!1,(hn!==null||Ln!==null)&&(xo(),Ao())}}function nt(n,i){var a=n.stateNode;if(a===null)return null;var c=_l(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var us=!1;if(f)try{var En={};Object.defineProperty(En,"passive",{get:function(){us=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{us=!1}function Ti(n,i,a,c,d,m,w,C,N){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(q){this.onError(q)}}var Ii=!1,cs=null,Tn=!1,Do=null,ac={onError:function(n){Ii=!0,cs=n}};function hs(n,i,a,c,d,m,w,C,N){Ii=!1,cs=null,Ti.apply(ac,arguments)}function $a(n,i,a,c,d,m,w,C,N){if(hs.apply(this,arguments),Ii){if(Ii){var B=cs;Ii=!1,cs=null}else throw Error(t(198));Tn||(Tn=!0,Do=B)}}function In(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Si(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Sn(n){if(In(n)!==n)throw Error(t(188))}function Wa(n){var i=n.alternate;if(!i){if(i=In(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Sn(d),n;if(m===c)return Sn(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=m;break}if(C===c){w=!0,c=d,a=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===a){w=!0,a=m,c=d;break}if(C===c){w=!0,c=m,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Vo(n){return n=Wa(n),n!==null?ds(n):null}function ds(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ds(n);if(i!==null)return i;n=n.sibling}return null}var fs=e.unstable_scheduleCallback,Oo=e.unstable_cancelCallback,Ka=e.unstable_shouldYield,lc=e.unstable_requestPaint,$e=e.unstable_now,Ha=e.unstable_getCurrentPriorityLevel,Ci=e.unstable_ImmediatePriority,Ar=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,bo=e.unstable_LowPriority,Ga=e.unstable_IdlePriority,ki=null,tn=null;function qa(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ki,n,void 0,(n.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Xa,Lo=Math.log,Qa=Math.LN2;function Xa(n){return n>>>=0,n===0?32:31-(Lo(n)/Qa|0)|0}var ps=64,ms=4194304;function xr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ri(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=xr(C):(m&=w,m!==0&&(c=xr(m)))}else w=a&~d,w!==0?c=xr(w):m!==0&&(c=xr(m));if(c===0)return 0;if(i!==0&&i!==c&&!(i&d)&&(d=c&-c,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Ut(i),d=1<<a,c|=n[a],i&=~d;return c}function uc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function or(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Ut(m),C=1<<w,N=d[w];N===-1?(!(C&a)||C&c)&&(d[w]=uc(C,i)):N<=i&&(n.expiredLanes|=C),m&=~C}}function nn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Pi(){var n=ps;return ps<<=1,!(ps&4194240)&&(ps=64),n}function Nr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Dr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Ut(i),n[i]=a}function ze(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Ut(a),m=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Vr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Ut(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Pe=0;function Or(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Ya,gs,Ja,Za,el,Mo=!1,Fn=[],St=null,Cn=null,kn=null,br=new Map,fn=new Map,jn=[],cc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tl(n,i){switch(n){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":br.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(i.pointerId)}}function Wt(n,i,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},i!==null&&(i=Jo(i),i!==null&&gs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function hc(n,i,a,c,d){switch(i){case"focusin":return St=Wt(St,n,i,a,c,d),!0;case"dragenter":return Cn=Wt(Cn,n,i,a,c,d),!0;case"mouseover":return kn=Wt(kn,n,i,a,c,d),!0;case"pointerover":var m=d.pointerId;return br.set(m,Wt(br.get(m)||null,n,i,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,fn.set(m,Wt(fn.get(m)||null,n,i,a,c,d)),!0}return!1}function nl(n){var i=Vi(n.target);if(i!==null){var a=In(i);if(a!==null){if(i=a.tag,i===13){if(i=Si(a),i!==null){n.blockedOn=i,el(n.priority,function(){Ja(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ar(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ys(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);wi=c,a.target.dispatchEvent(c),wi=null}else return i=Jo(a),i!==null&&gs(i),n.blockedOn=a,!1;i.shift()}return!0}function Ai(n,i,a){ar(n)&&a.delete(i)}function rl(){Mo=!1,St!==null&&ar(St)&&(St=null),Cn!==null&&ar(Cn)&&(Cn=null),kn!==null&&ar(kn)&&(kn=null),br.forEach(Ai),fn.forEach(Ai)}function Rn(n,i){n.blockedOn===i&&(n.blockedOn=null,Mo||(Mo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rl)))}function Pn(n){function i(d){return Rn(d,n)}if(0<Fn.length){Rn(Fn[0],n);for(var a=1;a<Fn.length;a++){var c=Fn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(St!==null&&Rn(St,n),Cn!==null&&Rn(Cn,n),kn!==null&&Rn(kn,n),br.forEach(i),fn.forEach(i),a=0;a<jn.length;a++)c=jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<jn.length&&(a=jn[0],a.blockedOn===null);)nl(a),a.blockedOn===null&&jn.shift()}var lr=Q.ReactCurrentBatchConfig,Lr=!0;function qe(n,i,a,c){var d=Pe,m=lr.transition;lr.transition=null;try{Pe=1,Fo(n,i,a,c)}finally{Pe=d,lr.transition=m}}function dc(n,i,a,c){var d=Pe,m=lr.transition;lr.transition=null;try{Pe=4,Fo(n,i,a,c)}finally{Pe=d,lr.transition=m}}function Fo(n,i,a,c){if(Lr){var d=ys(n,i,a,c);if(d===null)Ic(n,i,c,xi,a),tl(n,c);else if(hc(d,n,i,a,c))c.stopPropagation();else if(tl(n,c),i&4&&-1<cc.indexOf(n)){for(;d!==null;){var m=Jo(d);if(m!==null&&Ya(m),m=ys(n,i,a,c),m===null&&Ic(n,i,c,xi,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Ic(n,i,c,null,a)}}var xi=null;function ys(n,i,a,c){if(xi=null,n=os(c),n=Vi(n),n!==null)if(i=In(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Si(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return xi=n,null}function jo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ha()){case Ci:return 1;case Ar:return 4;case dn:case bo:return 16;case Ga:return 536870912;default:return 16}default:return 16}}var rn=null,_s=null,Kt=null;function Uo(){if(Kt)return Kt;var n,i=_s,a=i.length,c,d="value"in rn?rn.value:rn.textContent,m=d.length;for(n=0;n<a&&i[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===d[m-c];c++);return Kt=d.slice(n,1<c?1-c:void 0)}function vs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Un(){return!0}function zo(){return!1}function Ct(n){function i(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Un:zo,this.isPropagationStopped=zo,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),i}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ws=Ct(An),zn=oe({},An,{view:0,detail:0}),fc=Ct(zn),Es,ur,Mr,Ni=oe({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mr&&(Mr&&n.type==="mousemove"?(Es=n.screenX-Mr.screenX,ur=n.screenY-Mr.screenY):ur=Es=0,Mr=n),Es)},movementY:function(n){return"movementY"in n?n.movementY:ur}}),Ts=Ct(Ni),Bo=oe({},Ni,{dataTransfer:0}),il=Ct(Bo),Is=oe({},zn,{relatedTarget:0}),Ss=Ct(Is),sl=oe({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),cr=Ct(sl),ol=oe({},An,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),al=Ct(ol),ll=oe({},An,{data:0}),$o=Ct(ll),Cs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ul={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ul[n])?!!i[n]:!1}function Bn(){return cl}var u=oe({},zn,{key:function(n){if(n.key){var i=Cs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=vs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(n){return n.type==="keypress"?vs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Ct(u),_=oe({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ct(_),F=oe({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn}),$=Ct(F),re=oe({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Ct(re),ht=oe({},Ni,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=Ct(ht),_t=[9,13,27,32],ot=f&&"CompositionEvent"in window,pn=null;f&&"documentMode"in document&&(pn=document.documentMode);var sn=f&&"TextEvent"in window&&!pn,Di=f&&(!ot||pn&&8<pn&&11>=pn),ks=" ",pf=!1;function mf(n,i){switch(n){case"keyup":return _t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rs=!1;function av(n,i){switch(n){case"compositionend":return gf(i);case"keypress":return i.which!==32?null:(pf=!0,ks);case"textInput":return n=i.data,n===ks&&pf?null:n;default:return null}}function lv(n,i){if(Rs)return n==="compositionend"||!ot&&mf(n,i)?(n=Uo(),Kt=_s=rn=null,Rs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Di&&i.locale!=="ko"?null:i.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!uv[n.type]:i==="textarea"}function _f(n,i,a,c){Mn(c),i=ml(i,"onChange"),0<i.length&&(a=new ws("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Wo=null,Ko=null;function cv(n){Lf(n,0)}function hl(n){var i=Ds(n);if(ts(i))return n}function hv(n,i){if(n==="change")return i}var vf=!1;if(f){var pc;if(f){var mc="oninput"in document;if(!mc){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),mc=typeof wf.oninput=="function"}pc=mc}else pc=!1;vf=pc&&(!document.documentMode||9<document.documentMode)}function Ef(){Wo&&(Wo.detachEvent("onpropertychange",Tf),Ko=Wo=null)}function Tf(n){if(n.propertyName==="value"&&hl(Ko)){var i=[];_f(i,Ko,n,os(n)),No(cv,i)}}function dv(n,i,a){n==="focusin"?(Ef(),Wo=i,Ko=a,Wo.attachEvent("onpropertychange",Tf)):n==="focusout"&&Ef()}function fv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hl(Ko)}function pv(n,i){if(n==="click")return hl(i)}function mv(n,i){if(n==="input"||n==="change")return hl(i)}function gv(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:gv;function Ho(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!xn(n[d],i[d]))return!1}return!0}function If(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sf(n,i){var a=If(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=If(a)}}function Cf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Cf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function kf(){for(var n=window,i=Rr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Rr(n.document)}return i}function gc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function yv(n){var i=kf(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Cf(a.ownerDocument.documentElement,a)){if(c!==null&&gc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Sf(a,m);var w=Sf(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _v=f&&"documentMode"in document&&11>=document.documentMode,Ps=null,yc=null,Go=null,_c=!1;function Rf(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_c||Ps==null||Ps!==Rr(c)||(c=Ps,"selectionStart"in c&&gc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Go&&Ho(Go,c)||(Go=c,c=ml(yc,"onSelect"),0<c.length&&(i=new ws("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ps)))}function dl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var As={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},vc={},Pf={};f&&(Pf=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function fl(n){if(vc[n])return vc[n];if(!As[n])return n;var i=As[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pf)return vc[n]=i[a];return n}var Af=fl("animationend"),xf=fl("animationiteration"),Nf=fl("animationstart"),Df=fl("transitionend"),Vf=new Map,Of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(n,i){Vf.set(n,i),l(i,[n])}for(var wc=0;wc<Of.length;wc++){var Ec=Of[wc],vv=Ec.toLowerCase(),wv=Ec[0].toUpperCase()+Ec.slice(1);Fr(vv,"on"+wv)}Fr(Af,"onAnimationEnd"),Fr(xf,"onAnimationIteration"),Fr(Nf,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(Df,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ev=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function bf(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,$a(c,i,void 0,n),n.currentTarget=null}function Lf(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,B=C.currentTarget;if(C=C.listener,N!==m&&d.isPropagationStopped())break e;bf(d,C,B),m=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,B=C.currentTarget,C=C.listener,N!==m&&d.isPropagationStopped())break e;bf(d,C,B),m=N}}}if(Tn)throw n=Do,Tn=!1,Do=null,n}function He(n,i){var a=i[Ac];a===void 0&&(a=i[Ac]=new Set);var c=n+"__bubble";a.has(c)||(Mf(i,n,2,!1),a.add(c))}function Tc(n,i,a){var c=0;i&&(c|=4),Mf(a,n,c,i)}var pl="_reactListening"+Math.random().toString(36).slice(2);function Qo(n){if(!n[pl]){n[pl]=!0,s.forEach(function(a){a!=="selectionchange"&&(Ev.has(a)||Tc(a,!1,n),Tc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[pl]||(i[pl]=!0,Tc("selectionchange",!1,i))}}function Mf(n,i,a,c){switch(jo(i)){case 1:var d=qe;break;case 4:d=dc;break;default:d=Fo}a=d.bind(null,i,a,n),d=void 0,!us||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Ic(n,i,a,c,d){var m=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;C!==null;){if(w=Vi(C),w===null)return;if(N=w.tag,N===5||N===6){c=m=w;continue e}C=C.parentNode}}c=c.return}No(function(){var B=m,q=os(a),J=[];e:{var G=Vf.get(n);if(G!==void 0){var se=ws,ce=n;switch(n){case"keypress":if(vs(a)===0)break e;case"keydown":case"keyup":se=p;break;case"focusin":ce="focus",se=Ss;break;case"focusout":ce="blur",se=Ss;break;case"beforeblur":case"afterblur":se=Ss;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=$;break;case Af:case xf:case Nf:se=cr;break;case Df:se=je;break;case"scroll":se=fc;break;case"wheel":se=Ne;break;case"copy":case"cut":case"paste":se=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=T}var he=(i&4)!==0,rt=!he&&n==="scroll",j=he?G!==null?G+"Capture":null:G;he=[];for(var D=B,U;D!==null;){U=D;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,j!==null&&(te=nt(D,j),te!=null&&he.push(Xo(D,te,U)))),rt)break;D=D.return}0<he.length&&(G=new se(G,ce,null,a,q),J.push({event:G,listeners:he}))}}if(!(i&7)){e:{if(G=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",G&&a!==wi&&(ce=a.relatedTarget||a.fromElement)&&(Vi(ce)||ce[hr]))break e;if((se||G)&&(G=q.window===q?q:(G=q.ownerDocument)?G.defaultView||G.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=B,ce=ce?Vi(ce):null,ce!==null&&(rt=In(ce),ce!==rt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=B),se!==ce)){if(he=Ts,te="onMouseLeave",j="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(he=T,te="onPointerLeave",j="onPointerEnter",D="pointer"),rt=se==null?G:Ds(se),U=ce==null?G:Ds(ce),G=new he(te,D+"leave",se,a,q),G.target=rt,G.relatedTarget=U,te=null,Vi(q)===B&&(he=new he(j,D+"enter",ce,a,q),he.target=U,he.relatedTarget=rt,te=he),rt=te,se&&ce)t:{for(he=se,j=ce,D=0,U=he;U;U=xs(U))D++;for(U=0,te=j;te;te=xs(te))U++;for(;0<D-U;)he=xs(he),D--;for(;0<U-D;)j=xs(j),U--;for(;D--;){if(he===j||j!==null&&he===j.alternate)break t;he=xs(he),j=xs(j)}he=null}else he=null;se!==null&&Ff(J,G,se,he,!1),ce!==null&&rt!==null&&Ff(J,rt,ce,he,!0)}}e:{if(G=B?Ds(B):window,se=G.nodeName&&G.nodeName.toLowerCase(),se==="select"||se==="input"&&G.type==="file")var de=hv;else if(yf(G))if(vf)de=mv;else{de=fv;var ge=dv}else(se=G.nodeName)&&se.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(de=pv);if(de&&(de=de(n,B))){_f(J,de,a,q);break e}ge&&ge(n,G,B),n==="focusout"&&(ge=G._wrapperState)&&ge.controlled&&G.type==="number"&&rs(G,"number",G.value)}switch(ge=B?Ds(B):window,n){case"focusin":(yf(ge)||ge.contentEditable==="true")&&(Ps=ge,yc=B,Go=null);break;case"focusout":Go=yc=Ps=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,Rf(J,a,q);break;case"selectionchange":if(_v)break;case"keydown":case"keyup":Rf(J,a,q)}var ye;if(ot)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Rs?mf(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(Di&&a.locale!=="ko"&&(Rs||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Rs&&(ye=Uo()):(rn=q,_s="value"in rn?rn.value:rn.textContent,Rs=!0)),ge=ml(B,ve),0<ge.length&&(ve=new $o(ve,n,null,a,q),J.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=gf(a),ye!==null&&(ve.data=ye)))),(ye=sn?av(n,a):lv(n,a))&&(B=ml(B,"onBeforeInput"),0<B.length&&(q=new $o("onBeforeInput","beforeinput",null,a,q),J.push({event:q,listeners:B}),q.data=ye))}Lf(J,i)})}function Xo(n,i,a){return{instance:n,listener:i,currentTarget:a}}function ml(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=nt(n,a),m!=null&&c.unshift(Xo(n,m,d)),m=nt(n,i),m!=null&&c.push(Xo(n,m,d))),n=n.return}return c}function xs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ff(n,i,a,c,d){for(var m=i._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,B=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&B!==null&&(C=B,d?(N=nt(a,m),N!=null&&w.unshift(Xo(a,N,C))):d||(N=nt(a,m),N!=null&&w.push(Xo(a,N,C)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var Tv=/\r\n?/g,Iv=/\u0000|\uFFFD/g;function jf(n){return(typeof n=="string"?n:""+n).replace(Tv,`
`).replace(Iv,"")}function gl(n,i,a){if(i=jf(i),jf(n)!==i&&a)throw Error(t(425))}function yl(){}var Sc=null,Cc=null;function kc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Uf=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof Uf<"u"?function(n){return Uf.resolve(null).then(n).catch(kv)}:Rc;function kv(n){setTimeout(function(){throw n})}function Pc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Pn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Pn(i)}function jr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function zf(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),$n="__reactFiber$"+Ns,Yo="__reactProps$"+Ns,hr="__reactContainer$"+Ns,Ac="__reactEvents$"+Ns,Rv="__reactListeners$"+Ns,Pv="__reactHandles$"+Ns;function Vi(n){var i=n[$n];if(i)return i;for(var a=n.parentNode;a;){if(i=a[hr]||a[$n]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=zf(n);n!==null;){if(a=n[$n])return a;n=zf(n)}return i}n=a,a=n.parentNode}return null}function Jo(n){return n=n[$n]||n[hr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ds(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function _l(n){return n[Yo]||null}var xc=[],Vs=-1;function Ur(n){return{current:n}}function Ge(n){0>Vs||(n.current=xc[Vs],xc[Vs]=null,Vs--)}function We(n,i){Vs++,xc[Vs]=n.current,n.current=i}var zr={},Vt=Ur(zr),Ht=Ur(!1),Oi=zr;function Os(n,i){var a=n.type.contextTypes;if(!a)return zr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Gt(n){return n=n.childContextTypes,n!=null}function vl(){Ge(Ht),Ge(Vt)}function Bf(n,i,a){if(Vt.current!==zr)throw Error(t(168));We(Vt,i),We(Ht,a)}function $f(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Le(n)||"Unknown",d));return oe({},a,c)}function wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zr,Oi=Vt.current,We(Vt,n),We(Ht,Ht.current),!0}function Wf(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=$f(n,i,Oi),c.__reactInternalMemoizedMergedChildContext=n,Ge(Ht),Ge(Vt),We(Vt,n)):Ge(Ht),We(Ht,a)}var dr=null,El=!1,Nc=!1;function Kf(n){dr===null?dr=[n]:dr.push(n)}function Av(n){El=!0,Kf(n)}function Br(){if(!Nc&&dr!==null){Nc=!0;var n=0,i=Pe;try{var a=dr;for(Pe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}dr=null,El=!1}catch(d){throw dr!==null&&(dr=dr.slice(n+1)),fs(Ci,Br),d}finally{Pe=i,Nc=!1}}return null}var bs=[],Ls=0,Tl=null,Il=0,mn=[],gn=0,bi=null,fr=1,pr="";function Li(n,i){bs[Ls++]=Il,bs[Ls++]=Tl,Tl=n,Il=i}function Hf(n,i,a){mn[gn++]=fr,mn[gn++]=pr,mn[gn++]=bi,bi=n;var c=fr;n=pr;var d=32-Ut(c)-1;c&=~(1<<d),a+=1;var m=32-Ut(i)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,fr=1<<32-Ut(i)+d|a<<d|c,pr=m+n}else fr=1<<m|a<<d|c,pr=n}function Dc(n){n.return!==null&&(Li(n,1),Hf(n,1,0))}function Vc(n){for(;n===Tl;)Tl=bs[--Ls],bs[Ls]=null,Il=bs[--Ls],bs[Ls]=null;for(;n===bi;)bi=mn[--gn],mn[gn]=null,pr=mn[--gn],mn[gn]=null,fr=mn[--gn],mn[gn]=null}var on=null,an=null,Qe=!1,Nn=null;function Gf(n,i){var a=wn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function qf(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,on=n,an=jr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,on=n,an=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=bi!==null?{id:fr,overflow:pr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=wn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function Oc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bc(n){if(Qe){var i=an;if(i){var a=i;if(!qf(n,i)){if(Oc(n))throw Error(t(418));i=jr(a.nextSibling);var c=on;i&&qf(n,i)?Gf(c,a):(n.flags=n.flags&-4097|2,Qe=!1,on=n)}}else{if(Oc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Qe=!1,on=n}}}function Qf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Sl(n){if(n!==on)return!1;if(!Qe)return Qf(n),Qe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!kc(n.type,n.memoizedProps)),i&&(i=an)){if(Oc(n))throw Xf(),Error(t(418));for(;i;)Gf(n,i),i=jr(i.nextSibling)}if(Qf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){an=jr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}an=null}}else an=on?jr(n.stateNode.nextSibling):null;return!0}function Xf(){for(var n=an;n;)n=jr(n.nextSibling)}function Ms(){an=on=null,Qe=!1}function Lc(n){Nn===null?Nn=[n]:Nn.push(n)}var xv=Q.ReactCurrentBatchConfig;function Zo(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var C=d.refs;w===null?delete C[m]:C[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Cl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Yf(n){var i=n._init;return i(n._payload)}function Jf(n){function i(j,D){if(n){var U=j.deletions;U===null?(j.deletions=[D],j.flags|=16):U.push(D)}}function a(j,D){if(!n)return null;for(;D!==null;)i(j,D),D=D.sibling;return null}function c(j,D){for(j=new Map;D!==null;)D.key!==null?j.set(D.key,D):j.set(D.index,D),D=D.sibling;return j}function d(j,D){return j=Xr(j,D),j.index=0,j.sibling=null,j}function m(j,D,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<D?(j.flags|=2,D):U):(j.flags|=2,D)):(j.flags|=1048576,D)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function C(j,D,U,te){return D===null||D.tag!==6?(D=Rh(U,j.mode,te),D.return=j,D):(D=d(D,U),D.return=j,D)}function N(j,D,U,te){var de=U.type;return de===x?q(j,D,U.props.children,te,U.key):D!==null&&(D.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&Yf(de)===D.type)?(te=d(D,U.props),te.ref=Zo(j,D,U),te.return=j,te):(te=Ql(U.type,U.key,U.props,null,j.mode,te),te.ref=Zo(j,D,U),te.return=j,te)}function B(j,D,U,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=Ph(U,j.mode,te),D.return=j,D):(D=d(D,U.children||[]),D.return=j,D)}function q(j,D,U,te,de){return D===null||D.tag!==7?(D=Wi(U,j.mode,te,de),D.return=j,D):(D=d(D,U),D.return=j,D)}function J(j,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Rh(""+D,j.mode,U),D.return=j,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Te:return U=Ql(D.type,D.key,D.props,null,j.mode,U),U.ref=Zo(j,null,D),U.return=j,U;case ue:return D=Ph(D,j.mode,U),D.return=j,D;case Dt:var te=D._init;return J(j,te(D._payload),U)}if(nr(D)||me(D))return D=Wi(D,j.mode,U,null),D.return=j,D;Cl(j,D)}return null}function G(j,D,U,te){var de=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return de!==null?null:C(j,D,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:return U.key===de?N(j,D,U,te):null;case ue:return U.key===de?B(j,D,U,te):null;case Dt:return de=U._init,G(j,D,de(U._payload),te)}if(nr(U)||me(U))return de!==null?null:q(j,D,U,te,null);Cl(j,U)}return null}function se(j,D,U,te,de){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(U)||null,C(D,j,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Te:return j=j.get(te.key===null?U:te.key)||null,N(D,j,te,de);case ue:return j=j.get(te.key===null?U:te.key)||null,B(D,j,te,de);case Dt:var ge=te._init;return se(j,D,U,ge(te._payload),de)}if(nr(te)||me(te))return j=j.get(U)||null,q(D,j,te,de,null);Cl(D,te)}return null}function ce(j,D,U,te){for(var de=null,ge=null,ye=D,ve=D=0,Et=null;ye!==null&&ve<U.length;ve++){ye.index>ve?(Et=ye,ye=null):Et=ye.sibling;var be=G(j,ye,U[ve],te);if(be===null){ye===null&&(ye=Et);break}n&&ye&&be.alternate===null&&i(j,ye),D=m(be,D,ve),ge===null?de=be:ge.sibling=be,ge=be,ye=Et}if(ve===U.length)return a(j,ye),Qe&&Li(j,ve),de;if(ye===null){for(;ve<U.length;ve++)ye=J(j,U[ve],te),ye!==null&&(D=m(ye,D,ve),ge===null?de=ye:ge.sibling=ye,ge=ye);return Qe&&Li(j,ve),de}for(ye=c(j,ye);ve<U.length;ve++)Et=se(ye,j,ve,U[ve],te),Et!==null&&(n&&Et.alternate!==null&&ye.delete(Et.key===null?ve:Et.key),D=m(Et,D,ve),ge===null?de=Et:ge.sibling=Et,ge=Et);return n&&ye.forEach(function(Yr){return i(j,Yr)}),Qe&&Li(j,ve),de}function he(j,D,U,te){var de=me(U);if(typeof de!="function")throw Error(t(150));if(U=de.call(U),U==null)throw Error(t(151));for(var ge=de=null,ye=D,ve=D=0,Et=null,be=U.next();ye!==null&&!be.done;ve++,be=U.next()){ye.index>ve?(Et=ye,ye=null):Et=ye.sibling;var Yr=G(j,ye,be.value,te);if(Yr===null){ye===null&&(ye=Et);break}n&&ye&&Yr.alternate===null&&i(j,ye),D=m(Yr,D,ve),ge===null?de=Yr:ge.sibling=Yr,ge=Yr,ye=Et}if(be.done)return a(j,ye),Qe&&Li(j,ve),de;if(ye===null){for(;!be.done;ve++,be=U.next())be=J(j,be.value,te),be!==null&&(D=m(be,D,ve),ge===null?de=be:ge.sibling=be,ge=be);return Qe&&Li(j,ve),de}for(ye=c(j,ye);!be.done;ve++,be=U.next())be=se(ye,j,ve,be.value,te),be!==null&&(n&&be.alternate!==null&&ye.delete(be.key===null?ve:be.key),D=m(be,D,ve),ge===null?de=be:ge.sibling=be,ge=be);return n&&ye.forEach(function(lw){return i(j,lw)}),Qe&&Li(j,ve),de}function rt(j,D,U,te){if(typeof U=="object"&&U!==null&&U.type===x&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Te:e:{for(var de=U.key,ge=D;ge!==null;){if(ge.key===de){if(de=U.type,de===x){if(ge.tag===7){a(j,ge.sibling),D=d(ge,U.props.children),D.return=j,j=D;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&Yf(de)===ge.type){a(j,ge.sibling),D=d(ge,U.props),D.ref=Zo(j,ge,U),D.return=j,j=D;break e}a(j,ge);break}else i(j,ge);ge=ge.sibling}U.type===x?(D=Wi(U.props.children,j.mode,te,U.key),D.return=j,j=D):(te=Ql(U.type,U.key,U.props,null,j.mode,te),te.ref=Zo(j,D,U),te.return=j,j=te)}return w(j);case ue:e:{for(ge=U.key;D!==null;){if(D.key===ge)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(j,D.sibling),D=d(D,U.children||[]),D.return=j,j=D;break e}else{a(j,D);break}else i(j,D);D=D.sibling}D=Ph(U,j.mode,te),D.return=j,j=D}return w(j);case Dt:return ge=U._init,rt(j,D,ge(U._payload),te)}if(nr(U))return ce(j,D,U,te);if(me(U))return he(j,D,U,te);Cl(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,D!==null&&D.tag===6?(a(j,D.sibling),D=d(D,U),D.return=j,j=D):(a(j,D),D=Rh(U,j.mode,te),D.return=j,j=D),w(j)):a(j,D)}return rt}var Fs=Jf(!0),Zf=Jf(!1),kl=Ur(null),Rl=null,js=null,Mc=null;function Fc(){Mc=js=Rl=null}function jc(n){var i=kl.current;Ge(kl),n._currentValue=i}function Uc(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Us(n,i){Rl=n,Mc=js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(qt=!0),n.firstContext=null)}function yn(n){var i=n._currentValue;if(Mc!==n)if(n={context:n,memoizedValue:i,next:null},js===null){if(Rl===null)throw Error(t(308));js=n,Rl.dependencies={lanes:0,firstContext:n}}else js=js.next=n;return i}var Mi=null;function zc(n){Mi===null?Mi=[n]:Mi.push(n)}function ep(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,zc(i)):(a.next=d.next,d.next=a),i.interleaved=a,mr(n,c)}function mr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var $r=!1;function Bc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function gr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Wr(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Oe&2){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,mr(n,a)}return d=c.interleaved,d===null?(i.next=i,zc(c)):(i.next=d.next,d.next=i),c.interleaved=i,mr(n,a)}function Pl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Vr(n,a)}}function np(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Al(n,i,a,c){var d=n.updateQueue;$r=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,B=N.next;N.next=null,w===null?m=B:w.next=B,w=N;var q=n.alternate;q!==null&&(q=q.updateQueue,C=q.lastBaseUpdate,C!==w&&(C===null?q.firstBaseUpdate=B:C.next=B,q.lastBaseUpdate=N))}if(m!==null){var J=d.baseState;w=0,q=B=N=null,C=m;do{var G=C.lane,se=C.eventTime;if((c&G)===G){q!==null&&(q=q.next={eventTime:se,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ce=n,he=C;switch(G=i,se=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){J=ce.call(se,J,G);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,G=typeof ce=="function"?ce.call(se,J,G):ce,G==null)break e;J=oe({},J,G);break e;case 2:$r=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[C]:G.push(C))}else se={eventTime:se,lane:G,tag:C.tag,payload:C.payload,callback:C.callback,next:null},q===null?(B=q=se,N=J):q=q.next=se,w|=G;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;G=C,C=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(q===null&&(N=J),d.baseState=N,d.firstBaseUpdate=B,d.lastBaseUpdate=q,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Ui|=w,n.lanes=w,n.memoizedState=J}}function rp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ea={},Wn=Ur(ea),ta=Ur(ea),na=Ur(ea);function Fi(n){if(n===ea)throw Error(t(174));return n}function $c(n,i){switch(We(na,i),We(ta,n),We(Wn,ea),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ct(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ct(i,n)}Ge(Wn),We(Wn,i)}function zs(){Ge(Wn),Ge(ta),Ge(na)}function ip(n){Fi(na.current);var i=Fi(Wn.current),a=ct(i,n.type);i!==a&&(We(ta,n),We(Wn,a))}function Wc(n){ta.current===n&&(Ge(Wn),Ge(ta))}var Xe=Ur(0);function xl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Kc=[];function Hc(){for(var n=0;n<Kc.length;n++)Kc[n]._workInProgressVersionPrimary=null;Kc.length=0}var Nl=Q.ReactCurrentDispatcher,Gc=Q.ReactCurrentBatchConfig,ji=0,Ye=null,dt=null,vt=null,Dl=!1,ra=!1,ia=0,Nv=0;function Ot(){throw Error(t(321))}function qc(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!xn(n[a],i[a]))return!1;return!0}function Qc(n,i,a,c,d,m){if(ji=m,Ye=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Nl.current=n===null||n.memoizedState===null?bv:Lv,n=a(c,d),ra){m=0;do{if(ra=!1,ia=0,25<=m)throw Error(t(301));m+=1,vt=dt=null,i.updateQueue=null,Nl.current=Mv,n=a(c,d)}while(ra)}if(Nl.current=bl,i=dt!==null&&dt.next!==null,ji=0,vt=dt=Ye=null,Dl=!1,i)throw Error(t(300));return n}function Xc(){var n=ia!==0;return ia=0,n}function Kn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ye.memoizedState=vt=n:vt=vt.next=n,vt}function _n(){if(dt===null){var n=Ye.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var i=vt===null?Ye.memoizedState:vt.next;if(i!==null)vt=i,dt=n;else{if(n===null)throw Error(t(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?Ye.memoizedState=vt=n:vt=vt.next=n}return vt}function sa(n,i){return typeof i=="function"?i(n):i}function Yc(n){var i=_n(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=dt,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var C=w=null,N=null,B=m;do{var q=B.lane;if((ji&q)===q)N!==null&&(N=N.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};N===null?(C=N=J,w=c):N=N.next=J,Ye.lanes|=q,Ui|=q}B=B.next}while(B!==null&&B!==m);N===null?w=c:N.next=C,xn(c,i.memoizedState)||(qt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,Ye.lanes|=m,Ui|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Jc(n){var i=_n(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);xn(m,i.memoizedState)||(qt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function sp(){}function op(n,i){var a=Ye,c=_n(),d=i(),m=!xn(c.memoizedState,d);if(m&&(c.memoizedState=d,qt=!0),c=c.queue,Zc(up.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,oa(9,lp.bind(null,a,c,d,i),void 0,null),wt===null)throw Error(t(349));ji&30||ap(a,i,d)}return d}function ap(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ye.updateQueue,i===null?(i={lastEffect:null,stores:null},Ye.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function lp(n,i,a,c){i.value=a,i.getSnapshot=c,cp(i)&&hp(n)}function up(n,i,a){return a(function(){cp(i)&&hp(n)})}function cp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!xn(n,a)}catch{return!0}}function hp(n){var i=mr(n,1);i!==null&&bn(i,n,1,-1)}function dp(n){var i=Kn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:n},i.queue=n,n=n.dispatch=Ov.bind(null,Ye,n),[i.memoizedState,n]}function oa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Ye.updateQueue,i===null?(i={lastEffect:null,stores:null},Ye.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function fp(){return _n().memoizedState}function Vl(n,i,a,c){var d=Kn();Ye.flags|=n,d.memoizedState=oa(1|i,a,void 0,c===void 0?null:c)}function Ol(n,i,a,c){var d=_n();c=c===void 0?null:c;var m=void 0;if(dt!==null){var w=dt.memoizedState;if(m=w.destroy,c!==null&&qc(c,w.deps)){d.memoizedState=oa(i,a,m,c);return}}Ye.flags|=n,d.memoizedState=oa(1|i,a,m,c)}function pp(n,i){return Vl(8390656,8,n,i)}function Zc(n,i){return Ol(2048,8,n,i)}function mp(n,i){return Ol(4,2,n,i)}function gp(n,i){return Ol(4,4,n,i)}function yp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function _p(n,i,a){return a=a!=null?a.concat([n]):null,Ol(4,4,yp.bind(null,i,n),a)}function eh(){}function vp(n,i){var a=_n();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&qc(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function wp(n,i){var a=_n();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&qc(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function Ep(n,i,a){return ji&21?(xn(a,i)||(a=Pi(),Ye.lanes|=a,Ui|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,qt=!0),n.memoizedState=a)}function Dv(n,i){var a=Pe;Pe=a!==0&&4>a?a:4,n(!0);var c=Gc.transition;Gc.transition={};try{n(!1),i()}finally{Pe=a,Gc.transition=c}}function Tp(){return _n().memoizedState}function Vv(n,i,a){var c=qr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Ip(n))Sp(i,a);else if(a=ep(n,i,a,c),a!==null){var d=$t();bn(a,n,c,d),Cp(a,i,c)}}function Ov(n,i,a){var c=qr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ip(n))Sp(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,C=m(w,a);if(d.hasEagerState=!0,d.eagerState=C,xn(C,w)){var N=i.interleaved;N===null?(d.next=d,zc(i)):(d.next=N.next,N.next=d),i.interleaved=d;return}}catch{}finally{}a=ep(n,i,d,c),a!==null&&(d=$t(),bn(a,n,c,d),Cp(a,i,c))}}function Ip(n){var i=n.alternate;return n===Ye||i!==null&&i===Ye}function Sp(n,i){ra=Dl=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Cp(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Vr(n,a)}}var bl={readContext:yn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},bv={readContext:yn,useCallback:function(n,i){return Kn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:pp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Vl(4194308,4,yp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Vl(4194308,4,n,i)},useInsertionEffect:function(n,i){return Vl(4,2,n,i)},useMemo:function(n,i){var a=Kn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Kn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Vv.bind(null,Ye,n),[c.memoizedState,n]},useRef:function(n){var i=Kn();return n={current:n},i.memoizedState=n},useState:dp,useDebugValue:eh,useDeferredValue:function(n){return Kn().memoizedState=n},useTransition:function(){var n=dp(!1),i=n[0];return n=Dv.bind(null,n[1]),Kn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Ye,d=Kn();if(Qe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),wt===null)throw Error(t(349));ji&30||ap(c,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,pp(up.bind(null,c,m,n),[n]),c.flags|=2048,oa(9,lp.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=Kn(),i=wt.identifierPrefix;if(Qe){var a=pr,c=fr;a=(c&~(1<<32-Ut(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ia++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Nv++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Lv={readContext:yn,useCallback:vp,useContext:yn,useEffect:Zc,useImperativeHandle:_p,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:wp,useReducer:Yc,useRef:fp,useState:function(){return Yc(sa)},useDebugValue:eh,useDeferredValue:function(n){var i=_n();return Ep(i,dt.memoizedState,n)},useTransition:function(){var n=Yc(sa)[0],i=_n().memoizedState;return[n,i]},useMutableSource:sp,useSyncExternalStore:op,useId:Tp,unstable_isNewReconciler:!1},Mv={readContext:yn,useCallback:vp,useContext:yn,useEffect:Zc,useImperativeHandle:_p,useInsertionEffect:mp,useLayoutEffect:gp,useMemo:wp,useReducer:Jc,useRef:fp,useState:function(){return Jc(sa)},useDebugValue:eh,useDeferredValue:function(n){var i=_n();return dt===null?i.memoizedState=n:Ep(i,dt.memoizedState,n)},useTransition:function(){var n=Jc(sa)[0],i=_n().memoizedState;return[n,i]},useMutableSource:sp,useSyncExternalStore:op,useId:Tp,unstable_isNewReconciler:!1};function Dn(n,i){if(n&&n.defaultProps){i=oe({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function th(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:oe({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ll={isMounted:function(n){return(n=n._reactInternals)?In(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=$t(),d=qr(n),m=gr(c,d);m.payload=i,a!=null&&(m.callback=a),i=Wr(n,m,d),i!==null&&(bn(i,n,d,c),Pl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=$t(),d=qr(n),m=gr(c,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Wr(n,m,d),i!==null&&(bn(i,n,d,c),Pl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=$t(),c=qr(n),d=gr(a,c);d.tag=2,i!=null&&(d.callback=i),i=Wr(n,d,c),i!==null&&(bn(i,n,c,a),Pl(i,n,c))}};function kp(n,i,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):i.prototype&&i.prototype.isPureReactComponent?!Ho(a,c)||!Ho(d,m):!0}function Rp(n,i,a){var c=!1,d=zr,m=i.contextType;return typeof m=="object"&&m!==null?m=yn(m):(d=Gt(i)?Oi:Vt.current,c=i.contextTypes,m=(c=c!=null)?Os(n,d):zr),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ll,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),i}function Pp(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Ll.enqueueReplaceState(i,i.state,null)}function nh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Bc(n);var m=i.contextType;typeof m=="object"&&m!==null?d.context=yn(m):(m=Gt(i)?Oi:Vt.current,d.context=Os(n,m)),d.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(th(n,i,m,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&Ll.enqueueReplaceState(d,d.state,null),Al(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Bs(n,i){try{var a="",c=i;do a+=Ce(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:d,digest:null}}function rh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function ih(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function Ap(n,i,a){a=gr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){$l||($l=!0,vh=c),ih(n,i)},a}function xp(n,i,a){a=gr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){ih(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){ih(n,i),typeof c!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Np(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Fv;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=Jv.bind(null,n,i,a),i.then(n,n))}function Dp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Vp(n,i,a,c,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=gr(-1,1),i.tag=2,Wr(a,i,1))),a.lanes|=1),n)}var jv=Q.ReactCurrentOwner,qt=!1;function Bt(n,i,a,c){i.child=n===null?Zf(i,null,a,c):Fs(i,n.child,a,c)}function Op(n,i,a,c,d){a=a.render;var m=i.ref;return Us(i,d),c=Qc(n,i,a,c,m,d),a=Xc(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,yr(n,i,d)):(Qe&&a&&Dc(i),i.flags|=1,Bt(n,i,c,d),i.child)}function bp(n,i,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!kh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Lp(n,i,m,c,d)):(n=Ql(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!(n.lanes&d)){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ho,a(w,c)&&n.ref===i.ref)return yr(n,i,d)}return i.flags|=1,n=Xr(m,c),n.ref=i.ref,n.return=i,i.child=n}function Lp(n,i,a,c,d){if(n!==null){var m=n.memoizedProps;if(Ho(m,c)&&n.ref===i.ref)if(qt=!1,i.pendingProps=c=m,(n.lanes&d)!==0)n.flags&131072&&(qt=!0);else return i.lanes=n.lanes,yr(n,i,d)}return sh(n,i,a,c,d)}function Mp(n,i,a){var c=i.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Ws,ln),ln|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(Ws,ln),ln|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,We(Ws,ln),ln|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,We(Ws,ln),ln|=c;return Bt(n,i,d,a),i.child}function Fp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function sh(n,i,a,c,d){var m=Gt(a)?Oi:Vt.current;return m=Os(i,m),Us(i,d),a=Qc(n,i,a,c,m,d),c=Xc(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,yr(n,i,d)):(Qe&&c&&Dc(i),i.flags|=1,Bt(n,i,a,d),i.child)}function jp(n,i,a,c,d){if(Gt(a)){var m=!0;wl(i)}else m=!1;if(Us(i,d),i.stateNode===null)Fl(n,i),Rp(i,a,c),nh(i,a,c,d),c=!0;else if(n===null){var w=i.stateNode,C=i.memoizedProps;w.props=C;var N=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=yn(B):(B=Gt(a)?Oi:Vt.current,B=Os(i,B));var q=a.getDerivedStateFromProps,J=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==B)&&Pp(i,w,c,B),$r=!1;var G=i.memoizedState;w.state=G,Al(i,c,w,d),N=i.memoizedState,C!==c||G!==N||Ht.current||$r?(typeof q=="function"&&(th(i,a,q,c),N=i.memoizedState),(C=$r||kp(i,a,C,c,G,N,B))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=N),w.props=c,w.state=N,w.context=B,c=C):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,tp(n,i),C=i.memoizedProps,B=i.type===i.elementType?C:Dn(i.type,C),w.props=B,J=i.pendingProps,G=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=yn(N):(N=Gt(a)?Oi:Vt.current,N=Os(i,N));var se=a.getDerivedStateFromProps;(q=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==J||G!==N)&&Pp(i,w,c,N),$r=!1,G=i.memoizedState,w.state=G,Al(i,c,w,d);var ce=i.memoizedState;C!==J||G!==ce||Ht.current||$r?(typeof se=="function"&&(th(i,a,se,c),ce=i.memoizedState),(B=$r||kp(i,a,B,c,G,ce,N)||!1)?(q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ce,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ce,N)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ce),w.props=c,w.state=ce,w.context=N,c=B):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return oh(n,i,a,c,m,d)}function oh(n,i,a,c,d,m){Fp(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return d&&Wf(i,a,!1),yr(n,i,m);c=i.stateNode,jv.current=i;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=Fs(i,n.child,null,m),i.child=Fs(i,null,C,m)):Bt(n,i,C,m),i.memoizedState=c.state,d&&Wf(i,a,!0),i.child}function Up(n){var i=n.stateNode;i.pendingContext?Bf(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Bf(n,i.context,!1),$c(n,i.containerInfo)}function zp(n,i,a,c,d){return Ms(),Lc(d),i.flags|=256,Bt(n,i,a,c),i.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Bp(n,i,a){var c=i.pendingProps,d=Xe.current,m=!1,w=(i.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Xe,d&1),n===null)return bc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(w=c.children,n=c.fallback,m?(c=i.mode,m=i.child,w={mode:"hidden",children:w},!(c&1)&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Xl(w,c,0,null),n=Wi(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=lh(a),i.memoizedState=ah,n):uh(i,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Uv(n,i,w,c,C,d,a);if(m){m=c.fallback,w=i.mode,d=n.child,C=d.sibling;var N={mode:"hidden",children:c.children};return!(w&1)&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=N,i.deletions=null):(c=Xr(d,N),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?m=Xr(C,m):(m=Wi(m,w,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,w=n.child.memoizedState,w=w===null?lh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,i.memoizedState=ah,c}return m=n.child,n=m.sibling,c=Xr(m,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function uh(n,i){return i=Xl({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ml(n,i,a,c){return c!==null&&Lc(c),Fs(i,n.child,null,a),n=uh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Uv(n,i,a,c,d,m,w){if(a)return i.flags&256?(i.flags&=-257,c=rh(Error(t(422))),Ml(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,d=i.mode,c=Xl({mode:"visible",children:c.children},d,0,null),m=Wi(m,d,w,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,i.mode&1&&Fs(i,n.child,null,w),i.child.memoizedState=lh(w),i.memoizedState=ah,m);if(!(i.mode&1))return Ml(n,i,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,m=Error(t(419)),c=rh(m,c,void 0),Ml(n,i,w,c)}if(C=(w&n.childLanes)!==0,qt||C){if(c=wt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|w)?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,mr(n,d),bn(c,n,d,-1))}return Ch(),c=rh(Error(t(421))),Ml(n,i,w,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=Zv.bind(null,n),d._reactRetry=i,null):(n=m.treeContext,an=jr(d.nextSibling),on=i,Qe=!0,Nn=null,n!==null&&(mn[gn++]=fr,mn[gn++]=pr,mn[gn++]=bi,fr=n.id,pr=n.overflow,bi=i),i=uh(i,c.children),i.flags|=4096,i)}function $p(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Uc(n.return,i,a)}function ch(n,i,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Wp(n,i,a){var c=i.pendingProps,d=c.revealOrder,m=c.tail;if(Bt(n,i,c.children,a),c=Xe.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$p(n,a,i);else if(n.tag===19)$p(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Xe,c),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&xl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),ch(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&xl(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ch(i,!0,a,null,m);break;case"together":ch(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Fl(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function yr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ui|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=Xr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function zv(n,i,a){switch(i.tag){case 3:Up(i),Ms();break;case 5:ip(i);break;case 1:Gt(i.type)&&wl(i);break;case 4:$c(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;We(kl,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Xe,Xe.current&1),i.flags|=128,null):a&i.child.childLanes?Bp(n,i,a):(We(Xe,Xe.current&1),n=yr(n,i,a),n!==null?n.sibling:null);We(Xe,Xe.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return Wp(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Xe,Xe.current),c)break;return null;case 22:case 23:return i.lanes=0,Mp(n,i,a)}return yr(n,i,a)}var Kp,hh,Hp,Gp;Kp=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hh=function(){},Hp=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Fi(Wn.current);var m=null;switch(a){case"input":d=yi(n,d),c=yi(n,c),m=[];break;case"select":d=oe({},d,{value:void 0}),c=oe({},c,{value:void 0}),m=[];break;case"textarea":d=Eo(n,d),c=Eo(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=yl)}Ro(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var C=d[B];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var N=c[B];if(C=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&N!==C&&(N!=null||C!=null))if(B==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(m||(m=[]),m.push(B,a)),a=N;else B==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(m=m||[]).push(B,N)):B==="children"?typeof N!="string"&&typeof N!="number"||(m=m||[]).push(B,""+N):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(N!=null&&B==="onScroll"&&He("scroll",n),m||C===N||(m=[])):(m=m||[]).push(B,N))}a&&(m=m||[]).push("style",a);var B=m;(i.updateQueue=B)&&(i.flags|=4)}},Gp=function(n,i,a,c){a!==c&&(i.flags|=4)};function aa(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Bv(n,i,a){var c=i.pendingProps;switch(Vc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return Gt(i.type)&&vl(),bt(i),null;case 3:return c=i.stateNode,zs(),Ge(Ht),Ge(Vt),Hc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Sl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Nn!==null&&(Th(Nn),Nn=null))),hh(n,i),bt(i),null;case 5:Wc(i);var d=Fi(na.current);if(a=i.type,n!==null&&i.stateNode!=null)Hp(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return bt(i),null}if(n=Fi(Wn.current),Sl(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[$n]=i,c[Yo]=m,n=(i.mode&1)!==0,a){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(d=0;d<qo.length;d++)He(qo[d],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":ns(c,m),He("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},He("invalid",c);break;case"textarea":is(c,m),He("invalid",c)}Ro(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var C=m[w];w==="children"?typeof C=="string"?c.textContent!==C&&(m.suppressHydrationWarning!==!0&&gl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&gl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&He("scroll",c)}switch(a){case"input":tr(c),Ba(c,m,!0);break;case"textarea":tr(c),To(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=yl)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ut(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[$n]=i,n[Yo]=c,Kp(n,i,!1,!1),i.stateNode=n;e:{switch(w=Po(a,c),a){case"dialog":He("cancel",n),He("close",n),d=c;break;case"iframe":case"object":case"embed":He("load",n),d=c;break;case"video":case"audio":for(d=0;d<qo.length;d++)He(qo[d],n);d=c;break;case"source":He("error",n),d=c;break;case"img":case"image":case"link":He("error",n),He("load",n),d=c;break;case"details":He("toggle",n),d=c;break;case"input":ns(n,c),d=yi(n,c),He("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=oe({},c,{value:void 0}),He("invalid",n);break;case"textarea":is(n,c),d=Eo(n,c),He("invalid",n);break;default:d=c}Ro(a,d),C=d;for(m in C)if(C.hasOwnProperty(m)){var N=C[m];m==="style"?Co(n,N):m==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Io(n,N)):m==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Pr(n,N):typeof N=="number"&&Pr(n,""+N):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?N!=null&&m==="onScroll"&&He("scroll",n):N!=null&&Z(n,m,N,w))}switch(a){case"input":tr(n),Ba(n,c,!1);break;case"textarea":tr(n),To(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Me(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?rr(n,!!c.multiple,m,!1):c.defaultValue!=null&&rr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=yl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return bt(i),null;case 6:if(n&&i.stateNode!=null)Gp(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Fi(na.current),Fi(Wn.current),Sl(i)){if(c=i.stateNode,a=i.memoizedProps,c[$n]=i,(m=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:gl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gl(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[$n]=i,i.stateNode=c}return bt(i),null;case 13:if(Ge(Xe),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&an!==null&&i.mode&1&&!(i.flags&128))Xf(),Ms(),i.flags|=98560,m=!1;else if(m=Sl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[$n]=i}else Ms(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;bt(i),m=!1}else Nn!==null&&(Th(Nn),Nn=null),m=!0;if(!m)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||Xe.current&1?ft===0&&(ft=3):Ch())),i.updateQueue!==null&&(i.flags|=4),bt(i),null);case 4:return zs(),hh(n,i),n===null&&Qo(i.stateNode.containerInfo),bt(i),null;case 10:return jc(i.type._context),bt(i),null;case 17:return Gt(i.type)&&vl(),bt(i),null;case 19:if(Ge(Xe),m=i.memoizedState,m===null)return bt(i),null;if(c=(i.flags&128)!==0,w=m.rendering,w===null)if(c)aa(m,!1);else{if(ft!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(w=xl(n),w!==null){for(i.flags|=128,aa(m,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Xe,Xe.current&1|2),i.child}n=n.sibling}m.tail!==null&&$e()>Ks&&(i.flags|=128,c=!0,aa(m,!1),i.lanes=4194304)}else{if(!c)if(n=xl(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),aa(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Qe)return bt(i),null}else 2*$e()-m.renderingStartTime>Ks&&a!==1073741824&&(i.flags|=128,c=!0,aa(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=$e(),i.sibling=null,a=Xe.current,We(Xe,c?a&1|2:a&1),i):(bt(i),null);case 22:case 23:return Sh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?ln&1073741824&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function $v(n,i){switch(Vc(i),i.tag){case 1:return Gt(i.type)&&vl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return zs(),Ge(Ht),Ge(Vt),Hc(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Wc(i),null;case 13:if(Ge(Xe),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ms()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ge(Xe),null;case 4:return zs(),null;case 10:return jc(i.type._context),null;case 22:case 23:return Sh(),null;case 24:return null;default:return null}}var jl=!1,Lt=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,le=null;function $s(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){Ze(n,i,c)}else a.current=null}function dh(n,i,a){try{a()}catch(c){Ze(n,i,c)}}var qp=!1;function Kv(n,i){if(Sc=Lr,n=kf(),gc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,B=0,q=0,J=n,G=null;t:for(;;){for(var se;J!==a||d!==0&&J.nodeType!==3||(C=w+d),J!==m||c!==0&&J.nodeType!==3||(N=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(se=J.firstChild)!==null;)G=J,J=se;for(;;){if(J===n)break t;if(G===a&&++B===d&&(C=w),G===m&&++q===c&&(N=w),(se=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=se}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cc={focusedElem:n,selectionRange:a},Lr=!1,le=i;le!==null;)if(i=le,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,le=n;else for(;le!==null;){i=le;try{var ce=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,rt=ce.memoizedState,j=i.stateNode,D=j.getSnapshotBeforeUpdate(i.elementType===i.type?he:Dn(i.type,he),rt);j.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){Ze(i,i.return,te)}if(n=i.sibling,n!==null){n.return=i.return,le=n;break}le=i.return}return ce=qp,qp=!1,ce}function la(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&dh(i,a,m)}d=d.next}while(d!==c)}}function Ul(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function fh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Qp(n){var i=n.alternate;i!==null&&(n.alternate=null,Qp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[$n],delete i[Yo],delete i[Ac],delete i[Rv],delete i[Pv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Xp(n){return n.tag===5||n.tag===3||n.tag===4}function Yp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Xp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ph(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=yl));else if(c!==4&&(n=n.child,n!==null))for(ph(n,i,a),n=n.sibling;n!==null;)ph(n,i,a),n=n.sibling}function mh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(mh(n,i,a),n=n.sibling;n!==null;)mh(n,i,a),n=n.sibling}var kt=null,Vn=!1;function Kr(n,i,a){for(a=a.child;a!==null;)Jp(n,i,a),a=a.sibling}function Jp(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ki,a)}catch{}switch(a.tag){case 5:Lt||$s(a,i);case 6:var c=kt,d=Vn;kt=null,Kr(n,i,a),kt=c,Vn=d,kt!==null&&(Vn?(n=kt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):kt.removeChild(a.stateNode));break;case 18:kt!==null&&(Vn?(n=kt,a=a.stateNode,n.nodeType===8?Pc(n.parentNode,a):n.nodeType===1&&Pc(n,a),Pn(n)):Pc(kt,a.stateNode));break;case 4:c=kt,d=Vn,kt=a.stateNode.containerInfo,Vn=!0,Kr(n,i,a),kt=c,Vn=d;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&(m&2||m&4)&&dh(a,i,w),d=d.next}while(d!==c)}Kr(n,i,a);break;case 1:if(!Lt&&($s(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){Ze(a,i,C)}Kr(n,i,a);break;case 21:Kr(n,i,a);break;case 22:a.mode&1?(Lt=(c=Lt)||a.memoizedState!==null,Kr(n,i,a),Lt=c):Kr(n,i,a);break;default:Kr(n,i,a)}}function Zp(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Wv),i.forEach(function(c){var d=ew.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=i,C=w;e:for(;C!==null;){switch(C.tag){case 5:kt=C.stateNode,Vn=!1;break e;case 3:kt=C.stateNode.containerInfo,Vn=!0;break e;case 4:kt=C.stateNode.containerInfo,Vn=!0;break e}C=C.return}if(kt===null)throw Error(t(160));Jp(m,w,d),kt=null,Vn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch(B){Ze(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)em(i,n),i=i.sibling}function em(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(i,n),Hn(n),c&4){try{la(3,n,n.return),Ul(3,n)}catch(he){Ze(n,n.return,he)}try{la(5,n,n.return)}catch(he){Ze(n,n.return,he)}}break;case 1:On(i,n),Hn(n),c&512&&a!==null&&$s(a,a.return);break;case 5:if(On(i,n),Hn(n),c&512&&a!==null&&$s(a,a.return),n.flags&32){var d=n.stateNode;try{Pr(d,"")}catch(he){Ze(n,n.return,he)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&vo(d,m),Po(C,w);var B=Po(C,m);for(w=0;w<N.length;w+=2){var q=N[w],J=N[w+1];q==="style"?Co(d,J):q==="dangerouslySetInnerHTML"?Io(d,J):q==="children"?Pr(d,J):Z(d,q,J,B)}switch(C){case"input":wo(d,m);break;case"textarea":ss(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var se=m.value;se!=null?rr(d,!!m.multiple,se,!1):G!==!!m.multiple&&(m.defaultValue!=null?rr(d,!!m.multiple,m.defaultValue,!0):rr(d,!!m.multiple,m.multiple?[]:"",!1))}d[Yo]=m}catch(he){Ze(n,n.return,he)}}break;case 6:if(On(i,n),Hn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(he){Ze(n,n.return,he)}}break;case 3:if(On(i,n),Hn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(i.containerInfo)}catch(he){Ze(n,n.return,he)}break;case 4:On(i,n),Hn(n);break;case 13:On(i,n),Hn(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(_h=$e())),c&4&&Zp(n);break;case 22:if(q=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=(B=Lt)||q,On(i,n),Lt=B):On(i,n),Hn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!q&&n.mode&1)for(le=n,q=n.child;q!==null;){for(J=le=q;le!==null;){switch(G=le,se=G.child,G.tag){case 0:case 11:case 14:case 15:la(4,G,G.return);break;case 1:$s(G,G.return);var ce=G.stateNode;if(typeof ce.componentWillUnmount=="function"){c=G,a=G.return;try{i=c,ce.props=i.memoizedProps,ce.state=i.memoizedState,ce.componentWillUnmount()}catch(he){Ze(c,a,he)}}break;case 5:$s(G,G.return);break;case 22:if(G.memoizedState!==null){rm(J);continue}}se!==null?(se.return=G,le=se):rm(J)}q=q.sibling}e:for(q=null,J=n;;){if(J.tag===5){if(q===null){q=J;try{d=J.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=J.stateNode,N=J.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=So("display",w))}catch(he){Ze(n,n.return,he)}}}else if(J.tag===6){if(q===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(he){Ze(n,n.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;q===J&&(q=null),J=J.return}q===J&&(q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:On(i,n),Hn(n),c&4&&Zp(n);break;case 21:break;default:On(i,n),Hn(n)}}function Hn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Xp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Pr(d,""),c.flags&=-33);var m=Yp(n);mh(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Yp(n);ph(n,C,w);break;default:throw Error(t(161))}}catch(N){Ze(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Hv(n,i,a){le=n,tm(n)}function tm(n,i,a){for(var c=(n.mode&1)!==0;le!==null;){var d=le,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||jl;if(!w){var C=d.alternate,N=C!==null&&C.memoizedState!==null||Lt;C=jl;var B=Lt;if(jl=w,(Lt=N)&&!B)for(le=d;le!==null;)w=le,N=w.child,w.tag===22&&w.memoizedState!==null?im(d):N!==null?(N.return=w,le=N):im(d);for(;m!==null;)le=m,tm(m),m=m.sibling;le=d,jl=C,Lt=B}nm(n)}else d.subtreeFlags&8772&&m!==null?(m.return=d,le=m):nm(n)}}function nm(n){for(;le!==null;){var i=le;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Lt||Ul(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Lt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Dn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&rp(i,m,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}rp(i,w,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var q=B.memoizedState;if(q!==null){var J=q.dehydrated;J!==null&&Pn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||i.flags&512&&fh(i)}catch(G){Ze(i,i.return,G)}}if(i===n){le=null;break}if(a=i.sibling,a!==null){a.return=i.return,le=a;break}le=i.return}}function rm(n){for(;le!==null;){var i=le;if(i===n){le=null;break}var a=i.sibling;if(a!==null){a.return=i.return,le=a;break}le=i.return}}function im(n){for(;le!==null;){var i=le;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Ul(4,i)}catch(N){Ze(i,a,N)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(N){Ze(i,d,N)}}var m=i.return;try{fh(i)}catch(N){Ze(i,m,N)}break;case 5:var w=i.return;try{fh(i)}catch(N){Ze(i,w,N)}}}catch(N){Ze(i,i.return,N)}if(i===n){le=null;break}var C=i.sibling;if(C!==null){C.return=i.return,le=C;break}le=i.return}}var Gv=Math.ceil,zl=Q.ReactCurrentDispatcher,gh=Q.ReactCurrentOwner,vn=Q.ReactCurrentBatchConfig,Oe=0,wt=null,at=null,Rt=0,ln=0,Ws=Ur(0),ft=0,ua=null,Ui=0,Bl=0,yh=0,ca=null,Qt=null,_h=0,Ks=1/0,_r=null,$l=!1,vh=null,Hr=null,Wl=!1,Gr=null,Kl=0,ha=0,wh=null,Hl=-1,Gl=0;function $t(){return Oe&6?$e():Hl!==-1?Hl:Hl=$e()}function qr(n){return n.mode&1?Oe&2&&Rt!==0?Rt&-Rt:xv.transition!==null?(Gl===0&&(Gl=Pi()),Gl):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:jo(n.type)),n):1}function bn(n,i,a,c){if(50<ha)throw ha=0,wh=null,Error(t(185));Dr(n,a,c),(!(Oe&2)||n!==wt)&&(n===wt&&(!(Oe&2)&&(Bl|=a),ft===4&&Qr(n,Rt)),Xt(n,c),a===1&&Oe===0&&!(i.mode&1)&&(Ks=$e()+500,El&&Br()))}function Xt(n,i){var a=n.callbackNode;or(n,i);var c=Ri(n,n===wt?Rt:0);if(c===0)a!==null&&Oo(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Oo(a),i===1)n.tag===0?Av(om.bind(null,n)):Kf(om.bind(null,n)),Cv(function(){!(Oe&6)&&Br()}),a=null;else{switch(Or(c)){case 1:a=Ci;break;case 4:a=Ar;break;case 16:a=dn;break;case 536870912:a=Ga;break;default:a=dn}a=pm(a,sm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function sm(n,i){if(Hl=-1,Gl=0,Oe&6)throw Error(t(327));var a=n.callbackNode;if(Hs()&&n.callbackNode!==a)return null;var c=Ri(n,n===wt?Rt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=ql(n,c);else{i=c;var d=Oe;Oe|=2;var m=lm();(wt!==n||Rt!==i)&&(_r=null,Ks=$e()+500,Bi(n,i));do try{Xv();break}catch(C){am(n,C)}while(!0);Fc(),zl.current=m,Oe=d,at!==null?i=0:(wt=null,Rt=0,i=ft)}if(i!==0){if(i===2&&(d=nn(n),d!==0&&(c=d,i=Eh(n,d))),i===1)throw a=ua,Bi(n,0),Qr(n,c),Xt(n,$e()),a;if(i===6)Qr(n,c);else{if(d=n.current.alternate,!(c&30)&&!qv(d)&&(i=ql(n,c),i===2&&(m=nn(n),m!==0&&(c=m,i=Eh(n,m))),i===1))throw a=ua,Bi(n,0),Qr(n,c),Xt(n,$e()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:$i(n,Qt,_r);break;case 3:if(Qr(n,c),(c&130023424)===c&&(i=_h+500-$e(),10<i)){if(Ri(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){$t(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Rc($i.bind(null,n,Qt,_r),i);break}$i(n,Qt,_r);break;case 4:if(Qr(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var w=31-Ut(c);m=1<<w,w=i[w],w>d&&(d=w),c&=~m}if(c=d,c=$e()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Gv(c/1960))-c,10<c){n.timeoutHandle=Rc($i.bind(null,n,Qt,_r),c);break}$i(n,Qt,_r);break;case 5:$i(n,Qt,_r);break;default:throw Error(t(329))}}}return Xt(n,$e()),n.callbackNode===a?sm.bind(null,n):null}function Eh(n,i){var a=ca;return n.current.memoizedState.isDehydrated&&(Bi(n,i).flags|=256),n=ql(n,i),n!==2&&(i=Qt,Qt=a,i!==null&&Th(i)),n}function Th(n){Qt===null?Qt=n:Qt.push.apply(Qt,n)}function qv(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!xn(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(n,i){for(i&=~yh,i&=~Bl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Ut(i),c=1<<a;n[a]=-1,i&=~c}}function om(n){if(Oe&6)throw Error(t(327));Hs();var i=Ri(n,0);if(!(i&1))return Xt(n,$e()),null;var a=ql(n,i);if(n.tag!==0&&a===2){var c=nn(n);c!==0&&(i=c,a=Eh(n,c))}if(a===1)throw a=ua,Bi(n,0),Qr(n,i),Xt(n,$e()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,$i(n,Qt,_r),Xt(n,$e()),null}function Ih(n,i){var a=Oe;Oe|=1;try{return n(i)}finally{Oe=a,Oe===0&&(Ks=$e()+500,El&&Br())}}function zi(n){Gr!==null&&Gr.tag===0&&!(Oe&6)&&Hs();var i=Oe;Oe|=1;var a=vn.transition,c=Pe;try{if(vn.transition=null,Pe=1,n)return n()}finally{Pe=c,vn.transition=a,Oe=i,!(Oe&6)&&Br()}}function Sh(){ln=Ws.current,Ge(Ws)}function Bi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Sv(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(Vc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&vl();break;case 3:zs(),Ge(Ht),Ge(Vt),Hc();break;case 5:Wc(c);break;case 4:zs();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:jc(c.type._context);break;case 22:case 23:Sh()}a=a.return}if(wt=n,at=n=Xr(n.current,null),Rt=ln=i,ft=0,ua=null,yh=Bl=Ui=0,Qt=ca=null,Mi!==null){for(i=0;i<Mi.length;i++)if(a=Mi[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}Mi=null}return n}function am(n,i){do{var a=at;try{if(Fc(),Nl.current=bl,Dl){for(var c=Ye.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Dl=!1}if(ji=0,vt=dt=Ye=null,ra=!1,ia=0,gh.current=null,a===null||a.return===null){ft=1,ua=i,at=null;break}e:{var m=n,w=a.return,C=a,N=i;if(i=Rt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var B=N,q=C,J=q.tag;if(!(q.mode&1)&&(J===0||J===11||J===15)){var G=q.alternate;G?(q.updateQueue=G.updateQueue,q.memoizedState=G.memoizedState,q.lanes=G.lanes):(q.updateQueue=null,q.memoizedState=null)}var se=Dp(w);if(se!==null){se.flags&=-257,Vp(se,w,C,m,i),se.mode&1&&Np(m,B,i),i=se,N=B;var ce=i.updateQueue;if(ce===null){var he=new Set;he.add(N),i.updateQueue=he}else ce.add(N);break e}else{if(!(i&1)){Np(m,B,i),Ch();break e}N=Error(t(426))}}else if(Qe&&C.mode&1){var rt=Dp(w);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),Vp(rt,w,C,m,i),Lc(Bs(N,C));break e}}m=N=Bs(N,C),ft!==4&&(ft=2),ca===null?ca=[m]:ca.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var j=Ap(m,N,i);np(m,j);break e;case 1:C=N;var D=m.type,U=m.stateNode;if(!(m.flags&128)&&(typeof D.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Hr===null||!Hr.has(U)))){m.flags|=65536,i&=-i,m.lanes|=i;var te=xp(m,C,i);np(m,te);break e}}m=m.return}while(m!==null)}cm(a)}catch(de){i=de,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function lm(){var n=zl.current;return zl.current=bl,n===null?bl:n}function Ch(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(Ui&268435455)&&!(Bl&268435455)||Qr(wt,Rt)}function ql(n,i){var a=Oe;Oe|=2;var c=lm();(wt!==n||Rt!==i)&&(_r=null,Bi(n,i));do try{Qv();break}catch(d){am(n,d)}while(!0);if(Fc(),Oe=a,zl.current=c,at!==null)throw Error(t(261));return wt=null,Rt=0,ft}function Qv(){for(;at!==null;)um(at)}function Xv(){for(;at!==null&&!Ka();)um(at)}function um(n){var i=fm(n.alternate,n,ln);n.memoizedProps=n.pendingProps,i===null?cm(n):at=i,gh.current=null}function cm(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=$v(a,i),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ft=6,at=null;return}}else if(a=Bv(a,i,ln),a!==null){at=a;return}if(i=i.sibling,i!==null){at=i;return}at=i=n}while(i!==null);ft===0&&(ft=5)}function $i(n,i,a){var c=Pe,d=vn.transition;try{vn.transition=null,Pe=1,Yv(n,i,a,c)}finally{vn.transition=d,Pe=c}return null}function Yv(n,i,a,c){do Hs();while(Gr!==null);if(Oe&6)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(ze(n,m),n===wt&&(at=wt=null,Rt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Wl||(Wl=!0,pm(dn,function(){return Hs(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=vn.transition,vn.transition=null;var w=Pe;Pe=1;var C=Oe;Oe|=4,gh.current=null,Kv(n,a),em(a,n),yv(Cc),Lr=!!Sc,Cc=Sc=null,n.current=a,Hv(a),lc(),Oe=C,Pe=w,vn.transition=m}else n.current=a;if(Wl&&(Wl=!1,Gr=n,Kl=d),m=n.pendingLanes,m===0&&(Hr=null),qa(a.stateNode),Xt(n,$e()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if($l)throw $l=!1,n=vh,vh=null,n;return Kl&1&&n.tag!==0&&Hs(),m=n.pendingLanes,m&1?n===wh?ha++:(ha=0,wh=n):ha=0,Br(),null}function Hs(){if(Gr!==null){var n=Or(Kl),i=vn.transition,a=Pe;try{if(vn.transition=null,Pe=16>n?16:n,Gr===null)var c=!1;else{if(n=Gr,Gr=null,Kl=0,Oe&6)throw Error(t(331));var d=Oe;for(Oe|=4,le=n.current;le!==null;){var m=le,w=m.child;if(le.flags&16){var C=m.deletions;if(C!==null){for(var N=0;N<C.length;N++){var B=C[N];for(le=B;le!==null;){var q=le;switch(q.tag){case 0:case 11:case 15:la(8,q,m)}var J=q.child;if(J!==null)J.return=q,le=J;else for(;le!==null;){q=le;var G=q.sibling,se=q.return;if(Qp(q),q===B){le=null;break}if(G!==null){G.return=se,le=G;break}le=se}}}var ce=m.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var rt=he.sibling;he.sibling=null,he=rt}while(he!==null)}}le=m}}if(m.subtreeFlags&2064&&w!==null)w.return=m,le=w;else e:for(;le!==null;){if(m=le,m.flags&2048)switch(m.tag){case 0:case 11:case 15:la(9,m,m.return)}var j=m.sibling;if(j!==null){j.return=m.return,le=j;break e}le=m.return}}var D=n.current;for(le=D;le!==null;){w=le;var U=w.child;if(w.subtreeFlags&2064&&U!==null)U.return=w,le=U;else e:for(w=D;le!==null;){if(C=le,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Ul(9,C)}}catch(de){Ze(C,C.return,de)}if(C===w){le=null;break e}var te=C.sibling;if(te!==null){te.return=C.return,le=te;break e}le=C.return}}if(Oe=d,Br(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ki,n)}catch{}c=!0}return c}finally{Pe=a,vn.transition=i}}return!1}function hm(n,i,a){i=Bs(a,i),i=Ap(n,i,1),n=Wr(n,i,1),i=$t(),n!==null&&(Dr(n,1,i),Xt(n,i))}function Ze(n,i,a){if(n.tag===3)hm(n,n,a);else for(;i!==null;){if(i.tag===3){hm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hr===null||!Hr.has(c))){n=Bs(a,n),n=xp(i,n,1),i=Wr(i,n,1),n=$t(),i!==null&&(Dr(i,1,n),Xt(i,n));break}}i=i.return}}function Jv(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=$t(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Rt&a)===a&&(ft===4||ft===3&&(Rt&130023424)===Rt&&500>$e()-_h?Bi(n,0):yh|=a),Xt(n,i)}function dm(n,i){i===0&&(n.mode&1?(i=ms,ms<<=1,!(ms&130023424)&&(ms=4194304)):i=1);var a=$t();n=mr(n,i),n!==null&&(Dr(n,i,a),Xt(n,a))}function Zv(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),dm(n,a)}function ew(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),dm(n,a)}var fm;fm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ht.current)qt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return qt=!1,zv(n,i,a);qt=!!(n.flags&131072)}else qt=!1,Qe&&i.flags&1048576&&Hf(i,Il,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;Fl(n,i),n=i.pendingProps;var d=Os(i,Vt.current);Us(i,a),d=Qc(null,i,c,n,d,a);var m=Xc();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gt(c)?(m=!0,wl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Bc(i),d.updater=Ll,i.stateNode=d,d._reactInternals=i,nh(i,c,n,a),i=oh(null,i,c,!0,m,a)):(i.tag=0,Qe&&m&&Dc(i),Bt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(Fl(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=nw(c),n=Dn(c,n),d){case 0:i=sh(null,i,c,n,a);break e;case 1:i=jp(null,i,c,n,a);break e;case 11:i=Op(null,i,c,n,a);break e;case 14:i=bp(null,i,c,Dn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),sh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),jp(n,i,c,d,a);case 3:e:{if(Up(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,d=m.element,tp(n,i),Al(i,c,null,a);var w=i.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=Bs(Error(t(423)),i),i=zp(n,i,c,a,d);break e}else if(c!==d){d=Bs(Error(t(424)),i),i=zp(n,i,c,a,d);break e}else for(an=jr(i.stateNode.containerInfo.firstChild),on=i,Qe=!0,Nn=null,a=Zf(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ms(),c===d){i=yr(n,i,a);break e}Bt(n,i,c,a)}i=i.child}return i;case 5:return ip(i),n===null&&bc(i),c=i.type,d=i.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,kc(c,d)?w=null:m!==null&&kc(c,m)&&(i.flags|=32),Fp(n,i),Bt(n,i,w,a),i.child;case 6:return n===null&&bc(i),null;case 13:return Bp(n,i,a);case 4:return $c(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Fs(i,null,c,a):Bt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),Op(n,i,c,d,a);case 7:return Bt(n,i,i.pendingProps,a),i.child;case 8:return Bt(n,i,i.pendingProps.children,a),i.child;case 12:return Bt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,We(kl,c._currentValue),c._currentValue=w,m!==null)if(xn(m.value,w)){if(m.children===d.children&&!Ht.current){i=yr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var C=m.dependencies;if(C!==null){w=m.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(m.tag===1){N=gr(-1,a&-a),N.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var q=B.pending;q===null?N.next=N:(N.next=q.next,q.next=N),B.pending=N}}m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),Uc(m.return,a,i),C.lanes|=a;break}N=N.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),Uc(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Bt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,Us(i,a),d=yn(d),c=c(d),i.flags|=1,Bt(n,i,c,a),i.child;case 14:return c=i.type,d=Dn(c,i.pendingProps),d=Dn(c.type,d),bp(n,i,c,d,a);case 15:return Lp(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Dn(c,d),Fl(n,i),i.tag=1,Gt(c)?(n=!0,wl(i)):n=!1,Us(i,a),Rp(i,c,d),nh(i,c,d,a),oh(null,i,c,!0,n,a);case 19:return Wp(n,i,a);case 22:return Mp(n,i,a)}throw Error(t(156,i.tag))};function pm(n,i){return fs(n,i)}function tw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,c){return new tw(n,i,a,c)}function kh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nw(n){if(typeof n=="function")return kh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===Nt)return 14}return 2}function Xr(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ql(n,i,a,c,d,m){var w=2;if(c=n,typeof n=="function")kh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case x:return Wi(a.children,d,m,i);case S:w=8,d|=8;break;case k:return n=wn(12,a,i,d|2),n.elementType=k,n.lanes=m,n;case R:return n=wn(13,a,i,d),n.elementType=R,n.lanes=m,n;case tt:return n=wn(19,a,i,d),n.elementType=tt,n.lanes=m,n;case Ue:return Xl(a,d,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:w=10;break e;case O:w=9;break e;case b:w=11;break e;case Nt:w=14;break e;case Dt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=wn(w,a,i,d),i.elementType=n,i.type=c,i.lanes=m,i}function Wi(n,i,a,c){return n=wn(7,n,c,i),n.lanes=a,n}function Xl(n,i,a,c){return n=wn(22,n,c,i),n.elementType=Ue,n.lanes=a,n.stateNode={isHidden:!1},n}function Rh(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function Ph(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function rw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nr(0),this.expirationTimes=Nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ah(n,i,a,c,d,m,w,C,N){return n=new rw(n,i,a,C,N),i===1?(i=1,m===!0&&(i|=8)):i=0,m=wn(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bc(m),n}function iw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function mm(n){if(!n)return zr;n=n._reactInternals;e:{if(In(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return $f(n,a,i)}return i}function gm(n,i,a,c,d,m,w,C,N){return n=Ah(a,c,!0,n,d,m,w,C,N),n.context=mm(null),a=n.current,c=$t(),d=qr(a),m=gr(c,d),m.callback=i??null,Wr(a,m,d),n.current.lanes=d,Dr(n,d,c),Xt(n,c),n}function Yl(n,i,a,c){var d=i.current,m=$t(),w=qr(d);return a=mm(a),i.context===null?i.context=a:i.pendingContext=a,i=gr(m,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Wr(d,i,w),n!==null&&(bn(n,d,w,m),Pl(n,d,w)),w}function Jl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ym(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function xh(n,i){ym(n,i),(n=n.alternate)&&ym(n,i)}var _m=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nh(n){this._internalRoot=n}Zl.prototype.render=Nh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Yl(n,i,null,null)},Zl.prototype.unmount=Nh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;zi(function(){Yl(null,n,null,null)}),i[hr]=null}};function Zl(n){this._internalRoot=n}Zl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Za();n={blockedOn:null,target:n,priority:i};for(var a=0;a<jn.length&&i!==0&&i<jn[a].priority;a++);jn.splice(a,0,n),a===0&&nl(n)}};function Dh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function vm(){}function sw(n,i,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=Jl(w);m.call(B)}}var w=gm(i,c,n,0,null,!1,!1,"",vm);return n._reactRootContainer=w,n[hr]=w.current,Qo(n.nodeType===8?n.parentNode:n),zi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var B=Jl(N);C.call(B)}}var N=Ah(n,0,!1,null,null,!1,!1,"",vm);return n._reactRootContainer=N,n[hr]=N.current,Qo(n.nodeType===8?n.parentNode:n),zi(function(){Yl(i,N,a,c)}),N}function tu(n,i,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var C=d;d=function(){var N=Jl(w);C.call(N)}}Yl(i,w,n,d)}else w=sw(a,i,n,d,c);return Jl(w)}Ya=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=xr(i.pendingLanes);a!==0&&(Vr(i,a|1),Xt(i,$e()),!(Oe&6)&&(Ks=$e()+500,Br()))}break;case 13:zi(function(){var c=mr(n,1);if(c!==null){var d=$t();bn(c,n,1,d)}}),xh(n,1)}},gs=function(n){if(n.tag===13){var i=mr(n,134217728);if(i!==null){var a=$t();bn(i,n,134217728,a)}xh(n,134217728)}},Ja=function(n){if(n.tag===13){var i=qr(n),a=mr(n,i);if(a!==null){var c=$t();bn(a,n,i,c)}xh(n,i)}},Za=function(){return Pe},el=function(n,i){var a=Pe;try{return Pe=n,i()}finally{Pe=a}},as=function(n,i,a){switch(i){case"input":if(wo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=_l(c);if(!d)throw Error(t(90));ts(c),wo(c,d)}}}break;case"textarea":ss(n,a);break;case"select":i=a.value,i!=null&&rr(n,!!a.multiple,i,!1)}},Ei=Ih,xo=zi;var ow={usingClientEntryPoint:!1,Events:[Jo,Ds,_l,Mn,Ao,Ih]},da={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aw={bundleType:da.bundleType,version:da.version,rendererPackageName:da.rendererPackageName,rendererConfig:da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vo(n),n===null?null:n.stateNode},findFiberByHostInstance:da.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ki=nu.inject(aw),tn=nu}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ow,Yt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dh(i))throw Error(t(200));return iw(n,i,null,a)},Yt.createRoot=function(n,i){if(!Dh(n))throw Error(t(299));var a=!1,c="",d=_m;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Ah(n,1,!1,null,null,a,!1,c,d),n[hr]=i.current,Qo(n.nodeType===8?n.parentNode:n),new Nh(i)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Vo(i),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return zi(n)},Yt.hydrate=function(n,i,a){if(!eu(i))throw Error(t(200));return tu(null,n,i,!0,a)},Yt.hydrateRoot=function(n,i,a){if(!Dh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=_m;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=gm(i,null,n,1,a??null,d,!1,m,w),n[hr]=i.current,Qo(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Zl(i)},Yt.render=function(n,i,a){if(!eu(i))throw Error(t(200));return tu(null,n,i,!1,a)},Yt.unmountComponentAtNode=function(n){if(!eu(n))throw Error(t(40));return n._reactRootContainer?(zi(function(){tu(null,null,n,!1,function(){n._reactRootContainer=null,n[hr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Ih,Yt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!eu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return tu(n,i,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Rm;function qg(){if(Rm)return bh.exports;Rm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bh.exports=yw(),bh.exports}var Pm;function _w(){if(Pm)return ru;Pm=1;var r=qg();return ru.createRoot=r.createRoot,ru.hydrateRoot=r.hydrateRoot,ru}var vw=_w();qg();/**
 * @remix-run/router v1.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ka.apply(this,arguments)}var Zr;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zr||(Zr={}));const Am="popstate";function ww(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:h,hash:f}=s.location;return Jh("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Tu(o)}return Tw(e,t,null,r)}function st(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Qg(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ew(){return Math.random().toString(36).substr(2,8)}function xm(r,e){return{usr:r.state,key:r.key,idx:e}}function Jh(r,e,t,s){return t===void 0&&(t=null),ka({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:t,key:e&&e.key||s||Ew()})}function Tu(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ho(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function Tw(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f=Zr.Pop,g=null,y=v();y==null&&(y=0,h.replaceState(ka({},h.state,{idx:y}),""));function v(){return(h.state||{idx:null}).idx}function E(){f=Zr.Pop;let V=v(),X=V==null?null:V-y;y=V,g&&g({action:f,location:z.location,delta:X})}function I(V,X){f=Zr.Push;let ee=Jh(z.location,V,X);y=v()+1;let Z=xm(ee,y),Q=z.createHref(ee);try{h.pushState(Z,"",Q)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(Q)}l&&g&&g({action:f,location:z.location,delta:1})}function P(V,X){f=Zr.Replace;let ee=Jh(z.location,V,X);y=v();let Z=xm(ee,y),Q=z.createHref(ee);h.replaceState(Z,"",Q),l&&g&&g({action:f,location:z.location,delta:0})}function L(V){let X=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof V=="string"?V:Tu(V);return ee=ee.replace(/ $/,"%20"),st(X,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,X)}let z={get action(){return f},get location(){return r(o,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Am,E),g=V,()=>{o.removeEventListener(Am,E),g=null}},createHref(V){return e(o,V)},createURL:L,encodeLocation(V){let X=L(V);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:I,replace:P,go(V){return h.go(V)}};return z}var Nm;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Nm||(Nm={}));function Iw(r,e,t){return t===void 0&&(t="/"),Sw(r,e,t)}function Sw(r,e,t,s){let o=typeof e=="string"?ho(e):e,l=Nd(o.pathname||"/",t);if(l==null)return null;let h=Xg(r);Cw(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=Mw(l);f=Ow(h[g],y)}return f}function Xg(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};g.relativePath.startsWith("/")&&(st(g.relativePath.startsWith(s),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(s.length));let y=ti([s,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(st(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Xg(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Dw(y,l.index),routesMeta:v})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let g of Yg(l.path))o(l,h,g)}),e}function Yg(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Yg(s.join("/")),f=[];return f.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&f.push(...h),f.map(g=>r.startsWith("/")&&g===""?"/":g)}function Cw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Vw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const kw=/^:[\w-]+$/,Rw=3,Pw=2,Aw=1,xw=10,Nw=-2,Dm=r=>r==="*";function Dw(r,e){let t=r.split("/"),s=t.length;return t.some(Dm)&&(s+=Nw),e&&(s+=Pw),t.filter(o=>!Dm(o)).reduce((o,l)=>o+(kw.test(l)?Rw:l===""?Aw:xw),s)}function Vw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function Ow(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=bw({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),I=g.route;if(!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:ti([l,E.pathname]),pathnameBase:zw(ti([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=ti([l,E.pathnameBase]))}return h}function bw(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=Lw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,E)=>{let{paramName:I,isOptional:P}=v;if(I==="*"){let z=f[E]||"";h=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const L=f[E];return P&&!L?y[I]=void 0:y[I]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function Lw(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qg(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Mw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qg(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Nd(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Fw(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?ho(r):r;return{pathname:t?t.startsWith("/")?t:jw(t,e):e,search:Bw(s),hash:$w(o)}}function jw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Fh(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Dd(r,e){let t=Uw(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Vd(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=ho(r):(o=ka({},r),st(!o.pathname||!o.pathname.includes("?"),Fh("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),Fh("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),Fh("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}f=E>=0?e[E]:"/"}let g=Fw(o,f),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}const ti=r=>r.join("/").replace(/\/\/+/g,"/"),zw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Bw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,$w=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ww(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Jg=["post","put","patch","delete"];new Set(Jg);const Kw=["get",...Jg];new Set(Kw);/**
 * React Router v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Ra.apply(this,arguments)}const Od=W.createContext(null),Hw=W.createContext(null),di=W.createContext(null),zu=W.createContext(null),fi=W.createContext({outlet:null,matches:[],isDataRoute:!1}),Zg=W.createContext(null);function Gw(r,e){let{relative:t}=e===void 0?{}:e;fo()||st(!1);let{basename:s,navigator:o}=W.useContext(di),{hash:l,pathname:h,search:f}=ny(r,{relative:t}),g=h;return s!=="/"&&(g=h==="/"?s:ti([s,h])),o.createHref({pathname:g,search:f,hash:l})}function fo(){return W.useContext(zu)!=null}function ba(){return fo()||st(!1),W.useContext(zu).location}function ey(r){W.useContext(di).static||W.useLayoutEffect(r)}function ty(){let{isDataRoute:r}=W.useContext(fi);return r?oE():qw()}function qw(){fo()||st(!1);let r=W.useContext(Od),{basename:e,future:t,navigator:s}=W.useContext(di),{matches:o}=W.useContext(fi),{pathname:l}=ba(),h=JSON.stringify(Dd(o,t.v7_relativeSplatPath)),f=W.useRef(!1);return ey(()=>{f.current=!0}),W.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=Vd(y,JSON.parse(h),l,v.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ti([e,E.pathname])),(v.replace?s.replace:s.push)(E,v.state,v)},[e,s,h,l,r])}function ny(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=W.useContext(di),{matches:o}=W.useContext(fi),{pathname:l}=ba(),h=JSON.stringify(Dd(o,s.v7_relativeSplatPath));return W.useMemo(()=>Vd(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function Qw(r,e){return Xw(r,e)}function Xw(r,e,t,s){fo()||st(!1);let{navigator:o}=W.useContext(di),{matches:l}=W.useContext(fi),h=l[l.length-1],f=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=ba(),v;if(e){var E;let V=typeof e=="string"?ho(e):e;g==="/"||(E=V.pathname)!=null&&E.startsWith(g)||st(!1),v=V}else v=y;let I=v.pathname||"/",P=I;if(g!=="/"){let V=g.replace(/^\//,"").split("/");P="/"+I.replace(/^\//,"").split("/").slice(V.length).join("/")}let L=Iw(r,{pathname:P}),z=tE(L&&L.map(V=>Object.assign({},V,{params:Object.assign({},f,V.params),pathname:ti([g,o.encodeLocation?o.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:ti([g,o.encodeLocation?o.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),l,t,s);return e&&z?W.createElement(zu.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Zr.Pop}},z):z}function Yw(){let r=sE(),e=Ww(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:o},t):null,null)}const Jw=W.createElement(Yw,null);class Zw extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(fi.Provider,{value:this.props.routeContext},W.createElement(Zg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eE(r){let{routeContext:e,match:t,children:s}=r,o=W.useContext(Od);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(fi.Provider,{value:e},s)}function tE(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=h.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);v>=0||st(!1),h=h.slice(0,Math.min(h.length,v+1))}let g=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<h.length;v++){let E=h[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=v),E.route.id){let{loaderData:I,errors:P}=t,L=E.route.loader&&I[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||L){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((v,E,I)=>{let P,L=!1,z=null,V=null;t&&(P=f&&E.route.id?f[E.route.id]:void 0,z=E.route.errorElement||Jw,g&&(y<0&&I===0?(L=!0,V=null):y===I&&(L=!0,V=E.route.hydrateFallbackElement||null)));let X=e.concat(h.slice(0,I+1)),ee=()=>{let Z;return P?Z=z:L?Z=V:E.route.Component?Z=W.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=v,W.createElement(eE,{match:E,routeContext:{outlet:v,matches:X,isDataRoute:t!=null},children:Z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?W.createElement(Zw,{location:t.location,revalidation:t.revalidation,component:z,error:P,children:ee(),routeContext:{outlet:null,matches:X,isDataRoute:!0}}):ee()},null)}var ry=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(ry||{}),Iu=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Iu||{});function nE(r){let e=W.useContext(Od);return e||st(!1),e}function rE(r){let e=W.useContext(Hw);return e||st(!1),e}function iE(r){let e=W.useContext(fi);return e||st(!1),e}function iy(r){let e=iE(),t=e.matches[e.matches.length-1];return t.route.id||st(!1),t.route.id}function sE(){var r;let e=W.useContext(Zg),t=rE(Iu.UseRouteError),s=iy(Iu.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function oE(){let{router:r}=nE(ry.UseNavigateStable),e=iy(Iu.UseNavigateStable),t=W.useRef(!1);return ey(()=>{t.current=!0}),W.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,Ra({fromRouteId:e},l)))},[r,e])}const Vm={};function aE(r,e){Vm[e]||(Vm[e]=!0,console.warn(e))}const Om=(r,e,t)=>aE(r,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+r+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function lE(r,e){(r==null?void 0:r.v7_startTransition)===void 0&&Om("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(r==null?void 0:r.v7_relativeSplatPath)===void 0&&Om("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function uE(r){let{to:e,replace:t,state:s,relative:o}=r;fo()||st(!1);let{future:l,static:h}=W.useContext(di),{matches:f}=W.useContext(fi),{pathname:g}=ba(),y=ty(),v=Vd(e,Dd(f,l.v7_relativeSplatPath),g,o==="path"),E=JSON.stringify(v);return W.useEffect(()=>y(JSON.parse(E),{replace:t,state:s,relative:o}),[y,E,o,t,s]),null}function du(r){st(!1)}function cE(r){let{basename:e="/",children:t=null,location:s,navigationType:o=Zr.Pop,navigator:l,static:h=!1,future:f}=r;fo()&&st(!1);let g=e.replace(/^\/*/,"/"),y=W.useMemo(()=>({basename:g,navigator:l,static:h,future:Ra({v7_relativeSplatPath:!1},f)}),[g,f,l,h]);typeof s=="string"&&(s=ho(s));let{pathname:v="/",search:E="",hash:I="",state:P=null,key:L="default"}=s,z=W.useMemo(()=>{let V=Nd(v,g);return V==null?null:{location:{pathname:V,search:E,hash:I,state:P,key:L},navigationType:o}},[g,v,E,I,P,L,o]);return z==null?null:W.createElement(di.Provider,{value:y},W.createElement(zu.Provider,{children:t,value:z}))}function hE(r){let{children:e,location:t}=r;return Qw(Zh(e),t)}new Promise(()=>{});function Zh(r,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(r,(s,o)=>{if(!W.isValidElement(s))return;let l=[...e,o];if(s.type===W.Fragment){t.push.apply(t,Zh(s.props.children,l));return}s.type!==du&&st(!1),!s.props.index||!s.props.children||st(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Zh(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.28.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ed(){return ed=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ed.apply(this,arguments)}function dE(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function fE(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pE(r,e){return r.button===0&&(!e||e==="_self")&&!fE(r)}const mE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gE="6";try{window.__reactRouterVersion=gE}catch{}const yE="startTransition",bm=pw[yE];function _E(r){let{basename:e,children:t,future:s,window:o}=r,l=W.useRef();l.current==null&&(l.current=ww({window:o,v5Compat:!0}));let h=l.current,[f,g]=W.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},v=W.useCallback(E=>{y&&bm?bm(()=>g(E)):g(E)},[g,y]);return W.useLayoutEffect(()=>h.listen(v),[h,v]),W.useEffect(()=>lE(s),[s]),W.createElement(cE,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:h,future:s})}const vE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lm=W.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:f,target:g,to:y,preventScrollReset:v,viewTransition:E}=e,I=dE(e,mE),{basename:P}=W.useContext(di),L,z=!1;if(typeof y=="string"&&wE.test(y)&&(L=y,vE))try{let Z=new URL(window.location.href),Q=y.startsWith("//")?new URL(Z.protocol+y):new URL(y),Te=Nd(Q.pathname,P);Q.origin===Z.origin&&Te!=null?y=Te+Q.search+Q.hash:z=!0}catch{}let V=Gw(y,{relative:o}),X=EE(y,{replace:h,state:f,target:g,preventScrollReset:v,relative:o,viewTransition:E});function ee(Z){s&&s(Z),Z.defaultPrevented||X(Z)}return W.createElement("a",ed({},I,{href:L||V,onClick:z||l?s:ee,ref:t,target:g}))});var Mm;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Mm||(Mm={}));var Fm;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Fm||(Fm={}));function EE(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:f}=e===void 0?{}:e,g=ty(),y=ba(),v=ny(r,{relative:h});return W.useCallback(E=>{if(pE(E,t)){E.preventDefault();let I=s!==void 0?s:Tu(y)===Tu(v);g(r,{replace:I,state:o,preventScrollReset:l,relative:h,viewTransition:f})}},[y,g,v,s,o,t,r,l,h,f])}var td=function(r,e){return td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},td(r,e)};function TE(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");td(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tt=function(){return Tt=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Tt.apply(this,arguments)};function IE(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Gs(r,e,t,s){function o(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function f(v){try{y(s.next(v))}catch(E){h(E)}}function g(v){try{y(s.throw(v))}catch(E){h(E)}}function y(v){v.done?l(v.value):o(v.value).then(f,g)}y((s=s.apply(r,[])).next())})}function qs(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=f(0),h.throw=f(1),h.return=f(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(y){return function(v){return g([y,v])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(t=0)),t;)try{if(s=1,o&&(l=y[0]&2?o.return:y[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,y[1])).done)return l;switch(o=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){t.label=y[1];break}if(y[0]===6&&t.label<l[1]){t.label=l[1],l=y;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(y);break}l[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(r,t)}catch(v){y=[6,v],o=0}finally{s=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function qn(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]])}return t}var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ld(r,e){return r(e={exports:{}},e.exports),e.exports}var Ki=Ld(function(r,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function s(){var o=this;this.locked=new Map,this.addToLocked=function(l,h){var f=o.locked.get(l);f===void 0?h===void 0?o.locked.set(l,[]):o.locked.set(l,[h]):h!==void 0&&(f.unshift(h),o.locked.set(l,f))},this.isLocked=function(l){return o.locked.has(l)},this.lock=function(l){return new Promise(function(h,f){o.isLocked(l)?o.addToLocked(l,h):(o.addToLocked(l),h())})},this.unlock=function(l){var h=o.locked.get(l);if(h!==void 0&&h.length!==0){var f=h.pop();o.locked.set(l,h),f!==void 0&&setTimeout(f,0)}else o.locked.delete(l)}}return s.getInstance=function(){return s.instance===void 0&&(s.instance=new s),s.instance},s}();e.default=function(){return t.getInstance()}});bd(Ki);var SE=bd(Ld(function(r,e){var t=Gi&&Gi.__awaiter||function(v,E,I,P){return new(I||(I=Promise))(function(L,z){function V(Z){try{ee(P.next(Z))}catch(Q){z(Q)}}function X(Z){try{ee(P.throw(Z))}catch(Q){z(Q)}}function ee(Z){Z.done?L(Z.value):new I(function(Q){Q(Z.value)}).then(V,X)}ee((P=P.apply(v,E||[])).next())})},s=Gi&&Gi.__generator||function(v,E){var I,P,L,z,V={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return z={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function X(ee){return function(Z){return function(Q){if(I)throw new TypeError("Generator is already executing.");for(;V;)try{if(I=1,P&&(L=2&Q[0]?P.return:Q[0]?P.throw||((L=P.return)&&L.call(P),0):P.next)&&!(L=L.call(P,Q[1])).done)return L;switch(P=0,L&&(Q=[2&Q[0],L.value]),Q[0]){case 0:case 1:L=Q;break;case 4:return V.label++,{value:Q[1],done:!1};case 5:V.label++,P=Q[1],Q=[0];continue;case 7:Q=V.ops.pop(),V.trys.pop();continue;default:if(L=V.trys,!((L=L.length>0&&L[L.length-1])||Q[0]!==6&&Q[0]!==2)){V=0;continue}if(Q[0]===3&&(!L||Q[1]>L[0]&&Q[1]<L[3])){V.label=Q[1];break}if(Q[0]===6&&V.label<L[1]){V.label=L[1],L=Q;break}if(L&&V.label<L[2]){V.label=L[2],V.ops.push(Q);break}L[2]&&V.ops.pop(),V.trys.pop();continue}Q=E.call(v,V)}catch(Te){Q=[6,Te],P=0}finally{I=L=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([ee,Z])}}},o=Gi;Object.defineProperty(e,"__esModule",{value:!0});var l="browser-tabs-lock-key",h={key:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},getItem:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},clear:function(){return t(o,void 0,void 0,function(){return s(this,function(v){return[2,window.localStorage.clear()]})})},removeItem:function(v){return t(o,void 0,void 0,function(){return s(this,function(E){throw new Error("Unsupported")})})},setItem:function(v,E){return t(o,void 0,void 0,function(){return s(this,function(I){throw new Error("Unsupported")})})},keySync:function(v){return window.localStorage.key(v)},getItemSync:function(v){return window.localStorage.getItem(v)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(v){return window.localStorage.removeItem(v)},setItemSync:function(v,E){return window.localStorage.setItem(v,E)}};function f(v){return new Promise(function(E){return setTimeout(E,v)})}function g(v){for(var E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",I="",P=0;P<v;P++)I+=E[Math.floor(Math.random()*E.length)];return I}var y=function(){function v(E){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+g(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=E,v.waiters===void 0&&(v.waiters=[])}return v.prototype.acquireLock=function(E,I){return I===void 0&&(I=5e3),t(this,void 0,void 0,function(){var P,L,z,V,X,ee,Z;return s(this,function(Q){switch(Q.label){case 0:P=Date.now()+g(4),L=Date.now()+I,z=l+"-"+E,V=this.storageHandler===void 0?h:this.storageHandler,Q.label=1;case 1:return Date.now()<L?[4,f(30)]:[3,8];case 2:return Q.sent(),V.getItemSync(z)!==null?[3,5]:(X=this.id+"-"+E+"-"+P,[4,f(Math.floor(25*Math.random()))]);case 3:return Q.sent(),V.setItemSync(z,JSON.stringify({id:this.id,iat:P,timeoutKey:X,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,f(30)];case 4:return Q.sent(),(ee=V.getItemSync(z))!==null&&(Z=JSON.parse(ee)).id===this.id&&Z.iat===P?(this.acquiredIatSet.add(P),this.refreshLockWhileAcquired(z,P),[2,!0]):[3,7];case 5:return v.lockCorrector(this.storageHandler===void 0?h:this.storageHandler),[4,this.waitForSomethingToChange(L)];case 6:Q.sent(),Q.label=7;case 7:return P=Date.now()+g(4),[3,1];case 8:return[2,!1]}})})},v.prototype.refreshLockWhileAcquired=function(E,I){return t(this,void 0,void 0,function(){var P=this;return s(this,function(L){return setTimeout(function(){return t(P,void 0,void 0,function(){var z,V,X;return s(this,function(ee){switch(ee.label){case 0:return[4,Ki.default().lock(I)];case 1:return ee.sent(),this.acquiredIatSet.has(I)?(z=this.storageHandler===void 0?h:this.storageHandler,(V=z.getItemSync(E))===null?(Ki.default().unlock(I),[2]):((X=JSON.parse(V)).timeRefreshed=Date.now(),z.setItemSync(E,JSON.stringify(X)),Ki.default().unlock(I),this.refreshLockWhileAcquired(E,I),[2])):(Ki.default().unlock(I),[2])}})})},1e3),[2]})})},v.prototype.waitForSomethingToChange=function(E){return t(this,void 0,void 0,function(){return s(this,function(I){switch(I.label){case 0:return[4,new Promise(function(P){var L=!1,z=Date.now(),V=!1;function X(){if(V||(window.removeEventListener("storage",X),v.removeFromWaiting(X),clearTimeout(ee),V=!0),!L){L=!0;var Z=50-(Date.now()-z);Z>0?setTimeout(P,Z):P(null)}}window.addEventListener("storage",X),v.addToWaiting(X);var ee=setTimeout(X,Math.max(0,E-Date.now()))})];case 1:return I.sent(),[2]}})})},v.addToWaiting=function(E){this.removeFromWaiting(E),v.waiters!==void 0&&v.waiters.push(E)},v.removeFromWaiting=function(E){v.waiters!==void 0&&(v.waiters=v.waiters.filter(function(I){return I!==E}))},v.notifyWaiters=function(){v.waiters!==void 0&&v.waiters.slice().forEach(function(E){return E()})},v.prototype.releaseLock=function(E){return t(this,void 0,void 0,function(){return s(this,function(I){switch(I.label){case 0:return[4,this.releaseLock__private__(E)];case 1:return[2,I.sent()]}})})},v.prototype.releaseLock__private__=function(E){return t(this,void 0,void 0,function(){var I,P,L,z;return s(this,function(V){switch(V.label){case 0:return I=this.storageHandler===void 0?h:this.storageHandler,P=l+"-"+E,(L=I.getItemSync(P))===null?[2]:(z=JSON.parse(L)).id!==this.id?[3,2]:[4,Ki.default().lock(z.iat)];case 1:V.sent(),this.acquiredIatSet.delete(z.iat),I.removeItemSync(P),Ki.default().unlock(z.iat),v.notifyWaiters(),V.label=2;case 2:return[2]}})})},v.lockCorrector=function(E){for(var I=Date.now()-5e3,P=E,L=[],z=0;;){var V=P.keySync(z);if(V===null)break;L.push(V),z++}for(var X=!1,ee=0;ee<L.length;ee++){var Z=L[ee];if(Z.includes(l)){var Q=P.getItemSync(Z);if(Q!==null){var Te=JSON.parse(Q);(Te.timeRefreshed===void 0&&Te.timeAcquired<I||Te.timeRefreshed!==void 0&&Te.timeRefreshed<I)&&(P.removeItemSync(Z),X=!0)}}}X&&v.notifyWaiters()},v.waiters=void 0,v}();e.default=y}));const CE={timeoutInSeconds:60},sy={name:"auth0-spa-js",version:"2.1.3"},oy=()=>Date.now();let un=class nd extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,nd.prototype)}static fromPayload({error:e,error_description:t}){return new nd(e,t)}},kE=class ay extends un{constructor(e,t,s,o=null){super(e,t),this.state=s,this.appState=o,Object.setPrototypeOf(this,ay.prototype)}},rd=class ly extends un{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,ly.prototype)}},RE=class uy extends rd{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,uy.prototype)}},PE=class cy extends un{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,cy.prototype)}},AE=class hy extends un{constructor(e,t,s){super(e,t),this.mfa_token=s,Object.setPrototypeOf(this,hy.prototype)}},dy=class fy extends un{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${jm(e,["default"])}', scope: '${jm(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,fy.prototype)}};function jm(r,e=[]){return r&&!e.includes(r)?r:""}const fu=()=>window.crypto,jh=()=>{const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(fu().getRandomValues(new Uint8Array(43))).forEach(t=>e+=r[t%r.length]),e},Um=r=>btoa(r),id=r=>{var{clientId:e}=r,t=qn(r,["clientId"]);return new URLSearchParams((s=>Object.keys(s).filter(o=>s[o]!==void 0).reduce((o,l)=>Object.assign(Object.assign({},o),{[l]:s[l]}),{}))(Object.assign({client_id:e},t))).toString()},zm=r=>(e=>decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))(r.replace(/_/g,"/").replace(/-/g,"+")),xE=async(r,e)=>{const t=await fetch(r,e);return{ok:t.ok,json:await t.json()}},NE=async(r,e,t)=>{const s=new AbortController;let o;return e.signal=s.signal,Promise.race([xE(r,e),new Promise((l,h)=>{o=setTimeout(()=>{s.abort(),h(new Error("Timeout when executing 'fetch'"))},t)})]).finally(()=>{clearTimeout(o)})},DE=async(r,e,t,s,o,l,h)=>{return f={auth:{audience:e,scope:t},timeout:o,fetchUrl:r,fetchOptions:s,useFormData:h},g=l,new Promise(function(y,v){const E=new MessageChannel;E.port1.onmessage=function(I){I.data.error?v(new Error(I.data.error)):y(I.data),E.port1.close()},g.postMessage(f,[E.port2])});var f,g},VE=async(r,e,t,s,o,l,h=1e4)=>o?DE(r,e,t,s,h,o,l):NE(r,s,h);async function OE(r,e){var{baseUrl:t,timeout:s,audience:o,scope:l,auth0Client:h,useFormData:f}=r,g=qn(r,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const y=f?id(g):JSON.stringify(g);return await async function(v,E,I,P,L,z,V){let X,ee=null;for(let S=0;S<3;S++)try{X=await VE(v,I,P,L,z,V,E),ee=null;break}catch(k){ee=k}if(ee)throw ee;const Z=X.json,{error:Q,error_description:Te}=Z,ue=qn(Z,["error","error_description"]),{ok:x}=X;if(!x){const S=Te||`HTTP error. Unable to fetch ${v}`;throw Q==="mfa_required"?new AE(Q,S,ue.mfa_token):Q==="missing_refresh_token"?new dy(I,P):new un(Q||"request_error",S)}return ue}(`${t}/oauth/token`,s,o||"default",l,{method:"POST",body:y,headers:{"Content-Type":f?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(h||sy))}},e,f)}const iu=(...r)=>{return(e=r.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let qi=class sd{constructor(e,t="@@auth0spajs@@",s){this.prefix=t,this.suffix=s,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,s,o,l]=e.split("::");return new sd({clientId:s,scope:l,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:s,client_id:o}=e;return new sd({scope:t,audience:s,clientId:o})}};class bE{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}let py=class{constructor(){this.enclosedCache=function(){let e={};return{set(t,s){e[t]=s},get(t){const s=e[t];if(s)return s},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}},LE=class{constructor(e,t,s){this.cache=e,this.keyManifest=t,this.nowProvider=s||oy}async setIdToken(e,t,s){var o;const l=this.getIdTokenCacheKey(e);await this.cache.set(l,{id_token:t,decodedToken:s}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(l))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const s=await this.get(e);return!s||!s.id_token||!s.decodedToken?void 0:{id_token:s.id_token,decodedToken:s.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var s;let o=await this.cache.get(e.toKey());if(!o){const f=await this.getCacheKeys();if(!f)return;const g=this.matchExistingCacheKey(e,f);g&&(o=await this.cache.get(g))}if(!o)return;const l=await this.nowProvider(),h=Math.floor(l/1e3);return o.expiresAt-t<h?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((s=this.keyManifest)===null||s===void 0?void 0:s.remove(e.toKey()))):o.body}async set(e){var t;const s=new qi({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(s.toKey(),o),await((t=this.keyManifest)===null||t===void 0?void 0:t.add(s.toKey()))}async clear(e){var t;const s=await this.getCacheKeys();s&&(await s.filter(o=>!e||o.includes(e)).reduce(async(o,l)=>{await o,await this.cache.remove(l)},Promise.resolve()),await((t=this.keyManifest)===null||t===void 0?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new qi({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter(s=>{var o;const l=qi.fromKey(s),h=new Set(l.scope&&l.scope.split(" ")),f=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],g=l.scope&&f.reduce((y,v)=>y&&h.has(v),!0);return l.prefix==="@@auth0spajs@@"&&l.clientId===e.clientId&&l.audience===e.audience&&g})[0]}},ME=class{constructor(e,t,s){this.storage=e,this.clientId=t,this.cookieDomain=s,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const pa=r=>typeof r=="number",FE=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],jE=r=>{if(!r.id_token)throw new Error("ID token is required but missing");const e=(l=>{const h=l.split("."),[f,g,y]=h;if(h.length!==3||!f||!g||!y)throw new Error("ID token could not be decoded");const v=JSON.parse(zm(g)),E={__raw:l},I={};return Object.keys(v).forEach(P=>{E[P]=v[P],FE.includes(P)||(I[P]=v[P])}),{encoded:{header:f,payload:g,signature:y},header:JSON.parse(zm(f)),claims:E,user:I}})(r.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==r.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${r.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(r.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==r.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${r.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==r.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but found "${e.claims.aud}"`);if(r.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==r.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${r.nonce}", found "${e.claims.nonce}"`)}if(r.max_age&&!pa(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!pa(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!pa(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const t=r.leeway||60,s=new Date(r.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+t),s>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${s}) is after expiration time (${o})`);if(e.claims.nbf!=null&&pa(e.claims.nbf)){const l=new Date(0);if(l.setUTCSeconds(e.claims.nbf-t),s<l)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${s}) is before ${l}`)}if(e.claims.auth_time!=null&&pa(e.claims.auth_time)){const l=new Date(0);if(l.setUTCSeconds(parseInt(e.claims.auth_time)+r.max_age+t),s>l)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${s}) is after last auth at ${l}`)}if(r.organization){const l=r.organization.trim();if(l.startsWith("org_")){const h=l;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(h!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_id}"`)}else{const h=l.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(h!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_name}"`)}}return e};var Qi=Ld(function(r,e){var t=Gi&&Gi.__assign||function(){return t=Object.assign||function(g){for(var y,v=1,E=arguments.length;v<E;v++)for(var I in y=arguments[v])Object.prototype.hasOwnProperty.call(y,I)&&(g[I]=y[I]);return g},t.apply(this,arguments)};function s(g,y){if(!y)return"";var v="; "+g;return y===!0?v:v+"="+y}function o(g,y,v){return encodeURIComponent(g).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(y).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(E){if(typeof E.expires=="number"){var I=new Date;I.setMilliseconds(I.getMilliseconds()+864e5*E.expires),E.expires=I}return s("Expires",E.expires?E.expires.toUTCString():"")+s("Domain",E.domain)+s("Path",E.path)+s("Secure",E.secure)+s("SameSite",E.sameSite)}(v)}function l(g){for(var y={},v=g?g.split("; "):[],E=/(%[\dA-F]{2})+/gi,I=0;I<v.length;I++){var P=v[I].split("="),L=P.slice(1).join("=");L.charAt(0)==='"'&&(L=L.slice(1,-1));try{y[P[0].replace(E,decodeURIComponent)]=L.replace(E,decodeURIComponent)}catch{}}return y}function h(){return l(document.cookie)}function f(g,y,v){document.cookie=o(g,y,t({path:"/"},v))}e.__esModule=!0,e.encode=o,e.parse=l,e.getAll=h,e.get=function(g){return h()[g]},e.set=f,e.remove=function(g,y){f(g,"",t(t({},y),{expires:-1}))}});bd(Qi),Qi.encode,Qi.parse,Qi.getAll;var UE=Qi.get,my=Qi.set,gy=Qi.remove;const Qs={get(r){const e=UE(r);if(e!==void 0)return JSON.parse(e)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0,sameSite:"none"}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),my(r,JSON.stringify(e),s)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),gy(r,t)}},zE={get(r){return Qs.get(r)||Qs.get(`_legacy_${r}`)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),my(`_legacy_${r}`,JSON.stringify(e),s),Qs.save(r,e,t)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),gy(r,t),Qs.remove(r,e),Qs.remove(`_legacy_${r}`,e)}},BE={get(r){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(r);return e!=null?JSON.parse(e):void 0},save(r,e){sessionStorage.setItem(r,JSON.stringify(e))},remove(r){sessionStorage.removeItem(r)}};function $E(r,e,t){var s=e===void 0?null:e,o=function(g,y){var v=atob(g);if(y){for(var E=new Uint8Array(v.length),I=0,P=v.length;I<P;++I)E[I]=v.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(E.buffer))}return v}(r,t!==void 0&&t),l=o.indexOf(`
`,10)+1,h=o.substring(l)+(s?"//# sourceMappingURL="+s:""),f=new Blob([h],{type:"application/javascript"});return URL.createObjectURL(f)}var Bm,$m,Wm,Uh,WE=(Bm="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",$m=null,Wm=!1,function(r){return Uh=Uh||$E(Bm,$m,Wm),new Worker(Uh,r)});const zh={};class KE{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const s=new Set(((t=await this.cache.get(this.manifestKey))===null||t===void 0?void 0:t.keys)||[]);s.add(e),await this.cache.set(this.manifestKey,{keys:[...s]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const s=new Set(t.keys);return s.delete(e),s.size>0?await this.cache.set(this.manifestKey,{keys:[...s]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const HE={memory:()=>new py().enclosedCache,localstorage:()=>new bE},Km=r=>HE[r],Hm=r=>{const{openUrl:e,onRedirect:t}=r,s=qn(r,["openUrl","onRedirect"]);return Object.assign(Object.assign({},s),{openUrl:e===!1||e?e:t})},Bh=new SE;let GE=class{constructor(e){let t,s;if(this.userCache=new py().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await Bh.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!fu())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(fu().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)s=e.cache;else{if(t=e.cacheLocation||"memory",!Km(t))throw new Error(`Invalid cache location "${t}"`);s=Km(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?Qs:zE,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(h=>`auth0.${h}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:BE;var l;this.scope=iu("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new ME(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||oy,this.cacheManager=new LE(s,s.allKeys?void 0:new KE(s,this.options.clientId),this.nowProvider),this.domainUrl=(l=this.options.domain,/^https?:\/\//.test(l)?l:`https://${l}`),this.tokenIssuer=((h,f)=>h?h.startsWith("https://")?h:`https://${h}/`:`${f}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&t==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new WE)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||sy)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${id(e)}`)}async _verifyIdToken(e,t,s){const o=await this.nowProvider();return jE({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:s,leeway:this.options.leeway,max_age:(l=this.options.authorizationParams.max_age,typeof l!="string"?l:parseInt(l,10)||void 0),now:o});var l}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,s){const o=Um(jh()),l=Um(jh()),h=jh(),f=(v=>{const E=new Uint8Array(v);return(I=>{const P={"+":"-","/":"_","=":""};return I.replace(/[+/=]/g,L=>P[L])})(window.btoa(String.fromCharCode(...Array.from(E))))})(await(async v=>await fu().subtle.digest({name:"SHA-256"},new TextEncoder().encode(v)))(h)),g=((v,E,I,P,L,z,V,X)=>Object.assign(Object.assign(Object.assign({client_id:v.clientId},v.authorizationParams),I),{scope:iu(E,I.scope),response_type:"code",response_mode:X||"query",state:P,nonce:L,redirect_uri:V||v.authorizationParams.redirect_uri,code_challenge:z,code_challenge_method:"S256"}))(this.options,this.scope,e,o,l,f,e.redirect_uri||this.options.authorizationParams.redirect_uri||s,t==null?void 0:t.response_mode),y=this._authorizeUrl(g);return{nonce:l,code_verifier:h,scope:g.scope,audience:g.audience||"default",redirect_uri:g.redirect_uri,state:o,url:y}}async loginWithPopup(e,t){var s;if(e=e||{},!(t=t||{}).popup&&(t.popup=(f=>{const g=window.screenX+(window.innerWidth-400)/2,y=window.screenY+(window.innerHeight-600)/2;return window.open(f,"auth0:authorize:popup",`left=${g},top=${y},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const l=await(f=>new Promise((g,y)=>{let v;const E=setInterval(()=>{f.popup&&f.popup.closed&&(clearInterval(E),clearTimeout(I),window.removeEventListener("message",v,!1),y(new PE(f.popup)))},1e3),I=setTimeout(()=>{clearInterval(E),y(new RE(f.popup)),window.removeEventListener("message",v,!1)},1e3*(f.timeoutInSeconds||60));v=function(P){if(P.data&&P.data.type==="authorization_response"){if(clearTimeout(I),clearInterval(E),window.removeEventListener("message",v,!1),f.popup.close(),P.data.response.error)return y(un.fromPayload(P.data.response));g(P.data.response)}},window.addEventListener("message",v)}))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==l.state)throw new un("state_mismatch","Invalid state");const h=((s=e.authorizationParams)===null||s===void 0?void 0:s.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:l.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:h})}async getUser(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var t;const s=Hm(e),{openUrl:o,fragment:l,appState:h}=s,f=qn(s,["openUrl","fragment","appState"]),g=((t=f.authorizationParams)===null||t===void 0?void 0:t.organization)||this.options.authorizationParams.organization,y=await this._prepareAuthorizeUrl(f.authorizationParams||{}),{url:v}=y,E=qn(y,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},E),{appState:h}),g&&{organization:g}));const I=l?`${v}#${l}`:v;o?await o(I):window.location.assign(I)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(t.length===0)throw new Error("There are no query params available for parsing.");const{state:s,code:o,error:l,error_description:h}=(E=>{E.indexOf("#")>-1&&(E=E.substring(0,E.indexOf("#")));const I=new URLSearchParams(E);return{state:I.get("state"),code:I.get("code")||void 0,error:I.get("error")||void 0,error_description:I.get("error_description")||void 0}})(t.join("")),f=this.transactionManager.get();if(!f)throw new un("missing_transaction","Invalid state");if(this.transactionManager.remove(),l)throw new kE(l,h||l,s,f.appState);if(!f.code_verifier||f.state&&f.state!==s)throw new un("state_mismatch","Invalid state");const g=f.organization,y=f.nonce,v=f.redirect_uri;return await this._requestToken(Object.assign({audience:f.audience,scope:f.scope,code_verifier:f.code_verifier,grant_type:"authorization_code",code:o},v?{redirect_uri:v}:{}),{nonceIn:y,organization:g}),{appState:f.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var t;const s=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:iu(this.scope,(t=e.authorizationParams)===null||t===void 0?void 0:t.scope)})}),o=await((l,h)=>{let f=zh[h];return f||(f=l().finally(()=>{delete zh[h],f=null}),zh[h]=f),f})(()=>this._getTokenSilently(s),`${this.options.clientId}::${s.authorizationParams.audience}::${s.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:t}=e,s=qn(e,["cacheMode"]);if(t!=="off"){const o=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(t!=="cache-only"){if(!await(async(o,l=3)=>{for(let h=0;h<l;h++)if(await o())return!0;return!1})(()=>Bh.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new rd;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),t!=="off"){const y=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(y)return y}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(s):await this._getTokenFromIFrame(s),{id_token:l,access_token:h,oauthTokenScope:f,expires_in:g}=o;return Object.assign(Object.assign({id_token:l,access_token:h},f?{scope:f}:null),{expires_in:g})}finally{await Bh.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var s;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:iu(this.scope,(s=e.authorizationParams)===null||s===void 0?void 0:s.scope)})});return t=Object.assign(Object.assign({},CE),t),await this.loginWithPopup(o,t),(await this.cacheManager.get(new qi({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const t=e.logoutParams||{},{federated:s}=t,o=qn(t,["federated"]),l=s?"&federated":"";return this._url(`/v2/logout?${id(Object.assign({clientId:e.clientId},o))}`)+l}async logout(e={}){const t=Hm(e),{openUrl:s}=t,o=qn(t,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const l=this._buildLogoutUrl(o);s?await s(l):s!==!1&&window.location.assign(l)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),s=this.cookieStorage.get(this.orgHintCookieName);s&&!t.organization&&(t.organization=s);const{url:o,state:l,nonce:h,code_verifier:f,redirect_uri:g,scope:y,audience:v}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new un("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const E=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,I=await((L,z,V=60)=>new Promise((X,ee)=>{const Z=window.document.createElement("iframe");Z.setAttribute("width","0"),Z.setAttribute("height","0"),Z.style.display="none";const Q=()=>{window.document.body.contains(Z)&&(window.document.body.removeChild(Z),window.removeEventListener("message",Te,!1))};let Te;const ue=setTimeout(()=>{ee(new rd),Q()},1e3*V);Te=function(x){if(x.origin!=z||!x.data||x.data.type!=="authorization_response")return;const S=x.source;S&&S.close(),x.data.response.error?ee(un.fromPayload(x.data.response)):X(x.data.response),clearTimeout(ue),window.removeEventListener("message",Te,!1),setTimeout(Q,2e3)},window.addEventListener("message",Te,!1),window.document.body.appendChild(Z),Z.setAttribute("src",L)}))(o,this.domainUrl,E);if(l!==I.state)throw new un("state_mismatch","Invalid state");const P=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:f,code:I.code,grant_type:"authorization_code",redirect_uri:g,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:h,organization:t.organization});return Object.assign(Object.assign({},P),{scope:y,oauthTokenScope:P.scope,audience:v})}catch(E){throw E.error==="login_required"&&this.logout({openUrl:!1}),E}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new qi({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new dy(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const s=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const l=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:s}),o&&{timeout:o}));return Object.assign(Object.assign({},l),{scope:e.authorizationParams.scope,oauthTokenScope:l.scope,audience:e.authorizationParams.audience||"default"})}catch(l){if((l.message.indexOf("Missing Refresh Token")>-1||l.message&&l.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw l}}async _saveEntryInCache(e){const{id_token:t,decodedToken:s}=e,o=qn(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:s}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new qi({clientId:this.options.clientId,audience:e,scope:this.scope})),s=this.userCache.get("@@user@@");return t&&t.id_token===(s==null?void 0:s.id_token)?s:(this.userCache.set("@@user@@",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:s}){const o=await this.cacheManager.get(new qi({scope:e,audience:t,clientId:s}),60);if(o&&o.access_token){const{access_token:l,oauthTokenScope:h,expires_in:f}=o,g=await this._getIdTokenFromCache();return g&&Object.assign(Object.assign({id_token:g.id_token,access_token:l},h?{scope:h}:null),{expires_in:f})}}async _requestToken(e,t){const{nonceIn:s,organization:o}=t||{},l=await OE(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),h=await this._verifyIdToken(l.id_token,s,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},l),{decodedToken:h,scope:e.scope,audience:e.audience||"default"}),l.scope?{oauthTokenScope:l.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||h.claims.org_id),Object.assign(Object.assign({},l),{decodedToken:h})}};var yy={isAuthenticated:!1,isLoading:!0},vr=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},qE=Tt(Tt({},yy),{buildAuthorizeUrl:vr,buildLogoutUrl:vr,getAccessTokenSilently:vr,getAccessTokenWithPopup:vr,getIdTokenClaims:vr,loginWithRedirect:vr,loginWithPopup:vr,logout:vr,handleRedirectCallback:vr}),_y=W.createContext(qE),Gm=function(r){TE(e,r);function e(t,s){var o=r.call(this,s||t)||this;return o.error=t,o.error_description=s,Object.setPrototypeOf(o,e.prototype),o}return e}(Error),QE=/[?&]code=[^&]+/,XE=/[?&]state=[^&]+/,YE=/[?&]error=[^&]+/,JE=function(r){return r===void 0&&(r=window.location.search),(QE.test(r)||YE.test(r))&&XE.test(r)},vy=function(r){return function(e){return e instanceof Error?e:e!==null&&typeof e=="object"&&"error"in e&&typeof e.error=="string"?"error_description"in e&&typeof e.error_description=="string"?new Gm(e.error,e.error_description):new Gm(e.error):new Error(r)}},qm=vy("Login failed"),$h=vy("Get access token failed"),wy=function(r){var e;r!=null&&r.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),r.authorizationParams=r.authorizationParams||{},r.authorizationParams.redirect_uri=r.redirectUri,delete r.redirectUri),!((e=r==null?void 0:r.authorizationParams)===null||e===void 0)&&e.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),r.authorizationParams.redirect_uri=r.authorizationParams.redirectUri,delete r.authorizationParams.redirectUri)},ZE=function(r,e){switch(e.type){case"LOGIN_POPUP_STARTED":return Tt(Tt({},r),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return Tt(Tt({},r),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return r.user===e.user?r:Tt(Tt({},r),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return Tt(Tt({},r),{isAuthenticated:!1,user:void 0});case"ERROR":return Tt(Tt({},r),{isLoading:!1,error:e.error})}},e0=function(r){return wy(r),Tt(Tt({},r),{auth0Client:{name:"auth0-react",version:"2.3.0"}})},t0=function(r){window.history.replaceState({},document.title,(r==null?void 0:r.returnTo)||window.location.pathname)},n0=function(r){var e=r.children,t=r.skipRedirectCallback,s=r.onRedirectCallback,o=s===void 0?t0:s,l=r.context,h=l===void 0?_y:l,f=IE(r,["children","skipRedirectCallback","onRedirectCallback","context"]),g=W.useState(function(){return new GE(e0(f))})[0],y=W.useReducer(ZE,yy),v=y[0],E=y[1],I=W.useRef(!1),P=W.useCallback(function(ue){return E({type:"ERROR",error:ue}),ue},[]);W.useEffect(function(){I.current||(I.current=!0,function(){return Gs(void 0,void 0,void 0,function(){var ue,x,S;return qs(this,function(k){switch(k.label){case 0:return k.trys.push([0,7,,8]),ue=void 0,JE()&&!t?[4,g.handleRedirectCallback()]:[3,3];case 1:return x=k.sent().appState,[4,g.getUser()];case 2:return ue=k.sent(),o(x,ue),[3,6];case 3:return[4,g.checkSession()];case 4:return k.sent(),[4,g.getUser()];case 5:ue=k.sent(),k.label=6;case 6:return E({type:"INITIALISED",user:ue}),[3,8];case 7:return S=k.sent(),P(qm(S)),[3,8];case 8:return[2]}})})}())},[g,o,t,P]);var L=W.useCallback(function(ue){return wy(ue),g.loginWithRedirect(ue)},[g]),z=W.useCallback(function(ue,x){return Gs(void 0,void 0,void 0,function(){var S,k;return qs(this,function(A){switch(A.label){case 0:E({type:"LOGIN_POPUP_STARTED"}),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,g.loginWithPopup(ue,x)];case 2:return A.sent(),[3,4];case 3:return S=A.sent(),P(qm(S)),[2];case 4:return[4,g.getUser()];case 5:return k=A.sent(),E({type:"LOGIN_POPUP_COMPLETE",user:k}),[2]}})})},[g]),V=W.useCallback(function(ue){return ue===void 0&&(ue={}),Gs(void 0,void 0,void 0,function(){return qs(this,function(x){switch(x.label){case 0:return[4,g.logout(ue)];case 1:return x.sent(),(ue.openUrl||ue.openUrl===!1)&&E({type:"LOGOUT"}),[2]}})})},[g]),X=W.useCallback(function(ue){return Gs(void 0,void 0,void 0,function(){var x,S,k,A;return qs(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,3,5]),[4,g.getTokenSilently(ue)];case 1:return x=O.sent(),[3,5];case 2:throw S=O.sent(),$h(S);case 3:return k=E,A={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,g.getUser()];case 4:return k.apply(void 0,[(A.user=O.sent(),A)]),[7];case 5:return[2,x]}})})},[g]),ee=W.useCallback(function(ue,x){return Gs(void 0,void 0,void 0,function(){var S,k,A,O;return qs(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,3,5]),[4,g.getTokenWithPopup(ue,x)];case 1:return S=b.sent(),[3,5];case 2:throw k=b.sent(),$h(k);case 3:return A=E,O={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,g.getUser()];case 4:return A.apply(void 0,[(O.user=b.sent(),O)]),[7];case 5:return[2,S]}})})},[g]),Z=W.useCallback(function(){return g.getIdTokenClaims()},[g]),Q=W.useCallback(function(ue){return Gs(void 0,void 0,void 0,function(){var x,S,k;return qs(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,3,5]),[4,g.handleRedirectCallback(ue)];case 1:return[2,A.sent()];case 2:throw x=A.sent(),$h(x);case 3:return S=E,k={type:"HANDLE_REDIRECT_COMPLETE"},[4,g.getUser()];case 4:return S.apply(void 0,[(k.user=A.sent(),k)]),[7];case 5:return[2]}})})},[g]),Te=W.useMemo(function(){return Tt(Tt({},v),{getAccessTokenSilently:X,getAccessTokenWithPopup:ee,getIdTokenClaims:Z,loginWithRedirect:L,loginWithPopup:z,logout:V,handleRedirectCallback:Q})},[v,X,ee,Z,L,z,V,Q]);return Tr.createElement(h.Provider,{value:Te},e)},Ey=function(r){return r===void 0&&(r=_y),W.useContext(r)},Qm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},r0=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Iy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,P=y&63;g||(P=64,h||(I=64)),s.push(t[v],t[E],t[I],t[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ty(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):r0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new i0;const I=l<<2|f>>4;if(s.push(I),y!==64){const P=f<<4&240|y>>2;if(s.push(P),E!==64){const L=y<<6&192|E;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class i0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s0=function(r){const e=Ty(r);return Iy.encodeByteArray(e,!0)},Su=function(r){return s0(r).replace(/\./g,"")},o0=function(r){try{return Iy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=()=>a0().__FIREBASE_DEFAULTS__,u0=()=>{if(typeof process>"u"||typeof Qm>"u")return;const r=Qm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},c0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&o0(r[1]);return e&&JSON.parse(e)},Md=()=>{try{return l0()||u0()||c0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},h0=r=>{var e,t;return(t=(e=Md())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},d0=r=>{const e=h0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Sy=()=>{var r;return(r=Md())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Su(JSON.stringify(t)),Su(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g0(){var r;const e=(r=Md())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y0(){return!g0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _0(){try{return typeof indexedDB=="object"}catch{return!1}}function v0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="FirebaseError";class po extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=w0,Object.setPrototypeOf(this,po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cy.prototype.create)}}class Cy{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?E0(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new po(o,f,s)}}function E0(r,e){return r.replace(T0,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const T0=/\{\$([^}]+)}/g;function Cu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Xm(l)&&Xm(h)){if(!Cu(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Xm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r){return r&&r._delegate?r._delegate:r}class Pa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new f0;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C0(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:S0(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S0(r){return r===Hi?void 0:r}function C0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const R0={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},P0=Ve.INFO,A0={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},x0=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=A0[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=P0,this._logHandler=x0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const N0=(r,e)=>e.some(t=>r instanceof t);let Ym,Jm;function D0(){return Ym||(Ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V0(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ry=new WeakMap,od=new WeakMap,Py=new WeakMap,Wh=new WeakMap,Fd=new WeakMap;function O0(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ni(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Ry.set(t,r)}).catch(()=>{}),Fd.set(e,r),e}function b0(r){if(od.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});od.set(r,e)}let ad={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return od.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Py.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ni(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function L0(r){ad=r(ad)}function M0(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Kh(this),e,...t);return Py.set(s,e.sort?e.sort():[e]),ni(s)}:V0().includes(r)?function(...e){return r.apply(Kh(this),e),ni(Ry.get(this))}:function(...e){return ni(r.apply(Kh(this),e))}}function F0(r){return typeof r=="function"?M0(r):(r instanceof IDBTransaction&&b0(r),N0(r,D0())?new Proxy(r,ad):r)}function ni(r){if(r instanceof IDBRequest)return O0(r);if(Wh.has(r))return Wh.get(r);const e=F0(r);return e!==r&&(Wh.set(r,e),Fd.set(e,r)),e}const Kh=r=>Fd.get(r);function j0(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=ni(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ni(h.result),g.oldVersion,g.newVersion,ni(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const U0=["get","getKey","getAll","getAllKeys","count"],z0=["put","add","delete","clear"],Hh=new Map;function Zm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Hh.get(e))return Hh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=z0.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||U0.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Hh.set(e,l),l}L0(r=>({...r,get:(e,t,s)=>Zm(e,t)||r.get(e,t,s),has:(e,t)=>!!Zm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($0(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function $0(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ld="@firebase/app",eg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new ky("@firebase/app"),W0="@firebase/app-compat",K0="@firebase/analytics-compat",H0="@firebase/analytics",G0="@firebase/app-check-compat",q0="@firebase/app-check",Q0="@firebase/auth",X0="@firebase/auth-compat",Y0="@firebase/database",J0="@firebase/data-connect",Z0="@firebase/database-compat",eT="@firebase/functions",tT="@firebase/functions-compat",nT="@firebase/installations",rT="@firebase/installations-compat",iT="@firebase/messaging",sT="@firebase/messaging-compat",oT="@firebase/performance",aT="@firebase/performance-compat",lT="@firebase/remote-config",uT="@firebase/remote-config-compat",cT="@firebase/storage",hT="@firebase/storage-compat",dT="@firebase/firestore",fT="@firebase/vertexai",pT="@firebase/firestore-compat",mT="firebase",gT="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",yT={[ld]:"fire-core",[W0]:"fire-core-compat",[H0]:"fire-analytics",[K0]:"fire-analytics-compat",[q0]:"fire-app-check",[G0]:"fire-app-check-compat",[Q0]:"fire-auth",[X0]:"fire-auth-compat",[Y0]:"fire-rtdb",[J0]:"fire-data-connect",[Z0]:"fire-rtdb-compat",[eT]:"fire-fn",[tT]:"fire-fn-compat",[nT]:"fire-iid",[rT]:"fire-iid-compat",[iT]:"fire-fcm",[sT]:"fire-fcm-compat",[oT]:"fire-perf",[aT]:"fire-perf-compat",[lT]:"fire-rc",[uT]:"fire-rc-compat",[cT]:"fire-gcs",[hT]:"fire-gcs-compat",[dT]:"fire-fst",[pT]:"fire-fst-compat",[fT]:"fire-vertex","fire-js":"fire-js",[mT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,_T=new Map,cd=new Map;function tg(r,e){try{r.container.addComponent(e)}catch(t){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ru(r){const e=r.name;if(cd.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,r);for(const t of ku.values())tg(t,r);for(const t of _T.values())tg(t,r);return!0}function vT(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Cy("app","Firebase",wT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=gT;function Ay(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ud,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ri.create("bad-app-name",{appName:String(o)});if(t||(t=Sy()),!t)throw ri.create("no-options");const l=ku.get(o);if(l){if(Cu(t,l.options)&&Cu(s,l.config))return l;throw ri.create("duplicate-app",{appName:o})}const h=new k0(o);for(const g of cd.values())h.addComponent(g);const f=new ET(t,s,h);return ku.set(o,f),f}function IT(r=ud){const e=ku.get(r);if(!e&&r===ud&&Sy())return Ay();if(!e)throw ri.create("no-app",{appName:r});return e}function eo(r,e,t){var s;let o=(s=yT[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(f.join(" "));return}Ru(new Pa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebase-heartbeat-database",CT=1,Aa="firebase-heartbeat-store";let Gh=null;function xy(){return Gh||(Gh=j0(ST,CT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Aa)}catch(t){console.warn(t)}}}}).catch(r=>{throw ri.create("idb-open",{originalErrorMessage:r.message})})),Gh}async function kT(r){try{const t=(await xy()).transaction(Aa),s=await t.objectStore(Aa).get(Ny(r));return await t.done,s}catch(e){if(e instanceof po)Ir.warn(e.message);else{const t=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(t.message)}}}async function ng(r,e){try{const s=(await xy()).transaction(Aa,"readwrite");await s.objectStore(Aa).put(e,Ny(r)),await s.done}catch(t){if(t instanceof po)Ir.warn(t.message);else{const s=ri.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ir.warn(s.message)}}}function Ny(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=1024,PT=30*24*60*60*1e3;class AT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=rg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=PT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Ir.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rg(),{heartbeatsToSend:s,unsentEntries:o}=xT(this._heartbeatsCache.heartbeats),l=Su(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ir.warn(t),""}}}function rg(){return new Date().toISOString().substring(0,10)}function xT(r,e=RT){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),ig(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ig(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class NT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _0()?v0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ng(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ig(r){return Su(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(r){Ru(new Pa("platform-logger",e=>new B0(e),"PRIVATE")),Ru(new Pa("heartbeat",e=>new AT(e),"PRIVATE")),eo(ld,eg,r),eo(ld,eg,"esm2017"),eo("fire-js","")}DT("");var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ii,Dy;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function k(){}k.prototype=S.prototype,x.D=S.prototype,x.prototype=new k,x.prototype.constructor=x,x.C=function(A,O,b){for(var R=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)R[tt-2]=arguments[tt];return S.prototype[O].apply(A,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,k){k||(k=0);var A=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)A[O]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(O=0;16>O;++O)A[O]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=x.g[0],k=x.g[1],O=x.g[2];var b=x.g[3],R=S+(b^k&(O^b))+A[0]+3614090360&4294967295;S=k+(R<<7&4294967295|R>>>25),R=b+(O^S&(k^O))+A[1]+3905402710&4294967295,b=S+(R<<12&4294967295|R>>>20),R=O+(k^b&(S^k))+A[2]+606105819&4294967295,O=b+(R<<17&4294967295|R>>>15),R=k+(S^O&(b^S))+A[3]+3250441966&4294967295,k=O+(R<<22&4294967295|R>>>10),R=S+(b^k&(O^b))+A[4]+4118548399&4294967295,S=k+(R<<7&4294967295|R>>>25),R=b+(O^S&(k^O))+A[5]+1200080426&4294967295,b=S+(R<<12&4294967295|R>>>20),R=O+(k^b&(S^k))+A[6]+2821735955&4294967295,O=b+(R<<17&4294967295|R>>>15),R=k+(S^O&(b^S))+A[7]+4249261313&4294967295,k=O+(R<<22&4294967295|R>>>10),R=S+(b^k&(O^b))+A[8]+1770035416&4294967295,S=k+(R<<7&4294967295|R>>>25),R=b+(O^S&(k^O))+A[9]+2336552879&4294967295,b=S+(R<<12&4294967295|R>>>20),R=O+(k^b&(S^k))+A[10]+4294925233&4294967295,O=b+(R<<17&4294967295|R>>>15),R=k+(S^O&(b^S))+A[11]+2304563134&4294967295,k=O+(R<<22&4294967295|R>>>10),R=S+(b^k&(O^b))+A[12]+1804603682&4294967295,S=k+(R<<7&4294967295|R>>>25),R=b+(O^S&(k^O))+A[13]+4254626195&4294967295,b=S+(R<<12&4294967295|R>>>20),R=O+(k^b&(S^k))+A[14]+2792965006&4294967295,O=b+(R<<17&4294967295|R>>>15),R=k+(S^O&(b^S))+A[15]+1236535329&4294967295,k=O+(R<<22&4294967295|R>>>10),R=S+(O^b&(k^O))+A[1]+4129170786&4294967295,S=k+(R<<5&4294967295|R>>>27),R=b+(k^O&(S^k))+A[6]+3225465664&4294967295,b=S+(R<<9&4294967295|R>>>23),R=O+(S^k&(b^S))+A[11]+643717713&4294967295,O=b+(R<<14&4294967295|R>>>18),R=k+(b^S&(O^b))+A[0]+3921069994&4294967295,k=O+(R<<20&4294967295|R>>>12),R=S+(O^b&(k^O))+A[5]+3593408605&4294967295,S=k+(R<<5&4294967295|R>>>27),R=b+(k^O&(S^k))+A[10]+38016083&4294967295,b=S+(R<<9&4294967295|R>>>23),R=O+(S^k&(b^S))+A[15]+3634488961&4294967295,O=b+(R<<14&4294967295|R>>>18),R=k+(b^S&(O^b))+A[4]+3889429448&4294967295,k=O+(R<<20&4294967295|R>>>12),R=S+(O^b&(k^O))+A[9]+568446438&4294967295,S=k+(R<<5&4294967295|R>>>27),R=b+(k^O&(S^k))+A[14]+3275163606&4294967295,b=S+(R<<9&4294967295|R>>>23),R=O+(S^k&(b^S))+A[3]+4107603335&4294967295,O=b+(R<<14&4294967295|R>>>18),R=k+(b^S&(O^b))+A[8]+1163531501&4294967295,k=O+(R<<20&4294967295|R>>>12),R=S+(O^b&(k^O))+A[13]+2850285829&4294967295,S=k+(R<<5&4294967295|R>>>27),R=b+(k^O&(S^k))+A[2]+4243563512&4294967295,b=S+(R<<9&4294967295|R>>>23),R=O+(S^k&(b^S))+A[7]+1735328473&4294967295,O=b+(R<<14&4294967295|R>>>18),R=k+(b^S&(O^b))+A[12]+2368359562&4294967295,k=O+(R<<20&4294967295|R>>>12),R=S+(k^O^b)+A[5]+4294588738&4294967295,S=k+(R<<4&4294967295|R>>>28),R=b+(S^k^O)+A[8]+2272392833&4294967295,b=S+(R<<11&4294967295|R>>>21),R=O+(b^S^k)+A[11]+1839030562&4294967295,O=b+(R<<16&4294967295|R>>>16),R=k+(O^b^S)+A[14]+4259657740&4294967295,k=O+(R<<23&4294967295|R>>>9),R=S+(k^O^b)+A[1]+2763975236&4294967295,S=k+(R<<4&4294967295|R>>>28),R=b+(S^k^O)+A[4]+1272893353&4294967295,b=S+(R<<11&4294967295|R>>>21),R=O+(b^S^k)+A[7]+4139469664&4294967295,O=b+(R<<16&4294967295|R>>>16),R=k+(O^b^S)+A[10]+3200236656&4294967295,k=O+(R<<23&4294967295|R>>>9),R=S+(k^O^b)+A[13]+681279174&4294967295,S=k+(R<<4&4294967295|R>>>28),R=b+(S^k^O)+A[0]+3936430074&4294967295,b=S+(R<<11&4294967295|R>>>21),R=O+(b^S^k)+A[3]+3572445317&4294967295,O=b+(R<<16&4294967295|R>>>16),R=k+(O^b^S)+A[6]+76029189&4294967295,k=O+(R<<23&4294967295|R>>>9),R=S+(k^O^b)+A[9]+3654602809&4294967295,S=k+(R<<4&4294967295|R>>>28),R=b+(S^k^O)+A[12]+3873151461&4294967295,b=S+(R<<11&4294967295|R>>>21),R=O+(b^S^k)+A[15]+530742520&4294967295,O=b+(R<<16&4294967295|R>>>16),R=k+(O^b^S)+A[2]+3299628645&4294967295,k=O+(R<<23&4294967295|R>>>9),R=S+(O^(k|~b))+A[0]+4096336452&4294967295,S=k+(R<<6&4294967295|R>>>26),R=b+(k^(S|~O))+A[7]+1126891415&4294967295,b=S+(R<<10&4294967295|R>>>22),R=O+(S^(b|~k))+A[14]+2878612391&4294967295,O=b+(R<<15&4294967295|R>>>17),R=k+(b^(O|~S))+A[5]+4237533241&4294967295,k=O+(R<<21&4294967295|R>>>11),R=S+(O^(k|~b))+A[12]+1700485571&4294967295,S=k+(R<<6&4294967295|R>>>26),R=b+(k^(S|~O))+A[3]+2399980690&4294967295,b=S+(R<<10&4294967295|R>>>22),R=O+(S^(b|~k))+A[10]+4293915773&4294967295,O=b+(R<<15&4294967295|R>>>17),R=k+(b^(O|~S))+A[1]+2240044497&4294967295,k=O+(R<<21&4294967295|R>>>11),R=S+(O^(k|~b))+A[8]+1873313359&4294967295,S=k+(R<<6&4294967295|R>>>26),R=b+(k^(S|~O))+A[15]+4264355552&4294967295,b=S+(R<<10&4294967295|R>>>22),R=O+(S^(b|~k))+A[6]+2734768916&4294967295,O=b+(R<<15&4294967295|R>>>17),R=k+(b^(O|~S))+A[13]+1309151649&4294967295,k=O+(R<<21&4294967295|R>>>11),R=S+(O^(k|~b))+A[4]+4149444226&4294967295,S=k+(R<<6&4294967295|R>>>26),R=b+(k^(S|~O))+A[11]+3174756917&4294967295,b=S+(R<<10&4294967295|R>>>22),R=O+(S^(b|~k))+A[2]+718787259&4294967295,O=b+(R<<15&4294967295|R>>>17),R=k+(b^(O|~S))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+b&4294967295}s.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var k=S-this.blockSize,A=this.B,O=this.h,b=0;b<S;){if(O==0)for(;b<=k;)o(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<S;)if(A[O++]=x.charCodeAt(b++),O==this.blockSize){o(this,A),O=0;break}}else for(;b<S;)if(A[O++]=x[b++],O==this.blockSize){o(this,A),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var k=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=k&255,k/=256;for(this.u(x),x=Array(16),S=k=0;4>S;++S)for(var A=0;32>A;A+=8)x[k++]=this.g[S]>>>A&255;return x};function l(x,S){var k=f;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=S(x)}function h(x,S){this.h=S;for(var k=[],A=!0,O=x.length-1;0<=O;O--){var b=x[O]|0;A&&b==S||(k[O]=b,A=!1)}this.g=k}var f={};function g(x){return-128<=x&&128>x?l(x,function(S){return new h([S|0],0>S?-1:0)}):new h([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return V(y(-x));for(var S=[],k=1,A=0;x>=k;A++)S[A]=x/k|0,k*=4294967296;return new h(S,0)}function v(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return V(v(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=y(Math.pow(S,8)),A=E,O=0;O<x.length;O+=8){var b=Math.min(8,x.length-O),R=parseInt(x.substring(O,O+b),S);8>b?(b=y(Math.pow(S,b)),A=A.j(b).add(y(R))):(A=A.j(k),A=A.add(y(R)))}return A}var E=g(0),I=g(1),P=g(16777216);r=h.prototype,r.m=function(){if(z(this))return-V(this).m();for(var x=0,S=1,k=0;k<this.g.length;k++){var A=this.i(k);x+=(0<=A?A:4294967296+A)*S,S*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(L(this))return"0";if(z(this))return"-"+V(this).toString(x);for(var S=y(Math.pow(x,6)),k=this,A="";;){var O=Q(k,S).g;k=X(k,O.j(S));var b=((0<k.g.length?k.g[0]:k.h)>>>0).toString(x);if(k=O,L(k))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function L(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function z(x){return x.h==-1}r.l=function(x){return x=X(this,x),z(x)?-1:L(x)?0:1};function V(x){for(var S=x.g.length,k=[],A=0;A<S;A++)k[A]=~x.g[A];return new h(k,~x.h).add(I)}r.abs=function(){return z(this)?V(this):this},r.add=function(x){for(var S=Math.max(this.g.length,x.g.length),k=[],A=0,O=0;O<=S;O++){var b=A+(this.i(O)&65535)+(x.i(O)&65535),R=(b>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);A=R>>>16,b&=65535,R&=65535,k[O]=R<<16|b}return new h(k,k[k.length-1]&-2147483648?-1:0)};function X(x,S){return x.add(V(S))}r.j=function(x){if(L(this)||L(x))return E;if(z(this))return z(x)?V(this).j(V(x)):V(V(this).j(x));if(z(x))return V(this.j(V(x)));if(0>this.l(P)&&0>x.l(P))return y(this.m()*x.m());for(var S=this.g.length+x.g.length,k=[],A=0;A<2*S;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<x.g.length;O++){var b=this.i(A)>>>16,R=this.i(A)&65535,tt=x.i(O)>>>16,Nt=x.i(O)&65535;k[2*A+2*O]+=R*Nt,ee(k,2*A+2*O),k[2*A+2*O+1]+=b*Nt,ee(k,2*A+2*O+1),k[2*A+2*O+1]+=R*tt,ee(k,2*A+2*O+1),k[2*A+2*O+2]+=b*tt,ee(k,2*A+2*O+2)}for(A=0;A<S;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=S;A<2*S;A++)k[A]=0;return new h(k,0)};function ee(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function Z(x,S){this.g=x,this.h=S}function Q(x,S){if(L(S))throw Error("division by zero");if(L(x))return new Z(E,E);if(z(x))return S=Q(V(x),S),new Z(V(S.g),V(S.h));if(z(S))return S=Q(x,V(S)),new Z(V(S.g),S.h);if(30<x.g.length){if(z(x)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var k=I,A=S;0>=A.l(x);)k=Te(k),A=Te(A);var O=ue(k,1),b=ue(A,1);for(A=ue(A,2),k=ue(k,2);!L(A);){var R=b.add(A);0>=R.l(x)&&(O=O.add(k),b=R),A=ue(A,1),k=ue(k,1)}return S=X(x,O.j(S)),new Z(O,S)}for(O=E;0<=x.l(S);){for(k=Math.max(1,Math.floor(x.m()/S.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=y(k),R=b.j(S);z(R)||0<R.l(x);)k-=A,b=y(k),R=b.j(S);L(b)&&(b=I),O=O.add(b),x=X(x,R)}return new Z(O,x)}r.A=function(x){return Q(this,x).h},r.and=function(x){for(var S=Math.max(this.g.length,x.g.length),k=[],A=0;A<S;A++)k[A]=this.i(A)&x.i(A);return new h(k,this.h&x.h)},r.or=function(x){for(var S=Math.max(this.g.length,x.g.length),k=[],A=0;A<S;A++)k[A]=this.i(A)|x.i(A);return new h(k,this.h|x.h)},r.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),k=[],A=0;A<S;A++)k[A]=this.i(A)^x.i(A);return new h(k,this.h^x.h)};function Te(x){for(var S=x.g.length+1,k=[],A=0;A<S;A++)k[A]=x.i(A)<<1|x.i(A-1)>>>31;return new h(k,x.h)}function ue(x,S){var k=S>>5;S%=32;for(var A=x.g.length-k,O=[],b=0;b<A;b++)O[b]=0<S?x.i(b+k)>>>S|x.i(b+k+1)<<32-S:x.i(b+k);return new h(O,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Dy=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,ii=h}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vy,ma,Oy,pu,hd,by,Ly,My;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof su=="object"&&su];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var $=_++;return{value:p($,u[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function I(u,p,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,I.apply(null,arguments)}function P(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function L(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,$){for(var re=Array(arguments.length-2),je=2;je<arguments.length;je++)re[je-2]=arguments[je];return p.prototype[F].apply(T,re)}}function z(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function V(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const F=u.length||0,$=T.length||0;u.length=F+$;for(let re=0;re<$;re++)u[F+re]=T[re]}else u.push(T)}}class X{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ee(u){return/^[\s\xa0]*$/.test(u)}function Z(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var Te=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ue(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function x(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function S(u){const p={};for(const _ in u)p[_]=u[_];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let $=0;$<k.length;$++)_=k[$],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function O(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function b(u){f.setTimeout(()=>{throw u},0)}function R(){var u=me;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class tt{constructor(){this.h=this.g=null}add(p,_){const T=Nt.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Nt=new X(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ie=!1,me=new tt,oe=()=>{const u=f.Promise.resolve(void 0);Ue=()=>{u.then(M)}};var M=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){b(_)}var p=Nt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}ie=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u}();function Ce(u,p){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Te){e:{try{Q(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}L(Ce,fe);var xe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Be(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++Me,this.da=this.fa=!1}function yt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function tr(u){this.src=u,this.g={},this.h=0}tr.prototype.add=function(u,p,_,T,F){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var re=Rr(u,p,T,F);return-1<re?(p=u[re],_||(p.fa=!1)):(p=new Be(p,this.src,$,!!T,F),p.fa=_,u.push(p)),p};function ts(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),$;($=0<=F)&&Array.prototype.splice.call(T,F,1),$&&(yt(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Rr(u,p,_,T){for(var F=0;F<u.length;++F){var $=u[F];if(!$.da&&$.listener==p&&$.capture==!!_&&$.ha==T)return F}return-1}var yi="closure_lm_"+(1e6*Math.random()|0),ns={};function vo(u,p,_,T,F){if(Array.isArray(p)){for(var $=0;$<p.length;$++)vo(u,p[$],_,T,F);return null}return _=To(_),u&&u[Le]?u.K(p,_,y(T)?!!T.capture:!1,F):wo(u,p,_,!1,T,F)}function wo(u,p,_,T,F,$){if(!p)throw Error("Invalid event type");var re=y(F)?!!F.capture:!!F,je=is(u);if(je||(u[yi]=je=new tr(u)),_=je.add(p,_,T,re,$),_.proxy)return _;if(T=Ba(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)Se||(F=re),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(rr(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ba(){function u(_){return p.call(u.src,u.listener,_)}const p=Eo;return u}function rs(u,p,_,T,F){if(Array.isArray(p))for(var $=0;$<p.length;$++)rs(u,p[$],_,T,F);else T=y(T)?!!T.capture:!!T,_=To(_),u&&u[Le]?(u=u.i,p=String(p).toString(),p in u.g&&($=u.g[p],_=Rr($,_,T,F),-1<_&&(yt($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[p],u.h--)))):u&&(u=is(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Rr(p,_,T,F)),(_=-1<u?p[u]:null)&&nr(_))}function nr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Le])ts(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(rr(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=is(p))?(ts(_,u),_.h==0&&(_.src=null,p[yi]=null)):yt(u)}}}function rr(u){return u in ns?ns[u]:ns[u]="on"+u}function Eo(u,p){if(u.da)u=!0;else{p=new Ce(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&nr(u),u=_.call(T,p)}return u}function is(u){return u=u[yi],u instanceof tr?u:null}var ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function To(u){return typeof u=="function"?u:(u[ss]||(u[ss]=function(p){return u.handleEvent(p)}),u[ss])}function ut(){H.call(this),this.i=new tr(this),this.M=this,this.F=null}L(ut,H),ut.prototype[Le]=!0,ut.prototype.removeEventListener=function(u,p,_,T){rs(this,u,p,_,T)};function ct(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new fe(p,u);else if(p instanceof fe)p.target=p.target||u;else{var F=p;p=new fe(T,u),A(p,F)}if(F=!0,_)for(var $=_.length-1;0<=$;$--){var re=p.g=_[$];F=ir(re,T,!0,p)&&F}if(re=p.g=u,F=ir(re,T,!0,p)&&F,F=ir(re,T,!1,p)&&F,_)for($=0;$<_.length;$++)re=p.g=_[$],F=ir(re,T,!1,p)&&F}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)yt(_[T]);delete u.g[p],u.h--}}this.F=null},ut.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},ut.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function ir(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,$=0;$<p.length;++$){var re=p[$];if(re&&!re.da&&re.capture==_){var je=re.listener,ht=re.ha||re.src;re.fa&&ts(u.i,re),F=je.call(ht,T)!==!1&&F}}return F&&!T.defaultPrevented}function Io(u,p,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Pr(u){u.g=Io(()=>{u.g=null,u.i&&(u.i=!1,Pr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class _i extends H{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(u){H.call(this),this.h=u,this.g={}}L(vi,H);var So=[];function Co(u){ue(u.g,function(p,_){this.g.hasOwnProperty(_)&&nr(p)},u),u.g={}}vi.prototype.N=function(){vi.aa.N.call(this),Co(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=f.JSON.stringify,Ro=f.JSON.parse,Po=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function wi(){}wi.prototype.h=null;function os(u){return u.h||(u.h=u.i())}function as(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){fe.call(this,"d")}L(Ln,fe);function ls(){fe.call(this,"c")}L(ls,fe);var Mn={},Ao=null;function Ei(){return Ao=Ao||new ut}Mn.La="serverreachability";function xo(u){fe.call(this,Mn.La,u)}L(xo,fe);function sr(u){const p=Ei();ct(p,new xo(p))}Mn.STAT_EVENT="statevent";function No(u,p){fe.call(this,Mn.STAT_EVENT,u),this.stat=p}L(No,fe);function nt(u){const p=Ei();ct(p,new No(p,u))}Mn.Ma="timingevent";function us(u,p){fe.call(this,Mn.Ma,u),this.size=p}L(us,fe);function En(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ti(){this.g=!0}Ti.prototype.xa=function(){this.g=!1};function Ii(u,p,_,T,F,$){u.info(function(){if(u.g)if($)for(var re="",je=$.split("&"),ht=0;ht<je.length;ht++){var Ne=je[ht].split("=");if(1<Ne.length){var _t=Ne[0];Ne=Ne[1];var ot=_t.split("_");re=2<=ot.length&&ot[1]=="type"?re+(_t+"="+Ne+"&"):re+(_t+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+re})}function cs(u,p,_,T,F,$,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+$+" "+re})}function Tn(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+ac(u,_)+(T?" "+T:"")})}function Do(u,p){u.info(function(){return"TIMEOUT: "+p})}Ti.prototype.info=function(){};function ac(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<F.length;re++)F[re]=""}}}}return ko(_)}catch{return p}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$a={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},In;function Si(){}L(Si,wi),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},In=new Si;function Sn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wa}function Wa(){this.i=null,this.g="",this.h=!1}var Vo={},ds={};function fs(u,p,_){u.L=1,u.v=Vr(nn(p)),u.m=_,u.P=!0,Oo(u,null)}function Oo(u,p){u.F=Date.now(),$e(u),u.A=nn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),br(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Wa,u.g=ll(u.j,_?p:null,!u.m),0<u.O&&(u.M=new _i(I(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(So[0]=F.toString()),F=So);for(var $=0;$<F.length;$++){var re=vo(_,F[$],T||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),sr(),Ii(u.i,u.u,u.A,u.l,u.R,u.m)}Sn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Kt(u)==3?p.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=Kt(this.g);var p=this.g.Ba();const pn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Uo(this.g)))){this.J||ot!=4||p==7||(p==8||0>=pn?sr(3):sr(2)),Ci(this);var _=this.g.Z();this.X=_;t:if(Ka(this)){var T=Uo(this.g);u="";var F=T.length,$=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Ar(this);var re="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!($&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,cs(this.i,this.u,this.A,this.l,this.R,ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,ht=this.g;if((je=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(je)){var Ne=je;break t}}Ne=null}if(_=Ne)Tn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bo(this,_);else{this.o=!1,this.s=3,nt(12),dn(this),Ar(this);break e}}if(this.P){_=!0;let sn;for(;!this.J&&this.C<re.length;)if(sn=lc(this,re),sn==ds){ot==4&&(this.s=4,nt(14),_=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Vo){this.s=4,nt(15),Tn(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Tn(this.i,this.l,sn,null),bo(this,sn);if(Ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||re.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)Tn(this.i,this.l,re,"[Invalid Chunked Response]"),dn(this),Ar(this);else if(0<re.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Bo(_t),_t.M=!0,nt(11))}}else Tn(this.i,this.l,re,null),bo(this,re);ot==4&&dn(this),this.o&&!this.J&&(ot==4?Ss(this.j,this):(this.o=!1,$e(this)))}else vs(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),dn(this),Ar(this)}}}catch{}finally{}};function Ka(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lc(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?ds:(_=Number(p.substring(_,T)),isNaN(_)?Vo:(T+=1,T+_>p.length?ds:(p=p.slice(T,T+_),u.C=T+_,p)))}Sn.prototype.cancel=function(){this.J=!0,dn(this)};function $e(u){u.S=Date.now()+u.I,Ha(u,u.I)}function Ha(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=En(I(u.ba,u),p)}function Ci(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Do(this.i,this.A),this.L!=2&&(sr(),nt(17)),dn(this),this.s=2,Ar(this)):Ha(this,this.S-u)};function Ar(u){u.j.G==0||u.J||Ss(u.j,u)}function dn(u){Ci(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Co(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function bo(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Ut(_.h,u))){if(!u.K&&Ut(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Is(_),An(_);else break e;Ts(_),nt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=En(I(_.Za,_),6e3));if(1>=qa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else cr(_,11)}else if((u.K||_.g==u)&&Is(_),!ee(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Ne=F[p];if(_.T=Ne[0],Ne=Ne[1],_.G==2)if(Ne[0]=="c"){_.K=Ne[1],_.ia=Ne[2];const _t=Ne[3];_t!=null&&(_.la=_t,_.j.info("VER="+_.la));const ot=Ne[4];ot!=null&&(_.Aa=ot,_.j.info("SVER="+_.Aa));const pn=Ne[5];pn!=null&&typeof pn=="number"&&0<pn&&(T=1.5*pn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const sn=u.g;if(sn){const Di=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var $=T.h;$.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Lo($,$.h),$.h=null))}if(T.D){const ks=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;ks&&(T.ya=ks,ze(T.I,T.D,ks))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var re=u;if(T.qa=al(T,T.J?T.ia:null,T.W),re.K){Qa(T.h,re);var je=re,ht=T.L;ht&&(je.I=ht),je.B&&(Ci(je),$e(je)),T.g=re}else Ni(T);0<_.i.length&&zn(_)}else Ne[0]!="stop"&&Ne[0]!="close"||cr(_,7);else _.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?cr(_,7):Ct(_):Ne[0]!="noop"&&_.l&&_.l.ta(Ne),_.v=0)}}sr(4)}catch{}}var Ga=class{constructor(u,p){this.g=u,this.map=p}};function ki(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qa(u){return u.h?1:u.g?u.g.size:0}function Ut(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Lo(u,p){u.g?u.g.add(p):u.h=p}function Qa(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ki.prototype.cancel=function(){if(this.i=Xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xa(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return z(u.i)}function ps(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function ms(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function xr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ms(u),T=ps(u),F=T.length,$=0;$<F;$++)p.call(void 0,T[$],_&&_[$],u)}var Ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uc(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var $=u[_].substring(0,T);F=u[_].substring(T+1)}else $=u[_];p($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function or(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof or){this.h=u.h,Pi(this,u.j),this.o=u.o,this.g=u.g,Nr(this,u.s),this.l=u.l;var p=u.i,_=new Fn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Dr(this,_),this.m=u.m}else u&&(p=String(u).match(Ri))?(this.h=!1,Pi(this,p[1]||"",!0),this.o=Pe(p[2]||""),this.g=Pe(p[3]||"",!0),Nr(this,p[4]),this.l=Pe(p[5]||"",!0),Dr(this,p[6]||"",!0),this.m=Pe(p[7]||"")):(this.h=!1,this.i=new Fn(null,this.h))}or.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Or(p,gs,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Or(p,gs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Or(_,_.charAt(0)=="/"?Za:Ja,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Or(_,Mo)),u.join("")};function nn(u){return new or(u)}function Pi(u,p,_){u.j=_?Pe(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Nr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Dr(u,p,_){p instanceof Fn?(u.i=p,jn(u.i,u.h)):(_||(p=Or(p,el)),u.i=new Fn(p,u.h))}function ze(u,p,_){u.i.set(p,_)}function Vr(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pe(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Or(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ya),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ya(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gs=/[#\/\?@]/g,Ja=/[#\?:]/g,Za=/[#\?]/g,el=/[#\?@]/g,Mo=/#/g;function Fn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function St(u){u.g||(u.g=new Map,u.h=0,u.i&&uc(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Fn.prototype,r.add=function(u,p){St(this),this.i=null,u=fn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Cn(u,p){St(u),p=fn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function kn(u,p){return St(u),p=fn(u,p),u.g.has(p)}r.forEach=function(u,p){St(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){St(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let $=0;$<F.length;$++)_.push(p[T])}return _},r.V=function(u){St(this);let p=[];if(typeof u=="string")kn(this,u)&&(p=p.concat(this.g.get(fn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return St(this),this.i=null,u=fn(this,u),kn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function br(u,p,_){Cn(u,p),0<_.length&&(u.i=null,u.g.set(fn(u,p),z(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const $=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var F=$;re[T]!==""&&(F+="="+encodeURIComponent(String(re[T]))),u.push(F)}}return this.i=u.join("&")};function fn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function jn(u,p){p&&!u.j&&(St(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(Cn(this,T),br(this,F,_))},u)),u.j=p}function cc(u,p){const _=new Ti;if(f.Image){const T=new Image;T.onload=P(Wt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=P(Wt,_,"TestLoadImage: error",!1,p,T),T.onabort=P(Wt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=P(Wt,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function tl(u,p){const _=new Ti,T=new AbortController,F=setTimeout(()=>{T.abort(),Wt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(F),$.ok?Wt(_,"TestPingServer: ok",!0,p):Wt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Wt(_,"TestPingServer: error",!1,p)})}function Wt(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function hc(){this.g=new Po}function nl(u,p,_){const T=_||"";try{xr(u,function(F,$){let re=F;y(F)&&(re=ko(F)),p.push(T+$+"="+encodeURIComponent(re))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function ar(u){this.l=u.Ub||null,this.j=u.eb||!1}L(ar,wi),ar.prototype.g=function(){return new Ai(this.l,this.j)},ar.prototype.i=function(u){return function(){return u}}({});function Ai(u,p){ut.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ai,ut),r=Ai.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Rn(this):Pn(this),this.readyState==3&&rl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Rn(this))},r.Qa=function(u){this.g&&(this.response=u,Rn(this))},r.ga=function(){this.g&&Rn(this)};function Rn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lr(u){let p="";return ue(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Lr(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=lr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ze(u,p,_))}function qe(u){ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(qe,ut);var dc=/^https?$/i,Fo=["POST","PUT"];r=qe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():In.g(),this.v=this.o?os(this.o):os(In),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){xi(this,$);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())_.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Fo,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,re]of _)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch($){xi(this,$)}};function xi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ys(u),rn(u)}function ys(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ct(this,"complete"),ct(this,"abort"),rn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rn(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?jo(this):this.bb())},r.bb=function(){jo(this)};function jo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)Io(u.Ea,0,u);else if(ct(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=re===0){var F=String(u.D).match(Ri)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!dc.test(F?F.toLowerCase():"")}_=T}if(_)ct(u,"complete"),ct(u,"success");else{u.m=6;try{var $=2<Kt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",ys(u)}}finally{rn(u)}}}}function rn(u,p){if(u.g){_s(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ct(u,"ready");try{_.onreadystatechange=T}catch{}}}function _s(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ro(p)}};function Uo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vs(u){const p={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ee(u[T]))continue;var _=O(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=p[F]||[];p[F]=$,$.push(_)}x(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function zo(u){this.Aa=0,this.i=[],this.j=new Ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,u),this.cb=Un("retryDelaySeedMs",1e4,u),this.Wa=Un("forwardChannelMaxRetries",2,u),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ki(u&&u.concurrentRequestLimit),this.Da=new hc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=zo.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){nt(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=al(this,null,this.W),zn(this)};function Ct(u){if(ws(u),u.G==3){var p=u.U++,_=nn(u.I);if(ze(_,"SID",u.K),ze(_,"RID",p),ze(_,"TYPE","terminate"),ur(u,_),p=new Sn(u,u.j,p),p.L=2,p.v=Vr(nn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=ll(p.j,null),p.g.ea(p.v)),p.F=Date.now(),$e(p)}ol(u)}function An(u){u.g&&(Bo(u),u.g.cancel(),u.g=null)}function ws(u){An(u),u.u&&(f.clearTimeout(u.u),u.u=null),Is(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function zn(u){if(!tn(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ue||oe(),ie||(Ue(),ie=!0),me.add(p,u),u.B=0}}function fc(u,p){return qa(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=En(I(u.Ga,u,p),sl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Sn(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),A($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Mr(this,F,p),_=nn(this.I),ze(_,"RID",u),ze(_,"CVER",22),this.D&&ze(_,"X-HTTP-Session-Id",this.D),ur(this,_),$&&(this.O?p="headers="+encodeURIComponent(String(lr($)))+"&"+p:this.m&&Lr(_,this.m,$)),Lo(this.h,F),this.Ua&&ze(_,"TYPE","init"),this.P?(ze(_,"$req",p),ze(_,"SID","null"),F.T=!0,fs(F,_,null)):fs(F,_,p),this.G=2}}else this.G==3&&(u?Es(this,u):this.i.length==0||tn(this.h)||Es(this))};function Es(u,p){var _;p?_=p.l:_=u.U++;const T=nn(u.I);ze(T,"SID",u.K),ze(T,"RID",_),ze(T,"AID",u.T),ur(u,T),u.m&&u.o&&Lr(T,u.m,u.o),_=new Sn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Mr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Lo(u.h,_),fs(_,T,p)}function ur(u,p){u.H&&ue(u.H,function(_,T){ze(p,T,_)}),u.l&&xr({},function(_,T){ze(p,T,_)})}function Mr(u,p,_){_=Math.min(u.i.length,_);var T=u.l?I(u.l.Na,u.l,u):null;e:{var F=u.i;let $=-1;for(;;){const re=["count="+_];$==-1?0<_?($=F[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let je=!0;for(let ht=0;ht<_;ht++){let Ne=F[ht].g;const _t=F[ht].map;if(Ne-=$,0>Ne)$=Math.max(0,F[ht].g-100),je=!1;else try{nl(_t,re,"req"+Ne+"_")}catch{T&&T(_t)}}if(je){T=re.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Ni(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ue||oe(),ie||(Ue(),ie=!0),me.add(p,u),u.v=0}}function Ts(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=En(I(u.Fa,u),sl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,il(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=En(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),An(this),il(this))};function Bo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function il(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=nn(u.qa);ze(p,"RID","rpc"),ze(p,"SID",u.K),ze(p,"AID",u.T),ze(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(p,"TO",u.ja),ze(p,"TYPE","xmlhttp"),ur(u,p),u.m&&u.o&&Lr(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Vr(nn(p)),_.m=null,_.P=!0,Oo(_,u)}r.Za=function(){this.C!=null&&(this.C=null,An(this),Ts(this),nt(19))};function Is(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ss(u,p){var _=null;if(u.g==p){Is(u),Bo(u),u.g=null;var T=2}else if(Ut(u.h,p))_=p.D,Qa(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Ei(),ct(T,new us(T,_)),zn(u)}else Ni(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&fc(u,p)||T==2&&Ts(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:cr(u,5);break;case 4:cr(u,10);break;case 3:cr(u,6);break;default:cr(u,2)}}}function sl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function cr(u,p){if(u.j.info("Error code "+p),p==2){var _=I(u.fb,u),T=u.Xa;const F=!T;T=new or(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Pi(T,"https"),Vr(T),F?cc(T.toString(),_):tl(T.toString(),_)}else nt(2);u.G=0,u.l&&u.l.sa(p),ol(u),ws(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ol(u){if(u.G=0,u.ka=[],u.l){const p=Xa(u.h);(p.length!=0||u.i.length!=0)&&(V(u.ka,p),V(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function al(u,p,_){var T=_ instanceof or?nn(_):new or(_);if(T.g!="")p&&(T.g=p+"."+T.g),Nr(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var $=new or(null);T&&Pi($,T),p&&($.g=p),F&&Nr($,F),_&&($.l=_),T=$}return _=u.D,p=u.ya,_&&p&&ze(T,_,p),ze(T,"VER",u.la),ur(u,T),T}function ll(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new qe(new ar({eb:_})):new qe(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $o(){}r=$o.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Cs(){}Cs.prototype.g=function(u,p){return new zt(u,p)};function zt(u,p){ut.call(this),this.g=new zo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ee(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ee(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Bn(this)}L(zt,ut),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Ct(this.g)},zt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ko(u),u=_);p.i.push(new Ga(p.Ya++,u)),p.G==3&&zn(p)},zt.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,zt.aa.N.call(this)};function ul(u){Ln.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}L(ul,Ln);function cl(){ls.call(this),this.status=1}L(cl,ls);function Bn(u){this.g=u}L(Bn,$o),Bn.prototype.ua=function(){ct(this.g,"a")},Bn.prototype.ta=function(u){ct(this.g,new ul(u))},Bn.prototype.sa=function(u){ct(this.g,new cl)},Bn.prototype.ra=function(){ct(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,My=function(){return new Cs},Ly=function(){return Ei()},by=Mn,hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,pu=hs,$a.COMPLETE="complete",Oy=$a,as.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ma=as,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,Vy=qe}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});const og="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new ky("@firebase/firestore");function Xs(){return Yi.logLevel}function ae(r,...e){if(Yi.logLevel<=Ve.DEBUG){const t=e.map(jd);Yi.debug(`Firestore (${mo}): ${r}`,...t)}}function Sr(r,...e){if(Yi.logLevel<=Ve.ERROR){const t=e.map(jd);Yi.error(`Firestore (${mo}): ${r}`,...t)}}function no(r,...e){if(Yi.logLevel<=Ve.WARN){const t=e.map(jd);Yi.warn(`Firestore (${mo}): ${r}`,...t)}}function jd(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+r;throw Sr(e),new Error(e)}function Fe(r,e){r||we()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends po{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class OT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bT{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new si;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new si,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new si)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string"),new Fy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Ft(e)}}class LT{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class MT{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new LT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Fe(this.o===void 0);const s=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string"),this.R=t.token,new FT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=UT(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function Ae(r,e){return r<e?-1:r>e?1:0}function ro(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new mt(0,0))}static max(){return new Ee(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(),s===void 0?s=e.length-t:s>e.length-t&&we(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Gn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gn?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Gn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=Gn.isNumericId(e),o=Gn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Gn.extractNumericId(e).compare(Gn.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ii.fromString(e.substring(4,e.length-2))}}class et extends Gn{construct(e,t,s){return new et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new et(t)}static emptyPath(){return new et([])}}const zT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Gn{construct(e,t,s){return new At(e,t,s)}static isValidIdentifier(e){return zT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new pe(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new pe(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new pe(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(et.fromString(e))}static fromName(e){return new _e(et.fromString(e).popFirst(5))}static empty(){return new _e(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new et(e.slice()))}}function BT(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new ai(o,_e.empty(),e)}function $T(r){return new ai(r.readTime,r.key,-1)}class ai{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ai(Ee.min(),_e.empty(),-1)}static max(){return new ai(Ee.max(),_e.empty(),-1)}}function WT(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Ae(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==KT)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,s)=>{t(e)})}static reject(e){return new K((t,s)=>{s(e)})}static waitFor(e){return new K((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},g=>s(g))}),h=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next(o=>o?K.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new K((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next(v=>{h[y]=v,++f,f===l&&s(h)},v=>o(v))}})}static doWhile(e,t){return new K((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function GT(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bu.oe=-1;function $u(r){return r==null}function Pu(r){return r===0&&1/r==-1/0}function qT(r){return typeof r=="number"&&Number.isInteger(r)&&!Pu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ag(e)),e=XT(r.get(t),e);return ag(e)}function XT(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function ag(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function pi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Uy(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Pt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ug(this.data.getIterator())}getIteratorFrom(e){return new ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class ug{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new cn([])}unionWith(e){let t=new gt(At.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new zy("Invalid base64 string: "+l):l}}(e);return new xt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const YT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(r){if(Fe(!!r),typeof r=="string"){let e=0;const t=YT.exec(r);if(Fe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(r.seconds),nanos:it(r.nanos)}}function it(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ui(r){return typeof r=="string"?xt.fromBase64String(r):xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Wu(r){const e=r.mapValue.fields.__previous_value__;return Ud(e)?Wu(e):e}function xa(r){const e=li(r.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,s,o,l,h,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y}}class Na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ci(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ud(r)?4:e1(r)?9007199254740991:ZT(r)?10:11:we()}function Zn(r,e){if(r===e)return!0;const t=ci(r);if(t!==ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xa(r).isEqual(xa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=li(o.timestampValue),f=li(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return ui(o.bytesValue).isEqual(ui(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return it(o.geoPointValue.latitude)===it(l.geoPointValue.latitude)&&it(o.geoPointValue.longitude)===it(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return it(o.integerValue)===it(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=it(o.doubleValue),f=it(l.doubleValue);return h===f?Pu(h)===Pu(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return ro(r.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(lg(h)!==lg(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Zn(h[g],f[g])))return!1;return!0}(r,e);default:return we()}}function Da(r,e){return(r.values||[]).find(t=>Zn(t,e))!==void 0}function io(r,e){if(r===e)return 0;const t=ci(r),s=ci(e);if(t!==s)return Ae(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=it(l.integerValue||l.doubleValue),g=it(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(r,e);case 3:return cg(r.timestampValue,e.timestampValue);case 4:return cg(xa(r),xa(e));case 5:return Ae(r.stringValue,e.stringValue);case 6:return function(l,h){const f=ui(l),g=ui(h);return f.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Ae(f[y],g[y]);if(v!==0)return v}return Ae(f.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=Ae(it(l.latitude),it(h.latitude));return f!==0?f:Ae(it(l.longitude),it(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return hg(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,g,y,v;const E=l.fields||{},I=h.fields||{},P=(f=E.value)===null||f===void 0?void 0:f.arrayValue,L=(g=I.value)===null||g===void 0?void 0:g.arrayValue,z=Ae(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:hg(P,L)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===au.mapValue&&h===au.mapValue)return 0;if(l===au.mapValue)return 1;if(h===au.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const I=Ae(g[E],v[E]);if(I!==0)return I;const P=io(f[g[E]],y[v[E]]);if(P!==0)return P}return Ae(g.length,v.length)}(r.mapValue,e.mapValue);default:throw we()}}function cg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ae(r,e);const t=li(r),s=li(e),o=Ae(t.seconds,s.seconds);return o!==0?o:Ae(t.nanos,s.nanos)}function hg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=io(t[o],s[o]);if(l)return l}return Ae(t.length,s.length)}function so(r){return dd(r)}function dd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=li(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ui(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return _e.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=dd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${dd(t.fields[h])}`;return o+"}"}(r.mapValue):we()}function mu(r){switch(ci(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wu(r);return e?16+mu(e):16;case 5:return 2*r.stringValue.length;case 6:return ui(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+mu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return pi(s.fields,(l,h)=>{o+=l.length+mu(h)}),o}(r.mapValue);default:throw we()}}function fd(r){return!!r&&"integerValue"in r}function zd(r){return!!r&&"arrayValue"in r}function dg(r){return!!r&&"nullValue"in r}function fg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gu(r){return!!r&&"mapValue"in r}function ZT(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function va(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return pi(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=va(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=va(r.arrayValue.values[t]);return e}return Object.assign({},r)}function e1(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(t)}setAll(e){let t=At.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=va(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());gu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];gu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){pi(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new Zt(va(this.value))}}function By(r){const e=[];return pi(r.fields,(t,s)=>{const o=new At([t]);if(gu(s)){const l=By(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new jt(e,0,Ee.min(),Ee.min(),Ee.min(),Zt.empty(),0)}static newFoundDocument(e,t,s,o){return new jt(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new jt(e,2,t,Ee.min(),Ee.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ee.min(),Ee.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.position=e,this.inclusive=t}}function pg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(h.referenceValue),t.key):s=io(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function mg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Zn(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function t1(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{}class pt extends $y{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new r1(e,t,s):t==="array-contains"?new o1(e,s):t==="in"?new a1(e,s):t==="not-in"?new l1(e,s):t==="array-contains-any"?new u1(e,s):new pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new i1(e,s):new s1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(io(t,this.value)):t!==null&&ci(this.value)===ci(t)&&this.matchesComparison(io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class er extends $y{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new er(e,t)}matches(e){return Wy(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wy(r){return r.op==="and"}function Ky(r){return n1(r)&&Wy(r)}function n1(r){for(const e of r.filters)if(e instanceof er)return!1;return!0}function pd(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+so(r.value);if(Ky(r))return r.filters.map(e=>pd(e)).join(",");{const e=r.filters.map(t=>pd(t)).join(",");return`${r.op}(${e})`}}function Hy(r,e){return r instanceof pt?function(s,o){return o instanceof pt&&s.op===o.op&&s.field.isEqual(o.field)&&Zn(s.value,o.value)}(r,e):r instanceof er?function(s,o){return o instanceof er&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&Hy(h,o.filters[f]),!0):!1}(r,e):void we()}function Gy(r){return r instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${so(t.value)}`}(r):r instanceof er?function(t){return t.op.toString()+" {"+t.getFilters().map(Gy).join(" ,")+"}"}(r):"Filter"}class r1 extends pt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class i1 extends pt{constructor(e,t){super(e,"in",t),this.keys=qy("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class s1 extends pt{constructor(e,t){super(e,"not-in",t),this.keys=qy("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qy(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>_e.fromName(s.referenceValue))}class o1 extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zd(t)&&Da(t.arrayValue,this.value)}}class a1 extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Da(this.value.arrayValue,t)}}class l1 extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Da(this.value.arrayValue,t)}}class u1 extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Da(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function gg(r,e=null,t=[],s=[],o=null,l=null,h=null){return new c1(r,e,t,s,o,l,h)}function Bd(r){const e=Ie(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>pd(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),$u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>so(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>so(s)).join(",")),e.ue=t}return e.ue}function $d(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!t1(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hy(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!mg(r.startAt,e.startAt)&&mg(r.endAt,e.endAt)}function md(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function h1(r,e,t,s,o,l,h,f){return new Ku(r,e,t,s,o,l,h,f)}function Hu(r){return new Ku(r)}function yg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function d1(r){return r.collectionGroup!==null}function wa(r){const e=Ie(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new gt(At.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new xu(l,s))}),t.has(At.keyField().canonicalString())||e.ce.push(new xu(At.keyField(),s))}return e.ce}function Qn(r){const e=Ie(r);return e.le||(e.le=f1(e,wa(r))),e.le}function f1(r,e){if(r.limitType==="F")return gg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new xu(o.field,l)});const t=r.endAt?new Au(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Au(r.startAt.position,r.startAt.inclusive):null;return gg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function gd(r,e,t){return new Ku(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Gu(r,e){return $d(Qn(r),Qn(e))&&r.limitType===e.limitType}function Qy(r){return`${Bd(Qn(r))}|lt:${r.limitType}`}function Ys(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Gy(o)).join(", ")}]`),$u(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>so(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>so(o)).join(",")),`Target(${s})`}(Qn(r))}; limitType=${r.limitType})`}function qu(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of wa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,g){const y=pg(h,f,g);return h.inclusive?y<=0:y<0}(s.startAt,wa(s),o)||s.endAt&&!function(h,f,g){const y=pg(h,f,g);return h.inclusive?y>=0:y>0}(s.endAt,wa(s),o))}(r,e)}function p1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Xy(r){return(e,t)=>{let s=!1;for(const o of wa(r)){const l=m1(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function m1(r,e,t){const s=r.field.isKeyField()?_e.comparator(e.key,t.key):function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?io(g,y):we()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return Uy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=new Je(_e.comparator);function Cr(){return g1}const Yy=new Je(_e.comparator);function ga(...r){let e=Yy;for(const t of r)e=e.insert(t.key,t);return e}function Jy(r){let e=Yy;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xi(){return Ea()}function Zy(){return Ea()}function Ea(){return new Ji(r=>r.toString(),(r,e)=>r.isEqual(e))}const y1=new Je(_e.comparator),_1=new gt(_e.comparator);function Re(...r){let e=_1;for(const t of r)e=e.add(t);return e}const v1=new gt(Ae);function w1(){return v1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function e_(r){return{integerValue:""+r}}function E1(r,e){return qT(e)?e_(e):Wd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this._=void 0}}function T1(r,e,t){return r instanceof Nu?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ud(l)&&(l=Wu(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof oo?n_(r,e):r instanceof Va?r_(r,e):function(o,l){const h=t_(o,l),f=_g(h)+_g(o.Pe);return fd(h)&&fd(o.Pe)?e_(f):Wd(o.serializer,f)}(r,e)}function I1(r,e,t){return r instanceof oo?n_(r,e):r instanceof Va?r_(r,e):t}function t_(r,e){return r instanceof Du?function(s){return fd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Nu extends Qu{}class oo extends Qu{constructor(e){super(),this.elements=e}}function n_(r,e){const t=i_(e);for(const s of r.elements)t.some(o=>Zn(o,s))||t.push(s);return{arrayValue:{values:t}}}class Va extends Qu{constructor(e){super(),this.elements=e}}function r_(r,e){let t=i_(e);for(const s of r.elements)t=t.filter(o=>!Zn(o,s));return{arrayValue:{values:t}}}class Du extends Qu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _g(r){return it(r.integerValue||r.doubleValue)}function i_(r){return zd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t){this.field=e,this.transform=t}}function C1(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof oo&&o instanceof oo||s instanceof Va&&o instanceof Va?ro(s.elements,o.elements,Zn):s instanceof Du&&o instanceof Du?Zn(s.Pe,o.Pe):s instanceof Nu&&o instanceof Nu}(r.transform,e.transform)}class k1{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xu{}function s_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new a_(r.key,Xn.none()):new La(r.key,r.data,Xn.none());{const t=r.data,s=Zt.empty();let o=new gt(At.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new mi(r.key,s,new cn(o.toArray()),Xn.none())}}function R1(r,e,t){r instanceof La?function(o,l,h){const f=o.value.clone(),g=wg(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof mi?function(o,l,h){if(!yu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=wg(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(o_(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ta(r,e,t,s){return r instanceof La?function(l,h,f,g){if(!yu(l.precondition,h))return f;const y=l.value.clone(),v=Eg(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof mi?function(l,h,f,g){if(!yu(l.precondition,h))return f;const y=Eg(l.fieldTransforms,g,h),v=h.data;return v.setAll(o_(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(l,h,f){return yu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function P1(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=t_(s.transform,o||null);l!=null&&(t===null&&(t=Zt.empty()),t.set(s.field,l))}return t||null}function vg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ro(s,o,(l,h)=>C1(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class La extends Xu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mi extends Xu{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function o_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function wg(r,e,t){const s=new Map;Fe(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,I1(h,f,t[o]))}return s}function Eg(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,T1(l,h,e))}return s}class a_ extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A1 extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&R1(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ta(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ta(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Zy();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=s_(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(t,s)=>vg(t,s))&&ro(this.baseMutations,e.baseMutations,(t,s)=>vg(t,s))}}class Kd{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Fe(e.mutations.length===s.length);let o=function(){return y1}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Kd(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,De;function V1(r){switch(r){default:return we();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function l_(r){if(r===void 0)return Sr("GRPC error has no .code"),Y.UNKNOWN;switch(r){case lt.OK:return Y.OK;case lt.CANCELLED:return Y.CANCELLED;case lt.UNKNOWN:return Y.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Y.INTERNAL;case lt.UNAVAILABLE:return Y.UNAVAILABLE;case lt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case lt.NOT_FOUND:return Y.NOT_FOUND;case lt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case lt.ABORTED:return Y.ABORTED;case lt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case lt.DATA_LOSS:return Y.DATA_LOSS;default:return we()}}(De=lt||(lt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new ii([4294967295,4294967295],0);function Tg(r){const e=O1().encode(r),t=new Dy;return t.update(e),new Uint8Array(t.digest())}function Ig(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ii([t,s],0),new ii([o,l],0)]}class Hd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ya(`Invalid padding: ${t}`);if(s<0)throw new ya(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ya(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ya(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ii.fromNumber(this.Te)}de(e,t,s){let o=e.add(t.multiply(ii.fromNumber(s)));return o.compare(b1)===1&&(o=new ii([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Tg(e),[s,o]=Ig(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hd(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.Te===0)return;const t=Tg(e),[s,o]=Ig(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ma.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Yu(Ee.min(),o,new Je(Ae),Cr(),Re())}}class Ma{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ma(s,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class u_{constructor(e,t){this.targetId=e,this.me=t}}class c_{constructor(e,t,s=xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Sg{constructor(){this.fe=0,this.ge=Cg(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),t=Re(),s=Re();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we()}}),new Ma(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=Cg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L1{constructor(e){this.Be=e,this.Le=new Map,this.ke=Cr(),this.qe=lu(),this.Qe=lu(),this.Ke=new Je(Ae)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:we()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(md(l))if(s===0){const h=new _e(l.path);this.We(t,h,jt.newNoDocument(h,Ee.min()))}else Fe(s===1);else{const h=this.Ze(t);if(h!==s){const f=this.Xe(e),g=f?this.et(f,e,h):1;if(g!==0){this.He(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=ui(s).toUint8Array()}catch(g){if(g instanceof zy)return no("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Hd(h,o,l)}catch(g){return no(g instanceof ya?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Te===0?null:f}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Be.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Be.nt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const f=this.Ye(h);if(f){if(l.current&&md(f.target)){const g=new _e(f.target.path);this.st(g).has(h)||this.ot(h,g)||this.We(h,g,jt.newNoDocument(g,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=Re();this.Qe.forEach((l,h)=>{let f=!0;h.forEachWhile(g=>{const y=this.Ye(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Yu(e,t,this.Ke,this.ke,s);return this.ke=Cr(),this.qe=lu(),this.Qe=lu(),this.Ke=new Je(Ae),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Sg,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new gt(Ae),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(Ae),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Sg),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function lu(){return new Je(_e.comparator)}function Cg(){return new Je(_e.comparator)}const M1={asc:"ASCENDING",desc:"DESCENDING"},F1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j1={and:"AND",or:"OR"};class U1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yd(r,e){return r.useProto3Json||$u(e)?e:{value:e}}function Vu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function z1(r,e){return Vu(r,e.toTimestamp())}function Yn(r){return Fe(!!r),Ee.fromTimestamp(function(t){const s=li(t);return new mt(s.seconds,s.nanos)}(r))}function Gd(r,e){return _d(r,e).canonicalString()}function _d(r,e){const t=function(o){return new et(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function d_(r){const e=et.fromString(r);return Fe(y_(e)),e}function vd(r,e){return Gd(r.databaseId,e.path)}function qh(r,e){const t=d_(e);if(t.get(1)!==r.databaseId.projectId)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new pe(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(p_(t))}function f_(r,e){return Gd(r.databaseId,e)}function B1(r){const e=d_(r);return e.length===4?et.emptyPath():p_(e)}function wd(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function p_(r){return Fe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function kg(r,e,t){return{name:vd(r,e),fields:t.value.mapValue.fields}}function $1(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(Fe(v===void 0||typeof v=="string"),xt.fromBase64String(v||"")):(Fe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),xt.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(y){const v=y.code===void 0?Y.UNKNOWN:l_(y.code);return new pe(v,y.message||"")}(h);t=new c_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=qh(r,s.document.name),l=Yn(s.document.updateTime),h=s.document.createTime?Yn(s.document.createTime):Ee.min(),f=new Zt({mapValue:{fields:s.document.fields}}),g=jt.newFoundDocument(o,l,h,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new _u(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=qh(r,s.document),l=s.readTime?Yn(s.readTime):Ee.min(),h=jt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new _u([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=qh(r,s.document),l=s.removedTargetIds||[];t=new _u([],l,o,null)}else{if(!("filter"in e))return we();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new D1(o,l),f=s.targetId;t=new u_(f,h)}}return t}function W1(r,e){let t;if(e instanceof La)t={update:kg(r,e.key,e.value)};else if(e instanceof a_)t={delete:vd(r,e.key)};else if(e instanceof mi)t={update:kg(r,e.key,e.data),updateMask:Z1(e.fieldMask)};else{if(!(e instanceof A1))return we();t={verify:vd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof Nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof oo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Va)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Du)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw we()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:z1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we()}(r,e.precondition)),t}function K1(r,e){return r&&r.length>0?(Fe(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?Yn(o.updateTime):Yn(l);return h.isEqual(Ee.min())&&(h=Yn(l)),new k1(h,o.transformResults||[])}(t,e))):[]}function H1(r,e){return{documents:[f_(r,e.path)]}}function G1(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=f_(r,o);const l=function(y){if(y.length!==0)return g_(er.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(v=>function(I){return{field:Js(I.field),direction:X1(I.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=yd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function q1(r){let e=B1(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Fe(s===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const I=m_(E);return I instanceof er&&Ky(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(E){return E.map(I=>function(L){return new xu(Zs(L.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(I))}(t.orderBy));let f=null;t.limit&&(f=function(E){let I;return I=typeof E=="object"?E.value:E,$u(I)?null:I}(t.limit));let g=null;t.startAt&&(g=function(E){const I=!!E.before,P=E.values||[];return new Au(P,I)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const I=!E.before,P=E.values||[];return new Au(P,I)}(t.endAt)),h1(e,o,h,l,f,"F",g,y)}function Q1(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Zs(t.unaryFilter.field);return pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Zs(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Zs(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Zs(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(r):r.fieldFilter!==void 0?function(t){return pt.create(Zs(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return er.create(t.compositeFilter.filters.map(s=>m_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we()}}(t.compositeFilter.op))}(r):we()}function X1(r){return M1[r]}function Y1(r){return F1[r]}function J1(r){return j1[r]}function Js(r){return{fieldPath:r.canonicalString()}}function Zs(r){return At.fromServerFormat(r.fieldPath)}function g_(r){return r instanceof pt?function(t){if(t.op==="=="){if(fg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(dg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(dg(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:Y1(t.op),value:t.value}}}(r):r instanceof er?function(t){const s=t.getFilters().map(o=>g_(o));return s.length===1?s[0]:{compositeFilter:{op:J1(t.op),filters:s}}}(r):we()}function Z1(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,s,o,l=Ee.min(),h=Ee.min(),f=xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.ht=e}}function tI(r){const e=q1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.ln=new rI}addToCollectionParentIndex(e,t){return this.ln.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ai.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class rI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gt(et.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ao(0)}static Qn(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg([r,e],[t,s]){const o=Ae(r,t);return o===0?Ae(e,s):o}class iI{constructor(e){this.Gn=e,this.buffer=new gt(Pg),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Pg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yo(t)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await go(t)}await this.Yn(3e5)})}}class oI{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Bu.oe);const s=new iI(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(Rg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rg):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(s=E,f=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(y=Date.now(),Xs()<=Ve.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function aI(r,e){return new oI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.changes=new Ji(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Ta(s.mutation,o,cn.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Re()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Re()){const o=Xi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=ga();return l.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Xi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Re()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=Cr();const h=Ea(),f=function(){return Ea()}();return t.forEach((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof mi)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Ta(v.mutation,y,v.mutation.getFieldMask(),mt.now())):h.set(y.key,cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((y,v)=>h.set(y,v)),t.forEach((y,v)=>{var E;return f.set(y,new uI(v,(E=h.get(y))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const s=Ea();let o=new Je((h,f)=>h-f),l=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||cn.empty();v=f.applyToLocalView(y,v),s.set(g,v);const E=(o.get(f.batchId)||Re()).add(g);o=o.insert(f.batchId,E)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=Zy();v.forEach(I=>{if(!l.has(I)){const P=s_(t.get(I),s.get(I));P!==null&&E.set(I,P),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(Xi());let f=-1,g=l;return h.next(y=>K.forEach(y,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{g=g.insert(v,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,g,y,Re())).next(v=>({batchId:f,changes:Jy(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(s=>{let o=ga();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=ga();return this.indexManager.getCollectionParents(e,l).next(f=>K.forEach(f,g=>{const y=function(E,I){return new Ku(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(v=>{v.forEach((E,I)=>{h=h.insert(E,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,jt.newInvalidDocument(v)))});let f=ga();return h.forEach((g,y)=>{const v=l.get(g);v!==void 0&&Ta(v.mutation,y,cn.empty(),mt.now()),qu(t,y)&&(f=f.insert(g,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return K.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Yn(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:tI(o.bundledQuery),readTime:Yn(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.overlays=new Je(_e.comparator),this.dr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xi();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.dr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Xi(),l=t.length+1,h=new _e(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Je((y,v)=>y-v);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Xi(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Xi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=o)););return K.resolve(f)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(s.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new N1(t,s));let l=this.dr.get(t);l===void 0&&(l=Re(),this.dr.set(t,l)),this.dr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.Er=new gt(It.Ar),this.Rr=new gt(It.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const s=new It(e,t);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new It(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new _e(new et([])),s=new It(t,e),o=new It(t,e+1),l=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new _e(new et([])),s=new It(t,e),o=new It(t,e+1);let l=Re();return this.Rr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new It(e,0),s=this.Er.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return _e.comparator(e.key,t.key)||Ae(e.br,t.br)}static Vr(e,t){return Ae(e.br,t.br)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new gt(It.Ar)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new x1(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.vr=this.vr.add(new It(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],h=>{const f=this.Cr(h.br);l.push(f)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Ae);return t.forEach(o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],f=>{s=s.add(f.br)})}),K.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const h=new It(new _e(l),0);let f=new gt(Ae);return this.vr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.br)),!0)},h),K.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Fe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return K.forEach(t.mutations,o=>{const l=new It(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,t){const s=new It(t,0),o=this.vr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.Nr=e,this.docs=function(){return new Je(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let s=Cr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():jt.newInvalidDocument(o))}),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Cr();const h=t.path,f=new _e(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||WT($T(v),s)<=0||(o.has(v.key)||qu(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we()}Br(e,t){return K.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new gI(this)}getSize(e){return K.resolve(this.size)}}class gI extends lI{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),K.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.persistence=e,this.Lr=new Ji(t=>Bd(t),$d),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.kr=0,this.qr=new qd,this.targetCount=0,this.Qr=ao.qn()}forEachTarget(e,t){return this.Lr.forEach((s,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),K.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new ao(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Un(t),K.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Lr.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.Lr.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Bu(0),this.Ur=!1,this.Ur=!0,this.Wr=new fI,this.referenceDelegate=e(this),this.Gr=new yI(this),this.indexManager=new nI,this.remoteDocumentCache=function(o){return new mI(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new eI(t),this.jr=new hI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new pI(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){ae("MemoryPersistence","Starting transaction:",e);const o=new _I(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return K.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class _I extends HT{constructor(e){super(),this.currentSequenceNumber=e}}class Qd{constructor(e){this.persistence=e,this.Zr=new qd,this.Xr=null}static ei(e){return new Qd(e)}get ti(){if(this.Xr)return this.Xr;throw we()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),K.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.ti,s=>{const o=_e.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ee.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return K.or([()=>K.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Ou{constructor(e,t){this.persistence=e,this.ri=new Ji(s=>QT(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=aI(this,t)}static ei(e,t){return new Ou(e,t)}Hr(){}Jr(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return K.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(f=>{f||(s++,l.removeEntry(h,Ee.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),K.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mu(e.data.value)),t}ir(e,t,s){return K.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=Re(),o=Re();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Xd(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return y0()?8:GT(m0())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new vI;return this.ts(e,t,h).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,h,f.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(Xs()<=Ve.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ys(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),K.resolve()):(Xs()<=Ve.DEBUG&&ae("QueryEngine","Query:",Ys(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(Xs()<=Ve.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ys(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):K.resolve())}Xi(e,t){if(yg(t))return K.resolve(null);let s=Qn(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=gd(t,null,"F"),s=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Re(...l);return this.Zi.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.rs(t,f);return this.ss(t,y,h,g.readTime)?this.Xi(e,gd(t,null,"F")):this.os(e,y,t,g)}))})))}es(e,t,s,o){return yg(t)||o.isEqual(Ee.min())?K.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const h=this.rs(t,l);return this.ss(t,h,s,o)?K.resolve(null):(Xs()<=Ve.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ys(t)),this.os(e,h,t,BT(o,-1)).next(f=>f))})}rs(e,t){let s=new gt(Xy(e));return t.forEach((o,l)=>{qu(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return Xs()<=Ve.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ys(t)),this.Zi.getDocumentsMatchingQuery(e,t,ai.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new Je(Ae),this.cs=new Ji(l=>Bd(l),$d),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function TI(r,e,t,s){return new EI(r,e,t,s)}async function v_(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let g=Re();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:f}))})})}function II(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,g,y,v){const E=y.batch,I=E.keys();let P=K.resolve();return I.forEach(L=>{P=P.next(()=>v.getEntry(g,L)).next(z=>{const V=y.docVersions.get(L);Fe(V!==null),z.version.compareTo(V)<0&&(E.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),v.addEntry(z)))})}),P.next(()=>f.mutationQueue.removeMutationBatch(g,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let g=Re();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function w_(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function SI(r,e){const t=Ie(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((v,E)=>{const I=o.get(E);if(!I)return;f.push(t.Gr.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.Gr.addMatchingKeys(l,v.addedDocuments,E)));let P=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(xt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,s)),o=o.insert(E,P),function(z,V,X){return z.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0}(I,P,v)&&f.push(t.Gr.updateTargetData(l,P))});let g=Cr(),y=Re();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(CI(l,h,e.documentUpdates).next(v=>{g=v.Is,y=v.ds})),!s.isEqual(Ee.min())){const v=t.Gr.getLastRemoteSnapshotVersion(l).next(E=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(v)}return K.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,y)).next(()=>g)}).then(l=>(t.us=o,l))}function CI(r,e,t){let s=Re(),o=Re();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Cr();return t.forEach((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ae("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)}),{Is:h,ds:o}})}function kI(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function RI(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,K.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new ei(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function Ed(r,e,t){const s=Ie(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!yo(h))throw h;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function Ag(r,e,t){const s=Ie(r);let o=Ee.min(),l=Re();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,v){const E=Ie(g),I=E.cs.get(v);return I!==void 0?K.resolve(E.us.get(I)):E.Gr.getTargetData(y,v)}(s,h,Qn(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,f.targetId).next(g=>{l=g})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?l:Re())).next(f=>(PI(s,p1(e),f),{documents:f,Es:l})))}function PI(r,e,t){let s=r.ls.get(e)||Ee.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class xg{constructor(){this.activeTargetIds=w1()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AI{constructor(){this._o=new xg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new xg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=null;function Qh(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class VI extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,h){const f=Qh(),g=this.No(t,s.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,h),this.Lo(t,g,y,o).then(v=>(ae("RestConnection",`Received RPC '${t}' ${f}: `,v),v),v=>{throw no("RestConnection",`RPC '${t}' ${f} failed with error: `,v,"url: ",g,"request:",o),v})}ko(t,s,o,l,h,f){return this.Oo(t,s,o,l,h)}Bo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,s){const o=NI[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,s,o){const l=Qh();return new Promise((h,f)=>{const g=new Vy;g.setWithCredentials(!0),g.listenOnce(Oy.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case pu.NO_ERROR:const v=g.getResponseJson();ae(Mt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case pu.TIMEOUT:ae(Mt,`RPC '${e}' ${l} timed out`),f(new pe(Y.DEADLINE_EXCEEDED,"Request time out"));break;case pu.HTTP_ERROR:const E=g.getStatus();if(ae(Mt,`RPC '${e}' ${l} failed with status:`,E,"response text:",g.getResponseText()),E>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const L=function(V){const X=V.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(X)>=0?X:Y.UNKNOWN}(P.status);f(new pe(L,P.message))}else f(new pe(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new pe(Y.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ae(Mt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ae(Mt,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",y,s,15)})}qo(e,t,s){const o=Qh(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=My(),f=Ly(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Bo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ae(Mt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);let I=!1,P=!1;const L=new DI({Eo:V=>{P?ae(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(I||(ae(Mt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ae(Mt,`RPC '${e}' stream ${o} sending:`,V),E.send(V))},Ao:()=>E.close()}),z=(V,X,ee)=>{V.listen(X,Z=>{try{ee(Z)}catch(Q){setTimeout(()=>{throw Q},0)}})};return z(E,ma.EventType.OPEN,()=>{P||(ae(Mt,`RPC '${e}' stream ${o} transport opened.`),L.So())}),z(E,ma.EventType.CLOSE,()=>{P||(P=!0,ae(Mt,`RPC '${e}' stream ${o} transport closed`),L.Do())}),z(E,ma.EventType.ERROR,V=>{P||(P=!0,no(Mt,`RPC '${e}' stream ${o} transport errored:`,V),L.Do(new pe(Y.UNAVAILABLE,"The operation could not be completed")))}),z(E,ma.EventType.MESSAGE,V=>{var X;if(!P){const ee=V.data[0];Fe(!!ee);const Z=ee,Q=(Z==null?void 0:Z.error)||((X=Z[0])===null||X===void 0?void 0:X.error);if(Q){ae(Mt,`RPC '${e}' stream ${o} received error:`,Q);const Te=Q.status;let ue=function(k){const A=lt[k];if(A!==void 0)return l_(A)}(Te),x=Q.message;ue===void 0&&(ue=Y.INTERNAL,x="Unknown error status: "+Te+" with message "+Q.message),P=!0,L.Do(new pe(ue,x)),E.close()}else ae(Mt,`RPC '${e}' stream ${o} received:`,ee),L.vo(ee)}}),z(f,by.STAT_EVENT,V=>{V.stat===hd.PROXY?ae(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===hd.NOPROXY&&ae(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.bo()},0),L}}function Xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(r){return new U1(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,s,o,l,h,f,g){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new E_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Sr(t.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new pe(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.d_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends T_{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=$1(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ee.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?Yn(h.readTime):Ee.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=wd(this.serializer),t.addTarget=function(l,h){let f;const g=h.target;if(f=md(g)?{documents:H1(l,g)}:{query:G1(l,g).ct},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=h_(l,h.resumeToken);const y=yd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ee.min())>0){f.readTime=Vu(l,h.snapshotVersion.toTimestamp());const y=yd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=Q1(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=wd(this.serializer),t.removeTarget=e,this.c_(t)}}class bI extends T_{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=K1(e.writeResults,e.commitTime),s=Yn(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=wd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>W1(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,_d(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(Y.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.ko(e,_d(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(Y.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class MI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Sr(t),this.C_=!1):ae("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{Zi(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(g){const y=Ie(g);y.k_.add(4),await Fa(y),y.K_.set("Unknown"),y.k_.delete(4),await Zu(y)}(this))})}),this.K_=new MI(s,o)}}async function Zu(r){if(Zi(r))for(const e of r.q_)await e(!0)}async function Fa(r){for(const e of r.q_)await e(!1)}function I_(r,e){const t=Ie(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),ef(t)?Zd(t):_o(t).s_()&&Jd(t,e))}function Yd(r,e){const t=Ie(r),s=_o(t);t.L_.delete(e),s.s_()&&S_(t,e),t.L_.size===0&&(s.s_()?s.a_():Zi(t)&&t.K_.set("Unknown"))}function Jd(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_o(r).V_(e)}function S_(r,e){r.U_.xe(e),_o(r).m_(e)}function Zd(r){r.U_=new L1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),_o(r).start(),r.K_.F_()}function ef(r){return Zi(r)&&!_o(r).i_()&&r.L_.size>0}function Zi(r){return Ie(r).k_.size===0}function C_(r){r.U_=void 0}async function jI(r){r.K_.set("Online")}async function UI(r){r.L_.forEach((e,t)=>{Jd(r,e)})}async function zI(r,e){C_(r),ef(r)?(r.K_.O_(e),Zd(r)):r.K_.set("Unknown")}async function BI(r,e,t){if(r.K_.set("Online"),e instanceof c_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.L_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.L_.delete(f),o.U_.removeTarget(f))}(r,e)}catch(s){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bu(r,s)}else if(e instanceof _u?r.U_.$e(e):e instanceof u_?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ee.min()))try{const s=await w_(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.U_.it(h);return f.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.L_.get(y);v&&l.L_.set(y,v.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,y)=>{const v=l.L_.get(g);if(!v)return;l.L_.set(g,v.withResumeToken(xt.EMPTY_BYTE_STRING,v.snapshotVersion)),S_(l,g);const E=new ei(v.target,g,y,v.sequenceNumber);Jd(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){ae("RemoteStore","Failed to raise snapshot:",s),await bu(r,s)}}async function bu(r,e,t){if(!yo(e))throw e;r.k_.add(1),await Fa(r),r.K_.set("Offline"),t||(t=()=>w_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Zu(r)})}function k_(r,e){return e().catch(t=>bu(r,t,e))}async function ec(r){const e=Ie(r),t=hi(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;$I(e);)try{const o=await kI(e.localStore,s);if(o===null){e.B_.length===0&&t.a_();break}s=o.batchId,WI(e,o)}catch(o){await bu(e,o)}R_(e)&&P_(e)}function $I(r){return Zi(r)&&r.B_.length<10}function WI(r,e){r.B_.push(e);const t=hi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function R_(r){return Zi(r)&&!hi(r).i_()&&r.B_.length>0}function P_(r){hi(r).start()}async function KI(r){hi(r).w_()}async function HI(r){const e=hi(r);for(const t of r.B_)e.g_(t.mutations)}async function GI(r,e,t){const s=r.B_.shift(),o=Kd.from(s,e,t);await k_(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await ec(r)}async function qI(r,e){e&&hi(r).f_&&await async function(s,o){if(function(h){return V1(h)&&h!==Y.ABORTED}(o.code)){const l=s.B_.shift();hi(s).__(),await k_(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await ec(s)}}(r,e),R_(r)&&P_(r)}async function Dg(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const s=Zi(t);t.k_.add(3),await Fa(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Zu(t)}async function QI(r,e){const t=Ie(r);e?(t.k_.delete(2),await Zu(t)):e||(t.k_.add(2),await Fa(t),t.K_.set("Unknown"))}function _o(r){return r.W_||(r.W_=function(t,s,o){const l=Ie(t);return l.b_(),new OI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:jI.bind(null,r),mo:UI.bind(null,r),po:zI.bind(null,r),R_:BI.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),ef(r)?Zd(r):r.K_.set("Unknown")):(await r.W_.stop(),C_(r))})),r.W_}function hi(r){return r.G_||(r.G_=function(t,s,o){const l=Ie(t);return l.b_(),new bI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:KI.bind(null,r),po:qI.bind(null,r),p_:HI.bind(null,r),y_:GI.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await ec(r)):(await r.G_.stop(),r.B_.length>0&&(ae("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new tf(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nf(r,e){if(Sr("AsyncQueue",`${e}: ${r}`),yo(r))return new pe(Y.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=ga(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new to;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.z_=new Je(_e.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):we():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class lo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new lo(e,t,to.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class YI{constructor(){this.queries=Og(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=Og(),l.forEach((h,f)=>{for(const g of f.J_)g.onError(s)})})(this,new pe(Y.ABORTED,"Firestore shutting down"))}}function Og(){return new Ji(r=>Qy(r),Gu)}async function A_(r,e){const t=Ie(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new XI,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=nf(h,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&rf(t)}async function x_(r,e){const t=Ie(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function JI(r,e){const t=Ie(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.J_)f.ta(o)&&(s=!0);h.H_=o}}s&&rf(t)}function ZI(r,e,t){const s=Ie(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function rf(r){r.X_.forEach(e=>{e.next()})}var Td,bg;(bg=Td||(Td={})).na="default",bg.Cache="cache";class N_{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new lo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Td.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.key=e}}class V_{constructor(e){this.key=e}}class eS{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Re(),this.mutatedKeys=Re(),this.Va=Xy(e),this.ma=new to(this.Va)}get fa(){return this.Ea}ga(e,t){const s=t?t.pa:new Vg,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const I=o.get(v),P=qu(this.query,E)?E:null,L=!!I&&this.mutatedKeys.has(I.key),z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;I&&P?I.data.isEqual(P.data)?L!==z&&(s.track({type:3,doc:P}),V=!0):this.ya(I,P)||(s.track({type:2,doc:P}),V=!0,(g&&this.Va(P,g)>0||y&&this.Va(P,y)<0)&&(f=!0)):!I&&P?(s.track({type:0,doc:P}),V=!0):I&&!P&&(s.track({type:1,doc:I}),V=!0,(g||y)&&(f=!0)),V&&(P?(h=h.add(P),l=z?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{ma:h,pa:s,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((v,E)=>function(P,L){const z=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return z(P)-z(L)}(v.type,E.type)||this.Va(v.doc,E.doc)),this.wa(s),o=o!=null&&o;const f=t&&!o?this.Sa():[],g=this.Ra.size===0&&this.current&&!o?1:0,y=g!==this.Aa;return this.Aa=g,h.length!==0||y?{snapshot:new lo(this.query,e.ma,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Vg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Re(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new V_(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new D_(s))}),t}va(e){this.Ea=e.Es,this.Ra=Re();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return lo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class tS{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class nS{constructor(e){this.key=e,this.Fa=!1}}class rS{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Ji(f=>Qy(f),Gu),this.Oa=new Map,this.Na=new Set,this.Ba=new Je(_e.comparator),this.La=new Map,this.ka=new qd,this.qa={},this.Qa=new Map,this.Ka=ao.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function iS(r,e,t=!0){const s=j_(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await O_(s,e,t,!0),o}async function sS(r,e){const t=j_(r);await O_(t,e,!0,!1)}async function O_(r,e,t,s){const o=await RI(r.localStore,Qn(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await oS(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&I_(r.remoteStore,o),f}async function oS(r,e,t,s,o){r.Ua=(E,I,P)=>async function(z,V,X,ee){let Z=V.view.ga(X);Z.ss&&(Z=await Ag(z.localStore,V.query,!1).then(({documents:x})=>V.view.ga(x,Z)));const Q=ee&&ee.targetChanges.get(V.targetId),Te=ee&&ee.targetMismatches.get(V.targetId)!=null,ue=V.view.applyChanges(Z,z.isPrimaryClient,Q,Te);return Mg(z,V.targetId,ue.ba),ue.snapshot}(r,E,I,P);const l=await Ag(r.localStore,e,!0),h=new eS(e,l.Es),f=h.ga(l.documents),g=Ma.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);Mg(r,t,y.ba);const v=new tS(e,t,h);return r.xa.set(e,v),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function aS(r,e,t){const s=Ie(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(h=>!Gu(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Ed(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Yd(s.remoteStore,o.targetId),Id(s,o.targetId)}).catch(go)):(Id(s,o.targetId),await Ed(s.localStore,o.targetId,!0))}async function lS(r,e){const t=Ie(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Yd(t.remoteStore,s.targetId))}async function uS(r,e,t){const s=gS(r);try{const o=await function(h,f){const g=Ie(h),y=mt.now(),v=f.reduce((P,L)=>P.add(L.key),Re());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",P=>{let L=Cr(),z=Re();return g.hs.getEntries(P,v).next(V=>{L=V,L.forEach((X,ee)=>{ee.isValidDocument()||(z=z.add(X))})}).next(()=>g.localDocuments.getOverlayedDocuments(P,L)).next(V=>{E=V;const X=[];for(const ee of f){const Z=P1(ee,E.get(ee.key).overlayedDocument);Z!=null&&X.push(new mi(ee.key,Z,By(Z.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,X,f)}).next(V=>{I=V;const X=V.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(P,V.batchId,X)})}).then(()=>({batchId:I.batchId,changes:Jy(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let y=h.qa[h.currentUser.toKey()];y||(y=new Je(Ae)),y=y.insert(f,g),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await ja(s,o.changes),await ec(s.remoteStore)}catch(o){const l=nf(o,"Failed to persist write");t.reject(l)}}async function b_(r,e){const t=Ie(r);try{const s=await SI(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&(Fe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Fe(h.Fa):o.removedDocuments.size>0&&(Fe(h.Fa),h.Fa=!1))}),await ja(t,s,e)}catch(s){await go(s)}}function Lg(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,h)=>{const f=h.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Ie(h);g.onlineState=f;let y=!1;g.queries.forEach((v,E)=>{for(const I of E.J_)I.ea(f)&&(y=!0)}),y&&rf(g)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function cS(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.La.get(e),l=o&&o.key;if(l){let h=new Je(_e.comparator);h=h.insert(l,jt.newNoDocument(l,Ee.min()));const f=Re().add(l),g=new Yu(Ee.min(),new Map,new Je(Ae),h,f);await b_(s,g),s.Ba=s.Ba.remove(l),s.La.delete(e),sf(s)}else await Ed(s.localStore,e,!1).then(()=>Id(s,e,t)).catch(go)}async function hS(r,e){const t=Ie(r),s=e.batch.batchId;try{const o=await II(t.localStore,e);M_(t,s,null),L_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ja(t,o)}catch(o){await go(o)}}async function dS(r,e,t){const s=Ie(r);try{const o=await function(h,f){const g=Ie(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next(E=>(Fe(E!==null),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>g.localDocuments.getDocuments(y,v))})}(s.localStore,e);M_(s,e,t),L_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ja(s,o)}catch(o){await go(o)}}function L_(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function M_(r,e,t){const s=Ie(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Id(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||F_(r,s)})}function F_(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(Yd(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),sf(r))}function Mg(r,e,t){for(const s of t)s instanceof D_?(r.ka.addReference(s.key,e),fS(r,s)):s instanceof V_?(ae("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||F_(r,s.key)):we()}function fS(r,e){const t=e.key,s=t.path.canonicalString();r.Ba.get(t)||r.Na.has(s)||(ae("SyncEngine","New document in limbo: "+t),r.Na.add(s),sf(r))}function sf(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new _e(et.fromString(e)),s=r.Ka.next();r.La.set(s,new nS(t)),r.Ba=r.Ba.insert(t,s),I_(r.remoteStore,new ei(Qn(Hu(t.path)),s,"TargetPurposeLimboResolution",Bu.oe))}}async function ja(r,e,t){const s=Ie(r),o=[],l=[],h=[];s.xa.isEmpty()||(s.xa.forEach((f,g)=>{h.push(s.Ua(g,e,t).then(y=>{var v;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Xd.zi(g.targetId,y);l.push(E)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(g,y){const v=Ie(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>K.forEach(y,I=>K.forEach(I.Wi,P=>v.persistence.referenceDelegate.addReference(E,I.targetId,P)).next(()=>K.forEach(I.Gi,P=>v.persistence.referenceDelegate.removeReference(E,I.targetId,P)))))}catch(E){if(!yo(E))throw E;ae("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const P=v.us.get(I),L=P.snapshotVersion,z=P.withLastLimboFreeSnapshotVersion(L);v.us=v.us.insert(I,z)}}}(s.localStore,l))}async function pS(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const s=await v_(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(f=>{f.forEach(g=>{g.reject(new pe(Y.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ja(t,s.Ts)}}function mS(r,e){const t=Ie(r),s=t.La.get(e);if(s&&s.Fa)return Re().add(s.key);{let o=Re();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const f=t.xa.get(h);o=o.unionWith(f.view.fa)}return o}}function j_(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=b_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cS.bind(null,e),e.Ma.R_=JI.bind(null,e.eventManager),e.Ma.Wa=ZI.bind(null,e.eventManager),e}function gS(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dS.bind(null,e),e}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return TI(this.persistence,new wI,e.initialUser,this.serializer)}ja(e){return new __(Qd.ei,this.serializer)}za(e){return new AI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class yS extends Lu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Fe(this.persistence.referenceDelegate instanceof Ou);const s=this.persistence.referenceDelegate.garbageCollector;return new sI(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new __(s=>Ou.ei(s,t),this.serializer)}}class Sd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Lg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pS.bind(null,this.syncEngine),await QI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YI}()}createDatastore(e){const t=Ju(e.databaseInfo.databaseId),s=function(l){return new VI(l)}(e.databaseInfo);return function(l,h,f,g){return new LI(l,h,f,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new FI(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Lg(this.syncEngine,t,0),function(){return Ng.p()?new Ng:new xI}())}createSyncEngine(e,t){return function(o,l,h,f,g,y,v){const E=new rS(o,l,h,f,g,y);return v&&(E.$a=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);ae("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await Fa(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sd.provider={build:()=>new Sd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{ae("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(ae("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=nf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Yh(r,e){r.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await v_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Fg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await vS(r);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Dg(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Dg(e.remoteStore,o)),r._onlineComponents=e}async function vS(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),await Yh(r,new Lu)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Yh(r,new yS(void 0));return r._offlineComponents}async function z_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Fg(r,r._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await Fg(r,new Sd))),r._onlineComponents}function wS(r){return z_(r).then(e=>e.syncEngine)}async function Cd(r){const e=await z_(r),t=e.eventManager;return t.onListen=iS.bind(null,e.syncEngine),t.onUnlisten=aS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lS.bind(null,e.syncEngine),t}function ES(r,e,t={}){const s=new si;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,f,g,y){const v=new U_({next:I=>{v.eu(),h.enqueueAndForget(()=>x_(l,E));const P=I.docs.has(f);!P&&I.fromCache?y.reject(new pe(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&g&&g.source==="server"?y.reject(new pe(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new N_(Hu(f.path),v,{includeMetadataChanges:!0,ua:!0});return A_(l,E)}(await Cd(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(r,e,t){if(!t)throw new pe(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function IS(r,e,t,s){if(e===!0&&s===!0)throw new pe(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ug(r){if(!_e.isDocumentKey(r))throw new pe(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function of(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we()}function Jn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=of(r);throw new pe(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class af{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zg(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new VT;switch(s.type){case"firstParty":return new MT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=jg.get(t);s&&(ae("ComponentProvider","Removing Datastore"),jg.delete(t),s.terminate())}(this),Promise.resolve()}}function SS(r,e,t,s={}){var o;const l=(r=Jn(r,af))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let f,g;if(typeof s.mockUserToken=="string")f=s.mockUserToken,g=Ft.MOCK_USER;else{f=p0(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new pe(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ft(y)}r._authCredentials=new OT(new Fy(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new tc(this.firestore,e,this._query)}}class en{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Oa extends tc{constructor(e,t,s){super(e,t,Hu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new _e(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function Ia(r,e,...t){if(r=oi(r),arguments.length===1&&(e=jy.newId()),TS("doc","path",e),r instanceof af){const s=et.fromString(e,...t);return Ug(s),new en(r,null,new _e(s))}{if(!(r instanceof en||r instanceof Oa))throw new pe(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return Ug(s),new en(r.firestore,r instanceof Oa?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new E_(this,"async_queue_retry"),this.fu=()=>{const s=Xh();s&&ae("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=Xh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=Xh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new si;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!yo(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(s);throw Sr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=tf.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&we()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function $g(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class uo extends af{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Bg,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bg(e),this._firestoreClient=void 0,await e}}}function CS(r,e){const t=typeof r=="object"?r:IT(),s=typeof r=="string"?r:"(default)",o=vT(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=d0("firestore");l&&SS(o,...l)}return o}function lf(r){if(r._terminated)throw new pe(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||kS(r),r._firestoreClient}function kS(r){var e,t,s;const o=r._freezeSettings(),l=function(f,g,y,v){return new JT(f,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,B_(v.experimentalLongPollingOptions),v.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new _S(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new co(xt.fromBase64String(e))}catch(t){throw new pe(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new co(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=/^__.*__$/;class PS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new La(e,this.data,t,this.fieldTransforms)}}class $_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class ic{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new ic(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Bu(e),o}Lu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Mu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(W_(this.Mu)&&RS.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class AS{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ju(e)}$u(e,t,s,o=!1){return new ic({Mu:e,methodName:t,Ku:s,path:At.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K_(r){const e=r._freezeSettings(),t=Ju(r._databaseId);return new AS(r._databaseId,!!e.ignoreUndefinedProperties,t)}function xS(r,e,t,s,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);df("Data must be an object, but it was:",h,s);const f=H_(s,h);let g,y;if(l.merge)g=new cn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const I=kd(e,E,t);if(!h.contains(I))throw new pe(Y.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);q_(v,I)||v.push(I)}g=new cn(v),y=h.fieldTransforms.filter(E=>g.covers(E.field))}else g=null,y=h.fieldTransforms;return new PS(new Zt(f),g,y)}class sc extends rc{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sc}}function NS(r,e,t){return new ic({Mu:3,Ku:e.settings.Ku,methodName:r._methodName,Nu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hf extends rc{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=NS(this,e,!0),s=this.Uu.map(l=>Ua(l,t)),o=new oo(s);return new S1(e.path,o)}isEqual(e){return e instanceof hf&&Cu(this.Uu,e.Uu)}}function DS(r,e,t,s){const o=r.$u(1,e,t);df("Data must be an object, but it was:",o,s);const l=[],h=Zt.empty();pi(s,(g,y)=>{const v=ff(e,g,t);y=oi(y);const E=o.Lu(v);if(y instanceof sc)l.push(v);else{const I=Ua(y,E);I!=null&&(l.push(v),h.set(v,I))}});const f=new cn(l);return new $_(h,f,o.fieldTransforms)}function VS(r,e,t,s,o,l){const h=r.$u(1,e,t),f=[kd(e,s,t)],g=[o];if(l.length%2!=0)throw new pe(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(kd(e,l[I])),g.push(l[I+1]);const y=[],v=Zt.empty();for(let I=f.length-1;I>=0;--I)if(!q_(y,f[I])){const P=f[I];let L=g[I];L=oi(L);const z=h.Lu(P);if(L instanceof sc)y.push(P);else{const V=Ua(L,z);V!=null&&(y.push(P),v.set(P,V))}}const E=new cn(y);return new $_(v,E,h.fieldTransforms)}function Ua(r,e){if(G_(r=oi(r)))return df("Unsupported field value:",e,r),H_(r,e);if(r instanceof rc)return function(s,o){if(!W_(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let g=Ua(f,o.ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=oi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return E1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:Vu(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vu(o.serializer,l)}}if(s instanceof uf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof co)return{bytesValue:h_(o.serializer,s._byteString)};if(s instanceof en){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gd(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof cf)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw f.qu("VectorValues must only contain numeric values.");return Wd(f.serializer,g)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${of(s)}`)}(r,e)}function H_(r,e){const t={};return Uy(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(r,(s,o)=>{const l=Ua(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function G_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof uf||r instanceof co||r instanceof en||r instanceof rc||r instanceof cf)}function df(r,e,t){if(!G_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=of(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function kd(r,e,t){if((e=oi(e))instanceof nc)return e._internalPath;if(typeof e=="string")return ff(r,e);throw Mu("Field path arguments must be of type string or ",r,!1,void 0,t)}const OS=new RegExp("[~\\*/\\[\\]]");function ff(r,e,t){if(e.search(OS)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new nc(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Mu(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new pe(Y.INVALID_ARGUMENT,f+r+g)}function q_(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(X_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bS extends Q_{data(){return super.data()}}function X_(r,e){return typeof e=="string"?ff(r,e):e instanceof nc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MS{convertValue(e,t="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return pi(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>it(h.doubleValue));return new cf(l)}convertGeoPoint(e){return new uf(it(e.latitude),it(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Wu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(xa(e));default:return null}}convertTimestamp(e){const t=li(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=et.fromString(e);Fe(y_(s));const o=new Na(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return o.isEqual(t)||Sr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y_ extends Q_{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(X_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class vu extends Y_{data(e={}){return super.data(e)}}class jS{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _a(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new vu(this._firestore,this._userDataWriter,s.key,s,new _a(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new _a(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const g=new vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new _a(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:US(f.type),doc:g,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function US(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r){r=Jn(r,en);const e=Jn(r.firestore,uo);return ES(lf(e),r._key).then(t=>ev(e,r,t))}class J_ extends MS{constructor(e){super(),this.firestore=e}convertBytes(e){return new co(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}function BS(r,e,t){r=Jn(r,en);const s=Jn(r.firestore,uo),o=FS(r.converter,e);return Z_(s,[xS(K_(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Xn.none())])}function Rd(r,e,t,...s){r=Jn(r,en);const o=Jn(r.firestore,uo),l=K_(o);let h;return h=typeof(e=oi(e))=="string"||e instanceof nc?VS(l,"updateDoc",r._key,e,t,s):DS(l,"updateDoc",r._key,e),Z_(o,[h.toMutation(r._key,Xn.exists(!0))])}function $S(r,...e){var t,s,o;r=oi(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||$g(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if($g(e[h])){const E=e[h];e[h]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[h+1]=(s=E.error)===null||s===void 0?void 0:s.bind(E),e[h+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let g,y,v;if(r instanceof en)y=Jn(r.firestore,uo),v=Hu(r._key.path),g={next:E=>{e[h]&&e[h](ev(y,r,E))},error:e[h+1],complete:e[h+2]};else{const E=Jn(r,tc);y=Jn(E.firestore,uo),v=E._query;const I=new J_(y);g={next:P=>{e[h]&&e[h](new jS(y,I,E,P))},error:e[h+1],complete:e[h+2]},LS(r._query)}return function(I,P,L,z){const V=new U_(z),X=new N_(P,V,L);return I.asyncQueue.enqueueAndForget(async()=>A_(await Cd(I),X)),()=>{V.eu(),I.asyncQueue.enqueueAndForget(async()=>x_(await Cd(I),X))}}(lf(y),v,f,g)}function Z_(r,e){return function(s,o){const l=new si;return s.asyncQueue.enqueueAndForget(async()=>uS(await wS(s),o,l)),l.promise}(lf(r),e)}function ev(r,e,t){const s=t.docs.get(e._key),o=new J_(r);return new Y_(r,o,e._key,s,new _a(t.hasPendingWrites,t.fromCache),e.converter)}function WS(...r){return new hf("arrayUnion",r)}(function(e,t=!0){(function(o){mo=o})(TT),Ru(new Pa("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new uo(new bT(s.getProvider("auth-internal")),new jT(s.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(y.options.projectId,v)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),eo(og,"4.7.6",e),eo(og,"4.7.6","esm2017")})();var KS="firebase",HS="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eo(KS,HS,"app");const GS={apiKey:"AIzaSyBeuAxA35t_LabwU8Gu-rkuV-mkd02qL0s",authDomain:"test-project-multiplayer.firebaseapp.com",projectId:"test-project-multiplayer",storageBucket:"test-project-multiplayer.firebasestorage.app",messagingSenderId:"983160703654",appId:"1:983160703654:web:535d064be3bd8ccf7e0267",measurementId:"G-FNH4PJMMRD"},qS=Ay(GS),Sa=CS(qS);let QS={data:""},XS=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||QS,YS=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,JS=/\/\*[^]*?\*\/|  +/g,Wg=/\n+/g,Jr=(r,e)=>{let t="",s="",o="";for(let l in r){let h=r[l];l[0]=="@"?l[1]=="i"?t=l+" "+h+";":s+=l[1]=="f"?Jr(h,l):l+"{"+Jr(h,l[1]=="k"?"":e)+"}":typeof h=="object"?s+=Jr(h,e?e.replace(/([^,])+/g,f=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,f):f?f+" "+g:g)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Jr.p?Jr.p(l,h):l+":"+h+";")}return t+(e&&o?e+"{"+o+"}":o)+s},wr={},tv=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+tv(r[t]);return e}return r},ZS=(r,e,t,s,o)=>{let l=tv(r),h=wr[l]||(wr[l]=(g=>{let y=0,v=11;for(;y<g.length;)v=101*v+g.charCodeAt(y++)>>>0;return"go"+v})(l));if(!wr[h]){let g=l!==r?r:(y=>{let v,E,I=[{}];for(;v=YS.exec(y.replace(JS,""));)v[4]?I.shift():v[3]?(E=v[3].replace(Wg," ").trim(),I.unshift(I[0][E]=I[0][E]||{})):I[0][v[1]]=v[2].replace(Wg," ").trim();return I[0]})(r);wr[h]=Jr(o?{["@keyframes "+h]:g}:g,t?"":"."+h)}let f=t&&wr.g?wr.g:null;return t&&(wr.g=wr[h]),((g,y,v,E)=>{E?y.data=y.data.replace(E,g):y.data.indexOf(g)===-1&&(y.data=v?g+y.data:y.data+g)})(wr[h],e,s,f),h},eC=(r,e,t)=>r.reduce((s,o,l)=>{let h=e[l];if(h&&h.call){let f=h(t),g=f&&f.props&&f.props.className||/^go/.test(f)&&f;h=g?"."+g:f&&typeof f=="object"?f.props?"":Jr(f,""):f===!1?"":f}return s+o+(h??"")},"");function oc(r){let e=this||{},t=r.call?r(e.p):r;return ZS(t.unshift?t.raw?eC(t,[].slice.call(arguments,1),e.p):t.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):t,XS(e.target),e.g,e.o,e.k)}let nv,Pd,Ad;oc.bind({g:1});let kr=oc.bind({k:1});function tC(r,e,t,s){Jr.p=e,nv=r,Pd=t,Ad=s}function gi(r,e){let t=this||{};return function(){let s=arguments;function o(l,h){let f=Object.assign({},l),g=f.className||o.className;t.p=Object.assign({theme:Pd&&Pd()},f),t.o=/ *go\d+/.test(g),f.className=oc.apply(t,s)+(g?" "+g:"");let y=r;return r[0]&&(y=f.as||r,delete f.as),Ad&&y[0]&&Ad(f),nv(y,f)}return o}}var nC=r=>typeof r=="function",Fu=(r,e)=>nC(r)?r(e):r,rC=(()=>{let r=0;return()=>(++r).toString()})(),rv=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),iC=20,iv=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,iC)};case 1:return{...r,toasts:r.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:t}=e;return iv(r,{type:r.toasts.find(l=>l.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let o=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},wu=[],Eu={toasts:[],pausedAt:void 0},es=r=>{Eu=iv(Eu,r),wu.forEach(e=>{e(Eu)})},sC={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},oC=(r={})=>{let[e,t]=W.useState(Eu);W.useEffect(()=>(wu.push(t),()=>{let o=wu.indexOf(t);o>-1&&wu.splice(o,1)}),[e]);let s=e.toasts.map(o=>{var l,h,f;return{...r,...r[o.type],...o,removeDelay:o.removeDelay||((l=r[o.type])==null?void 0:l.removeDelay)||(r==null?void 0:r.removeDelay),duration:o.duration||((h=r[o.type])==null?void 0:h.duration)||(r==null?void 0:r.duration)||sC[o.type],style:{...r.style,...(f=r[o.type])==null?void 0:f.style,...o.style}}});return{...e,toasts:s}},aC=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||rC()}),za=r=>(e,t)=>{let s=aC(e,r,t);return es({type:2,toast:s}),s.id},Ke=(r,e)=>za("blank")(r,e);Ke.error=za("error");Ke.success=za("success");Ke.loading=za("loading");Ke.custom=za("custom");Ke.dismiss=r=>{es({type:3,toastId:r})};Ke.remove=r=>es({type:4,toastId:r});Ke.promise=(r,e,t)=>{let s=Ke.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(o=>{let l=e.success?Fu(e.success,o):void 0;return l?Ke.success(l,{id:s,...t,...t==null?void 0:t.success}):Ke.dismiss(s),o}).catch(o=>{let l=e.error?Fu(e.error,o):void 0;l?Ke.error(l,{id:s,...t,...t==null?void 0:t.error}):Ke.dismiss(s)}),r};var lC=(r,e)=>{es({type:1,toast:{id:r,height:e}})},uC=()=>{es({type:5,time:Date.now()})},Ca=new Map,cC=1e3,hC=(r,e=cC)=>{if(Ca.has(r))return;let t=setTimeout(()=>{Ca.delete(r),es({type:4,toastId:r})},e);Ca.set(r,t)},dC=r=>{let{toasts:e,pausedAt:t}=oC(r);W.useEffect(()=>{if(t)return;let l=Date.now(),h=e.map(f=>{if(f.duration===1/0)return;let g=(f.duration||0)+f.pauseDuration-(l-f.createdAt);if(g<0){f.visible&&Ke.dismiss(f.id);return}return setTimeout(()=>Ke.dismiss(f.id),g)});return()=>{h.forEach(f=>f&&clearTimeout(f))}},[e,t]);let s=W.useCallback(()=>{t&&es({type:6,time:Date.now()})},[t]),o=W.useCallback((l,h)=>{let{reverseOrder:f=!1,gutter:g=8,defaultPosition:y}=h||{},v=e.filter(P=>(P.position||y)===(l.position||y)&&P.height),E=v.findIndex(P=>P.id===l.id),I=v.filter((P,L)=>L<E&&P.visible).length;return v.filter(P=>P.visible).slice(...f?[I+1]:[0,I]).reduce((P,L)=>P+(L.height||0)+g,0)},[e]);return W.useEffect(()=>{e.forEach(l=>{if(l.dismissed)hC(l.id,l.removeDelay);else{let h=Ca.get(l.id);h&&(clearTimeout(h),Ca.delete(l.id))}})},[e]),{toasts:e,handlers:{updateHeight:lC,startPause:uC,endPause:s,calculateOffset:o}}},fC=kr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,pC=kr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mC=kr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,gC=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${fC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${pC} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mC} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,yC=kr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_C=gi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${yC} 1s linear infinite;
`,vC=kr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,wC=kr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,EC=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${wC} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,TC=gi("div")`
  position: absolute;
`,IC=gi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,SC=kr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CC=gi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${SC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,kC=({toast:r})=>{let{icon:e,type:t,iconTheme:s}=r;return e!==void 0?typeof e=="string"?W.createElement(CC,null,e):e:t==="blank"?null:W.createElement(IC,null,W.createElement(_C,{...s}),t!=="loading"&&W.createElement(TC,null,t==="error"?W.createElement(gC,{...s}):W.createElement(EC,{...s})))},RC=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,PC=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,AC="0%{opacity:0;} 100%{opacity:1;}",xC="0%{opacity:1;} 100%{opacity:0;}",NC=gi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,DC=gi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,VC=(r,e)=>{let t=r.includes("top")?1:-1,[s,o]=rv()?[AC,xC]:[RC(t),PC(t)];return{animation:e?`${kr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${kr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},OC=W.memo(({toast:r,position:e,style:t,children:s})=>{let o=r.height?VC(r.position||e||"top-center",r.visible):{opacity:0},l=W.createElement(kC,{toast:r}),h=W.createElement(DC,{...r.ariaProps},Fu(r.message,r));return W.createElement(NC,{className:r.className,style:{...o,...t,...r.style}},typeof s=="function"?s({icon:l,message:h}):W.createElement(W.Fragment,null,l,h))});tC(W.createElement);var bC=({id:r,className:e,style:t,onHeightUpdate:s,children:o})=>{let l=W.useCallback(h=>{if(h){let f=()=>{let g=h.getBoundingClientRect().height;s(r,g)};f(),new MutationObserver(f).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return W.createElement("div",{ref:l,className:e,style:t},o)},LC=(r,e)=>{let t=r.includes("top"),s=t?{top:0}:{bottom:0},o=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rv()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...o}},MC=oc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,cu=16,FC=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:s,children:o,containerStyle:l,containerClassName:h})=>{let{toasts:f,handlers:g}=dC(t);return W.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:cu,left:cu,right:cu,bottom:cu,pointerEvents:"none",...l},className:h,onMouseEnter:g.startPause,onMouseLeave:g.endPause},f.map(y=>{let v=y.position||e,E=g.calculateOffset(y,{reverseOrder:r,gutter:s,defaultPosition:e}),I=LC(v,E);return W.createElement(bC,{id:y.id,key:y.id,onHeightUpdate:g.updateHeight,className:y.visible?MC:"",style:I},y.type==="custom"?Fu(y.message,y):o?o(y):W.createElement(OC,{toast:y,position:v}))}))};const hu=4,Er=8,jC=({gameId:r})=>{const[e,t]=W.useState(!1),s=W.useCallback(async()=>{try{await navigator.clipboard.writeText(r),t(!0),setTimeout(()=>t(!1),2e3)}catch(o){console.error("Failed to copy:",o)}},[r]);return ne.jsxs("div",{className:"game-id-container",children:[ne.jsx("h2",{className:"game-id",children:r}),ne.jsxs("button",{className:"copy-button",onClick:s,children:["📋",e&&ne.jsx("span",{className:"copied-message",children:"Copied!"})]})]})},UC=({gameId:r,playerId:e})=>{const[t,s]=W.useState(null);W.useEffect(()=>{const g=Ia(Sa,"games",r),y=$S(g,v=>{const E=v.data();s(E),E.winner&&Ke.success(`Game Over! ${E.winner} player wins!`)});return()=>y()},[r]);const o=(g,y)=>{const v=g[y];if(!v)return!1;const E=Math.floor(y/Er),I=y%Er,P=(L,z)=>{let V=0,X=E+L,ee=I+z;for(;X>=0&&X<Er&&ee>=0&&ee<Er&&g[X*Er+ee]===v;)V++,X+=L,ee+=z;return V};return P(0,-1)+P(0,1)+1>=hu||P(-1,0)+P(1,0)+1>=hu||P(-1,-1)+P(1,1)+1>=hu||P(-1,1)+P(1,-1)+1>=hu},l=async g=>{if(!(!t||t.status==="finished")){if(t.players.length<2){Ke.error("Waiting for opponent to join");return}if(t.currentPlayer!==h()){Ke.error("It's not your turn!");return}if(t.board[g]){Ke.error("Invalid move");return}try{const y=[...t.board],v=h();y[g]=v;const E=o(y,g);await Rd(Ia(Sa,"games",r),{board:y,currentPlayer:t.currentPlayer==="red"?"yellow":"red",...E&&{winner:v,status:"finished"}})}catch(y){Ke.error("Move failed"),console.error("Error updating document:",y)}}},h=()=>t?t.players[0]===e?"red":"yellow":"spectator",f=async()=>{try{await Rd(Ia(Sa,"games",r),{board:Array(Er**2).fill(""),currentPlayer:"red",status:"playing",winner:null})}catch(g){console.error("Error restarting game:",g)}};return t?ne.jsxs("div",{className:"game-container",children:[ne.jsxs("div",{className:"game-info",children:[ne.jsxs("p",{children:["Your color: ",ne.jsx("span",{className:h(),children:h()})]}),ne.jsxs("p",{children:["Players connected: ",t.players.length,"/2"]}),ne.jsxs("p",{children:["Current turn: ",t.currentPlayer]})]}),t.status==="finished"?ne.jsxs("div",{className:"game-over",children:[ne.jsxs("h2",{children:["Game Over! ",t.winner," wins!"]}),ne.jsx("button",{onClick:f,children:"Play Again"})]}):t.players.length===2?ne.jsx("div",{className:"board",children:Array.from({length:Er}).map((g,y)=>ne.jsx("div",{className:"row",children:Array.from({length:Er}).map((v,E)=>{const I=y*Er+E;return ne.jsx("div",{className:"cell",onClick:()=>l(I),children:t.board[I]&&ne.jsx("div",{className:`piece ${t.board[I]}`})},I)})},y))}):ne.jsxs("div",{className:"waiting-message",children:[ne.jsx("p",{children:"Share this Game ID with player 2:"}),ne.jsx(jC,{gameId:r}),ne.jsx("p",{children:"Waiting for opponent to join..."})]})]}):ne.jsx("div",{children:"Loading game..."})},zC=8,BC=()=>{const[r,e]=W.useState(""),[t,s]=W.useState(""),o=async()=>{const h=`game-${Date.now()}`,f=`player-${Math.random().toString(36).slice(2,9)}`;try{await BS(Ia(Sa,"games",h),{board:Array(zC**2).fill(""),currentPlayer:"red",players:[f],status:"waiting"}),e(h),s(f),Ke.success(`Game created! ID: ${h}`)}catch(g){Ke.error("Failed to create game"),console.error("Error creating game:",g)}},l=async()=>{if(!r){Ke.error("Please enter a Game ID");return}try{const h=Ia(Sa,"games",r),f=await zS(h);if(!f.exists()){Ke.error("Game not found");return}if(f.data().players.length>=2){Ke.error("Game is full");return}const y=`player-${Math.random().toString(36).slice(2,9)}`;await Rd(h,{players:WS(y),status:"playing"}),s(y),Ke.success("Joined game!")}catch(h){Ke.error("Failed to join game"),console.error("Error joining game:",h)}};return ne.jsx("div",{className:"lobby",children:t?ne.jsx(UC,{gameId:r,playerId:t}):ne.jsxs("div",{className:"lobby-actions",children:[ne.jsx("button",{onClick:o,children:"Create New Game"}),ne.jsxs("div",{className:"join-section",children:[ne.jsx("input",{value:r,onChange:h=>e(h.target.value),placeholder:"Enter Game ID"}),ne.jsx("button",{onClick:l,children:"Join Game"})]})]})})};var sv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kg=Tr.createContext&&Tr.createContext(sv),$C=["attr","size","title"];function WC(r,e){if(r==null)return{};var t=KC(r,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function KC(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function ju(){return ju=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ju.apply(this,arguments)}function Hg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function Uu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hg(Object(t),!0).forEach(function(s){HC(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Hg(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function HC(r,e,t){return e=GC(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function GC(r){var e=qC(r,"string");return typeof e=="symbol"?e:e+""}function qC(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ov(r){return r&&r.map((e,t)=>Tr.createElement(e.tag,Uu({key:t},e.attr),ov(e.child)))}function QC(r){return e=>Tr.createElement(XC,ju({attr:Uu({},r.attr)},e),ov(r.child))}function XC(r){var e=t=>{var{attr:s,size:o,title:l}=r,h=WC(r,$C),f=o||t.size||"1em",g;return t.className&&(g=t.className),r.className&&(g=(g?g+" ":"")+r.className),Tr.createElement("svg",ju({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:g,style:Uu(Uu({color:r.color||t.color},t.style),r.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&Tr.createElement("title",null,l),r.children)};return Kg!==void 0?Tr.createElement(Kg.Consumer,null,t=>e(t)):e(sv)}function Gg(r){return QC({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(r)}const YC=()=>{const{user:r}=Ey();return ne.jsx("div",{className:"min-h-screen bg-gray-100",children:ne.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4",children:ne.jsx("div",{className:"bg-white rounded-lg shadow-md p-8",children:ne.jsxs("div",{className:"flex items-center space-x-6",children:[ne.jsx("img",{src:r==null?void 0:r.picture,alt:r==null?void 0:r.name,className:"w-32 h-32 rounded-full border-4 border-blue-500"}),ne.jsxs("div",{children:[ne.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:r==null?void 0:r.name}),ne.jsx("p",{className:"text-lg text-gray-600 mt-2",children:r==null?void 0:r.email}),ne.jsxs("div",{className:"mt-4",children:[ne.jsxs("p",{className:"text-gray-500",children:[ne.jsx("span",{className:"font-semibold",children:"Email verified:"}),r!=null&&r.email_verified?" Yes":" No"]}),ne.jsxs("p",{className:"text-gray-500",children:[ne.jsx("span",{className:"font-semibold",children:"Last updated:"}),new Date((r==null?void 0:r.updated_at)||"").toLocaleDateString()]})]})]})]})})})})},JC=()=>{const{loginWithRedirect:r,logout:e,isAuthenticated:t}=Ey();return ne.jsx("div",{children:t?ne.jsx("button",{className:"auth-button",onClick:()=>e({logoutParams:{returnTo:"https://ni-kit-mht.github.io/test-project-multiplayer/"}}),children:"Log Out"}):ne.jsx("button",{className:"auth-button",onClick:()=>r(),children:"Log In"})})};function ZC(){const[r,e]=W.useState(!1),t=()=>ne.jsx("nav",{className:"game-nav",children:ne.jsxs("div",{className:"nav-container",children:[ne.jsxs("div",{className:"nav-brand",children:[ne.jsx(Gg,{className:"nav-icon"}),ne.jsx("span",{children:"Multiplayer Board Game"})]}),ne.jsxs("div",{className:"nav-links",children:[ne.jsx(Lm,{to:"/",className:"nav-link",children:"Home"}),ne.jsx(Lm,{to:"/profile",className:"nav-link",children:"Profile"}),ne.jsx(JC,{})]})]})}),s=()=>ne.jsxs(ne.Fragment,{children:[ne.jsx("header",{className:"app-header",children:ne.jsxs("h1",{children:["Multiplayer Board Game ",ne.jsx(Gg,{className:"game-icon"})]})}),ne.jsx("main",{className:"game-container",children:ne.jsx(BC,{})}),r&&ne.jsxs("div",{className:"rules-popup",children:[ne.jsx("h3",{children:"Game Rules"}),ne.jsxs("ol",{children:[ne.jsx("li",{children:"Players take turns placing their pieces"}),ne.jsx("li",{children:"Red always goes first"}),ne.jsx("li",{children:"Click any empty cell to place your piece"}),ne.jsx("li",{children:"Game continues until all cells are filled"})]}),ne.jsx("button",{onClick:()=>e(!1),children:"Close"})]}),ne.jsx("footer",{className:"app-footer",children:ne.jsx("button",{className:"rules-button",onClick:()=>e(!r),children:r?"Hide Rules":"Show Rules"})})]});return ne.jsxs("div",{className:"app-container",children:[ne.jsx(FC,{position:"top-right"}),ne.jsx(t,{}),ne.jsxs(hE,{children:[ne.jsx(du,{path:"/",element:ne.jsx(s,{})}),ne.jsx(du,{path:"/profile",element:ne.jsx(YC,{})}),ne.jsx(du,{path:"*",element:ne.jsx(uE,{to:"/"})})]})]})}vw.createRoot(document.getElementById("root")).render(ne.jsx(W.StrictMode,{children:ne.jsx(_E,{basename:"/test-project-multiplayer",children:ne.jsx(n0,{domain:"dev-5sughtnn8ge8qbi1.jp.auth0.com",clientId:"2cqTGb70cIDaEGBqR9pO1x2EPz5A5GJZ",authorizationParams:{redirect_uri:window.location.origin+"/test-project-multiplayer/"},children:ne.jsx(ZC,{})})})}));
