function IE(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function SE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qd={exports:{}},Fa={},Xd={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy;function CE(){if(cy)return Re;cy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,L={};function N(F,Q,ge){this.props=F,this.context=Q,this.refs=L,this.updater=ge||C}N.prototype.isReactComponent={},N.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},N.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function K(){}K.prototype=N.prototype;function G(F,Q,ge){this.props=F,this.context=Q,this.refs=L,this.updater=ge||C}var ee=G.prototype=new K;ee.constructor=G,b(ee,N.prototype),ee.isPureReactComponent=!0;var Y=Array.isArray,se=Object.prototype.hasOwnProperty,re={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function S(F,Q,ge){var ke,Ae={},De=null,Fe=null;if(Q!=null)for(ke in Q.ref!==void 0&&(Fe=Q.ref),Q.key!==void 0&&(De=""+Q.key),Q)se.call(Q,ke)&&!R.hasOwnProperty(ke)&&(Ae[ke]=Q[ke]);var Ue=arguments.length-2;if(Ue===1)Ae.children=ge;else if(1<Ue){for(var He=Array(Ue),Tt=0;Tt<Ue;Tt++)He[Tt]=arguments[Tt+2];Ae.children=He}if(F&&F.defaultProps)for(ke in Ue=F.defaultProps,Ue)Ae[ke]===void 0&&(Ae[ke]=Ue[ke]);return{$$typeof:r,type:F,key:De,ref:Fe,props:Ae,_owner:re.current}}function k(F,Q){return{$$typeof:r,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function x(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function O(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ge){return Q[ge]})}var j=/\/+/g;function P(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?O(""+F.key):Q.toString(36)}function qe(F,Q,ge,ke,Ae){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Fe=!1;if(F===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(F.$$typeof){case r:case e:Fe=!0}}if(Fe)return Fe=F,Ae=Ae(Fe),F=ke===""?"."+P(Fe,0):ke,Y(Ae)?(ge="",F!=null&&(ge=F.replace(j,"$&/")+"/"),qe(Ae,Q,ge,"",function(Tt){return Tt})):Ae!=null&&(x(Ae)&&(Ae=k(Ae,ge+(!Ae.key||Fe&&Fe.key===Ae.key?"":(""+Ae.key).replace(j,"$&/")+"/")+F)),Q.push(Ae)),1;if(Fe=0,ke=ke===""?".":ke+":",Y(F))for(var Ue=0;Ue<F.length;Ue++){De=F[Ue];var He=ke+P(De,Ue);Fe+=qe(De,Q,ge,He,Ae)}else if(He=T(F),typeof He=="function")for(F=He.call(F),Ue=0;!(De=F.next()).done;)De=De.value,He=ke+P(De,Ue++),Fe+=qe(De,Q,ge,He,Ae);else if(De==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Fe}function ot(F,Q,ge){if(F==null)return F;var ke=[],Ae=0;return qe(F,ke,"","",function(De){return Q.call(ge,De,Ae++)}),ke}function et(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(ge){(F._status===0||F._status===-1)&&(F._status=1,F._result=ge)},function(ge){(F._status===0||F._status===-1)&&(F._status=2,F._result=ge)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var be={current:null},ae={transition:null},_e={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ae,ReactCurrentOwner:re};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:ot,forEach:function(F,Q,ge){ot(F,function(){Q.apply(this,arguments)},ge)},count:function(F){var Q=0;return ot(F,function(){Q++}),Q},toArray:function(F){return ot(F,function(Q){return Q})||[]},only:function(F){if(!x(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Re.Component=N,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=G,Re.StrictMode=s,Re.Suspense=p,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Re.act=ue,Re.cloneElement=function(F,Q,ge){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ke=b({},F.props),Ae=F.key,De=F.ref,Fe=F._owner;if(Q!=null){if(Q.ref!==void 0&&(De=Q.ref,Fe=re.current),Q.key!==void 0&&(Ae=""+Q.key),F.type&&F.type.defaultProps)var Ue=F.type.defaultProps;for(He in Q)se.call(Q,He)&&!R.hasOwnProperty(He)&&(ke[He]=Q[He]===void 0&&Ue!==void 0?Ue[He]:Q[He])}var He=arguments.length-2;if(He===1)ke.children=ge;else if(1<He){Ue=Array(He);for(var Tt=0;Tt<He;Tt++)Ue[Tt]=arguments[Tt+2];ke.children=Ue}return{$$typeof:r,type:F.type,key:Ae,ref:De,props:ke,_owner:Fe}},Re.createContext=function(F){return F={$$typeof:h,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Re.createElement=S,Re.createFactory=function(F){var Q=S.bind(null,F);return Q.type=F,Q},Re.createRef=function(){return{current:null}},Re.forwardRef=function(F){return{$$typeof:d,render:F}},Re.isValidElement=x,Re.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:et}},Re.memo=function(F,Q){return{$$typeof:y,type:F,compare:Q===void 0?null:Q}},Re.startTransition=function(F){var Q=ae.transition;ae.transition={};try{F()}finally{ae.transition=Q}},Re.unstable_act=ue,Re.useCallback=function(F,Q){return be.current.useCallback(F,Q)},Re.useContext=function(F){return be.current.useContext(F)},Re.useDebugValue=function(){},Re.useDeferredValue=function(F){return be.current.useDeferredValue(F)},Re.useEffect=function(F,Q){return be.current.useEffect(F,Q)},Re.useId=function(){return be.current.useId()},Re.useImperativeHandle=function(F,Q,ge){return be.current.useImperativeHandle(F,Q,ge)},Re.useInsertionEffect=function(F,Q){return be.current.useInsertionEffect(F,Q)},Re.useLayoutEffect=function(F,Q){return be.current.useLayoutEffect(F,Q)},Re.useMemo=function(F,Q){return be.current.useMemo(F,Q)},Re.useReducer=function(F,Q,ge){return be.current.useReducer(F,Q,ge)},Re.useRef=function(F){return be.current.useRef(F)},Re.useState=function(F){return be.current.useState(F)},Re.useSyncExternalStore=function(F,Q,ge){return be.current.useSyncExternalStore(F,Q,ge)},Re.useTransition=function(){return be.current.useTransition()},Re.version="18.3.1",Re}var hy;function hp(){return hy||(hy=1,Xd.exports=CE()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function kE(){if(dy)return Fa;dy=1;var r=hp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,y){var _,w={},T=null,C=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(C=p.ref);for(_ in p)s.call(p,_)&&!l.hasOwnProperty(_)&&(w[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)w[_]===void 0&&(w[_]=p[_]);return{$$typeof:e,type:d,key:T,ref:C,props:w,_owner:o.current}}return Fa.Fragment=t,Fa.jsx=h,Fa.jsxs=h,Fa}var fy;function AE(){return fy||(fy=1,Qd.exports=kE()),Qd.exports}var M=AE(),$=hp();const Mr=SE($),RE=IE({__proto__:null,default:Mr},[$]);var ju={},Yd={exports:{}},nn={},Jd={exports:{}},Zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function PE(){return py||(py=1,function(r){function e(ae,_e){var ue=ae.length;ae.push(_e);e:for(;0<ue;){var F=ue-1>>>1,Q=ae[F];if(0<o(Q,_e))ae[F]=_e,ae[ue]=Q,ue=F;else break e}}function t(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var _e=ae[0],ue=ae.pop();if(ue!==_e){ae[0]=ue;e:for(var F=0,Q=ae.length,ge=Q>>>1;F<ge;){var ke=2*(F+1)-1,Ae=ae[ke],De=ke+1,Fe=ae[De];if(0>o(Ae,ue))De<Q&&0>o(Fe,Ae)?(ae[F]=Fe,ae[De]=ue,F=De):(ae[F]=Ae,ae[ke]=ue,F=ke);else if(De<Q&&0>o(Fe,ue))ae[F]=Fe,ae[De]=ue,F=De;else break e}}return _e}function o(ae,_e){var ue=ae.sortIndex-_e.sortIndex;return ue!==0?ue:ae.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],y=[],_=1,w=null,T=3,C=!1,b=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(ae){for(var _e=t(y);_e!==null;){if(_e.callback===null)s(y);else if(_e.startTime<=ae)s(y),_e.sortIndex=_e.expirationTime,e(p,_e);else break;_e=t(y)}}function Y(ae){if(L=!1,ee(ae),!b)if(t(p)!==null)b=!0,et(se);else{var _e=t(y);_e!==null&&be(Y,_e.startTime-ae)}}function se(ae,_e){b=!1,L&&(L=!1,K(S),S=-1),C=!0;var ue=T;try{for(ee(_e),w=t(p);w!==null&&(!(w.expirationTime>_e)||ae&&!O());){var F=w.callback;if(typeof F=="function"){w.callback=null,T=w.priorityLevel;var Q=F(w.expirationTime<=_e);_e=r.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(p)&&s(p),ee(_e)}else s(p);w=t(p)}if(w!==null)var ge=!0;else{var ke=t(y);ke!==null&&be(Y,ke.startTime-_e),ge=!1}return ge}finally{w=null,T=ue,C=!1}}var re=!1,R=null,S=-1,k=5,x=-1;function O(){return!(r.unstable_now()-x<k)}function j(){if(R!==null){var ae=r.unstable_now();x=ae;var _e=!0;try{_e=R(!0,ae)}finally{_e?P():(re=!1,R=null)}}else re=!1}var P;if(typeof G=="function")P=function(){G(j)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,ot=qe.port2;qe.port1.onmessage=j,P=function(){ot.postMessage(null)}}else P=function(){N(j,0)};function et(ae){R=ae,re||(re=!0,P())}function be(ae,_e){S=N(function(){ae(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){b||C||(b=!0,et(se))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(ae){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var ue=T;T=_e;try{return ae()}finally{T=ue}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,_e){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ue=T;T=ae;try{return _e()}finally{T=ue}},r.unstable_scheduleCallback=function(ae,_e,ue){var F=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?F+ue:F):ue=F,ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ue+Q,ae={id:_++,callback:_e,priorityLevel:ae,startTime:ue,expirationTime:Q,sortIndex:-1},ue>F?(ae.sortIndex=ue,e(y,ae),t(p)===null&&ae===t(y)&&(L?(K(S),S=-1):L=!0,be(Y,ue-F))):(ae.sortIndex=Q,e(p,ae),b||C||(b=!0,et(se))),ae},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(ae){var _e=T;return function(){var ue=T;T=_e;try{return ae.apply(this,arguments)}finally{T=ue}}}}(Zd)),Zd}var my;function xE(){return my||(my=1,Jd.exports=PE()),Jd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function NE(){if(gy)return nn;gy=1;var r=hp(),e=xE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function T(n){return p.call(w,n)?!0:p.call(_,n)?!1:y.test(n)?w[n]=!0:(_[n]=!0,!1)}function C(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,i,a,c){if(i===null||typeof i>"u"||C(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function L(n,i,a,c,f,g,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=E}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){N[n]=new L(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];N[i]=new L(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){N[n]=new L(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){N[n]=new L(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){N[n]=new L(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){N[n]=new L(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){N[n]=new L(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){N[n]=new L(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){N[n]=new L(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(K,G);N[i]=new L(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(K,G);N[i]=new L(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(K,G);N[i]=new L(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){N[n]=new L(n,1,!1,n.toLowerCase(),null,!1,!1)}),N.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){N[n]=new L(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,i,a,c){var f=N.hasOwnProperty(i)?N[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(b(i,a,f,c)&&(a=null),c||f===null?T(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),re=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ae=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var ue=Object.assign,F;function Q(n){if(F===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+n}var ge=!1;function ke(n,i){if(!n||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var c=W}Reflect.construct(n,[],i)}else{try{i.call()}catch(W){c=W}n.call(i.prototype)}else{try{throw Error()}catch(W){c=W}n()}}catch(W){if(W&&c&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),g=c.stack.split(`
`),E=f.length-1,A=g.length-1;1<=E&&0<=A&&f[E]!==g[A];)A--;for(;1<=E&&0<=A;E--,A--)if(f[E]!==g[A]){if(E!==1||A!==1)do if(E--,A--,0>A||f[E]!==g[A]){var D=`
`+f[E].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=E&&0<=A);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ae(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case re:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ot:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case et:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function Fe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function He(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(n){var i=He(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function fr(n){n._valueTracker||(n._valueTracker=Tt(n))}function Is(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=He(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Li(n,i){var a=i.checked;return ue({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ss(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Ue(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ho(n,i){i=i.checked,i!=null&&ee(n,"checked",i,!1)}function Ko(n,i){Ho(n,i);var a=Ue(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Cs(n,i.type,a):i.hasOwnProperty("defaultValue")&&Cs(n,i.type,Ue(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Il(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Cs(n,i,a){(i!=="number"||Br(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var pr=Array.isArray;function mr(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Go(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ks(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(pr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ue(a)}}function As(n,i){var a=Ue(i.value),c=Ue(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function qo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gr,Qo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,f)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=gr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function $r(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ji=["Webkit","ms","Moz","O"];Object.keys(Mi).forEach(function(n){ji.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Mi[i]=Mi[n]})});function Xo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Mi.hasOwnProperty(n)&&Mi[n]?(""+i).trim():i+"px"}function Yo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Xo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var Jo=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(n,i){if(i){if(Jo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ea(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function Rs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ps=null,yn=null,Gn=null;function xs(n){if(n=Sa(n)){if(typeof Ps!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Zl(i),Ps(n.stateNode,n.type,i))}}function qn(n){yn?Gn?Gn.push(n):Gn=[n]:yn=n}function ta(){if(yn){var n=yn,i=Gn;if(Gn=yn=null,xs(n),i)for(n=0;n<i.length;n++)xs(i[n])}}function Ui(n,i){return n(i)}function na(){}var yr=!1;function ra(n,i,a){if(yr)return n(i,a);yr=!0;try{return Ui(n,i,a)}finally{yr=!1,(yn!==null||Gn!==null)&&(na(),ta())}}function at(n,i){var a=n.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ns=!1;if(d)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Ns=!1}function zi(n,i,a,c,f,g,E,A,D){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(Z){this.onError(Z)}}var Bi=!1,bs=null,bn=!1,ia=null,Ih={onError:function(n){Bi=!0,bs=n}};function Ds(n,i,a,c,f,g,E,A,D){Bi=!1,bs=null,zi.apply(Ih,arguments)}function Sl(n,i,a,c,f,g,E,A,D){if(Ds.apply(this,arguments),Bi){if(Bi){var W=bs;Bi=!1,bs=null}else throw Error(t(198));bn||(bn=!0,ia=W)}}function Dn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function $i(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function On(n){if(Dn(n)!==n)throw Error(t(188))}function Cl(n){var i=n.alternate;if(!i){if(i=Dn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return On(f),n;if(g===c)return On(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var E=!1,A=f.child;A;){if(A===a){E=!0,a=f,c=g;break}if(A===c){E=!0,c=f,a=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===a){E=!0,a=g,c=f;break}if(A===c){E=!0,c=g,a=f;break}A=A.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function sa(n){return n=Cl(n),n!==null?Os(n):null}function Os(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Os(n);if(i!==null)return i;n=n.sibling}return null}var Vs=e.unstable_scheduleCallback,oa=e.unstable_cancelCallback,kl=e.unstable_shouldYield,Sh=e.unstable_requestPaint,Ke=e.unstable_now,Al=e.unstable_getCurrentPriorityLevel,Wi=e.unstable_ImmediatePriority,Wr=e.unstable_UserBlockingPriority,_n=e.unstable_NormalPriority,aa=e.unstable_LowPriority,Rl=e.unstable_IdlePriority,Hi=null,an=null;function Pl(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Hi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Nl,la=Math.log,xl=Math.LN2;function Nl(n){return n>>>=0,n===0?32:31-(la(n)/xl|0)|0}var Ls=64,Ms=4194304;function Hr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ki(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,E=a&268435455;if(E!==0){var A=E&~f;A!==0?c=Hr(A):(g&=E,g!==0&&(c=Hr(g)))}else E=a&~f,E!==0?c=Hr(E):g!==0&&(c=Hr(g));if(c===0)return 0;if(i!==0&&i!==c&&!(i&f)&&(f=c&-c,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Ht(i),f=1<<a,c|=n[a],i&=~f;return c}function Ch(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var E=31-Ht(g),A=1<<E,D=f[E];D===-1?(!(A&a)||A&c)&&(f[E]=Ch(A,i)):D<=i&&(n.expiredLanes|=A),g&=~A}}function ln(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gi(){var n=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),n}function Kr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Gr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Ht(i),n[i]=a}function We(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Ht(a),g=1<<f;i[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function qr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Ht(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}var xe=0;function Qr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var bl,js,Dl,Ol,Vl,ua=!1,Qn=[],Pt=null,Vn=null,Ln=null,Xr=new Map,vn=new Map,Xn=[],kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(n,i){switch(n){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Xr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(i.pointerId)}}function Qt(n,i,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Sa(i),i!==null&&js(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Ah(n,i,a,c,f){switch(i){case"focusin":return Pt=Qt(Pt,n,i,a,c,f),!0;case"dragenter":return Vn=Qt(Vn,n,i,a,c,f),!0;case"mouseover":return Ln=Qt(Ln,n,i,a,c,f),!0;case"pointerover":var g=f.pointerId;return Xr.set(g,Qt(Xr.get(g)||null,n,i,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,vn.set(g,Qt(vn.get(g)||null,n,i,a,c,f)),!0}return!1}function Ml(n){var i=Ji(n.target);if(i!==null){var a=Dn(i);if(a!==null){if(i=a.tag,i===13){if(i=$i(a),i!==null){n.blockedOn=i,Vl(n.priority,function(){Dl(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Fs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Fi=c,a.target.dispatchEvent(c),Fi=null}else return i=Sa(a),i!==null&&js(i),n.blockedOn=a,!1;i.shift()}return!0}function qi(n,i,a){vr(n)&&a.delete(i)}function jl(){ua=!1,Pt!==null&&vr(Pt)&&(Pt=null),Vn!==null&&vr(Vn)&&(Vn=null),Ln!==null&&vr(Ln)&&(Ln=null),Xr.forEach(qi),vn.forEach(qi)}function Mn(n,i){n.blockedOn===i&&(n.blockedOn=null,ua||(ua=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jl)))}function jn(n){function i(f){return Mn(f,n)}if(0<Qn.length){Mn(Qn[0],n);for(var a=1;a<Qn.length;a++){var c=Qn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Pt!==null&&Mn(Pt,n),Vn!==null&&Mn(Vn,n),Ln!==null&&Mn(Ln,n),Xr.forEach(i),vn.forEach(i),a=0;a<Xn.length;a++)c=Xn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Xn.length&&(a=Xn[0],a.blockedOn===null);)Ml(a),a.blockedOn===null&&Xn.shift()}var wr=Y.ReactCurrentBatchConfig,Yr=!0;function Je(n,i,a,c){var f=xe,g=wr.transition;wr.transition=null;try{xe=1,ca(n,i,a,c)}finally{xe=f,wr.transition=g}}function Rh(n,i,a,c){var f=xe,g=wr.transition;wr.transition=null;try{xe=4,ca(n,i,a,c)}finally{xe=f,wr.transition=g}}function ca(n,i,a,c){if(Yr){var f=Fs(n,i,a,c);if(f===null)Fh(n,i,c,Qi,a),Ll(n,c);else if(Ah(f,n,i,a,c))c.stopPropagation();else if(Ll(n,c),i&4&&-1<kh.indexOf(n)){for(;f!==null;){var g=Sa(f);if(g!==null&&bl(g),g=Fs(n,i,a,c),g===null&&Fh(n,i,c,Qi,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else Fh(n,i,c,null,a)}}var Qi=null;function Fs(n,i,a,c){if(Qi=null,n=Rs(c),n=Ji(n),n!==null)if(i=Dn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=$i(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Qi=n,null}function ha(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case Wi:return 1;case Wr:return 4;case _n:case aa:return 16;case Rl:return 536870912;default:return 16}default:return 16}}var un=null,Us=null,Xt=null;function da(){if(Xt)return Xt;var n,i=Us,a=i.length,c,f="value"in un?un.value:un.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var E=a-n;for(c=1;c<=E&&i[a-c]===f[g-c];c++);return Xt=f.slice(n,1<c?1-c:void 0)}function zs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yn(){return!0}function fa(){return!1}function xt(n){function i(a,c,f,g,E){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Yn:fa,this.isPropagationStopped=fa,this}return ue(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=xt(Fn),Jn=ue({},Fn,{view:0,detail:0}),Ph=xt(Jn),$s,Er,Jr,Xi=ue({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jr&&(Jr&&n.type==="mousemove"?($s=n.screenX-Jr.screenX,Er=n.screenY-Jr.screenY):Er=$s=0,Jr=n),$s)},movementY:function(n){return"movementY"in n?n.movementY:Er}}),Ws=xt(Xi),pa=ue({},Xi,{dataTransfer:0}),Fl=xt(pa),Hs=ue({},Jn,{relatedTarget:0}),Ks=xt(Hs),Ul=ue({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tr=xt(Ul),zl=ue({},Fn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bl=xt(zl),$l=ue({},Fn,{data:0}),ma=xt($l),Gs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Wl[n])?!!i[n]:!1}function Zn(){return Hl}var u=ue({},Jn,{key:function(n){if(n.key){var i=Gs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Kt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=xt(u),v=ue({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=xt(v),U=ue({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),H=xt(U),oe=ue({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=xt(oe),yt=ue({},Xi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=xt(yt),It=[9,13,27,32],ht=d&&"CompositionEvent"in window,wn=null;d&&"documentMode"in document&&(wn=document.documentMode);var cn=d&&"TextEvent"in window&&!wn,Yi=d&&(!ht||wn&&8<wn&&11>=wn),qs=" ",im=!1;function sm(n,i){switch(n){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function om(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qs=!1;function E0(n,i){switch(n){case"compositionend":return om(i);case"keypress":return i.which!==32?null:(im=!0,qs);case"textInput":return n=i.data,n===qs&&im?null:n;default:return null}}function T0(n,i){if(Qs)return n==="compositionend"||!ht&&sm(n,i)?(n=da(),Xt=Us=un=null,Qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Yi&&i.locale!=="ko"?null:i.data;default:return null}}var I0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function am(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!I0[n.type]:i==="textarea"}function lm(n,i,a,c){qn(c),i=Xl(i,"onChange"),0<i.length&&(a=new Bs("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ga=null,ya=null;function S0(n){km(n,0)}function Kl(n){var i=eo(n);if(Is(i))return n}function C0(n,i){if(n==="change")return i}var um=!1;if(d){var xh;if(d){var Nh="oninput"in document;if(!Nh){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Nh=typeof cm.oninput=="function"}xh=Nh}else xh=!1;um=xh&&(!document.documentMode||9<document.documentMode)}function hm(){ga&&(ga.detachEvent("onpropertychange",dm),ya=ga=null)}function dm(n){if(n.propertyName==="value"&&Kl(ya)){var i=[];lm(i,ya,n,Rs(n)),ra(S0,i)}}function k0(n,i,a){n==="focusin"?(hm(),ga=i,ya=a,ga.attachEvent("onpropertychange",dm)):n==="focusout"&&hm()}function A0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kl(ya)}function R0(n,i){if(n==="click")return Kl(i)}function P0(n,i){if(n==="input"||n==="change")return Kl(i)}function x0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Un=typeof Object.is=="function"?Object.is:x0;function _a(n,i){if(Un(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(i,f)||!Un(n[f],i[f]))return!1}return!0}function fm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pm(n,i){var a=fm(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fm(a)}}function mm(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?mm(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function gm(){for(var n=window,i=Br();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Br(n.document)}return i}function bh(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function N0(n){var i=gm(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&mm(a.ownerDocument.documentElement,a)){if(c!==null&&bh(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=pm(a,g);var E=pm(a,c);f&&E&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var b0=d&&"documentMode"in document&&11>=document.documentMode,Xs=null,Dh=null,va=null,Oh=!1;function ym(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oh||Xs==null||Xs!==Br(c)||(c=Xs,"selectionStart"in c&&bh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),va&&_a(va,c)||(va=c,c=Xl(Dh,"onSelect"),0<c.length&&(i=new Bs("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Xs)))}function Gl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ys={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},Vh={},_m={};d&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ql(n){if(Vh[n])return Vh[n];if(!Ys[n])return n;var i=Ys[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in _m)return Vh[n]=i[a];return n}var vm=ql("animationend"),wm=ql("animationiteration"),Em=ql("animationstart"),Tm=ql("transitionend"),Im=new Map,Sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,i){Im.set(n,i),l(i,[n])}for(var Lh=0;Lh<Sm.length;Lh++){var Mh=Sm[Lh],D0=Mh.toLowerCase(),O0=Mh[0].toUpperCase()+Mh.slice(1);Zr(D0,"on"+O0)}Zr(vm,"onAnimationEnd"),Zr(wm,"onAnimationIteration"),Zr(Em,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(Tm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V0=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function Cm(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Sl(c,i,void 0,n),n.currentTarget=null}function km(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var E=c.length-1;0<=E;E--){var A=c[E],D=A.instance,W=A.currentTarget;if(A=A.listener,D!==g&&f.isPropagationStopped())break e;Cm(f,A,W),g=D}else for(E=0;E<c.length;E++){if(A=c[E],D=A.instance,W=A.currentTarget,A=A.listener,D!==g&&f.isPropagationStopped())break e;Cm(f,A,W),g=D}}}if(bn)throw n=ia,bn=!1,ia=null,n}function Qe(n,i){var a=i[Hh];a===void 0&&(a=i[Hh]=new Set);var c=n+"__bubble";a.has(c)||(Am(i,n,2,!1),a.add(c))}function jh(n,i,a){var c=0;i&&(c|=4),Am(a,n,c,i)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ea(n){if(!n[Ql]){n[Ql]=!0,s.forEach(function(a){a!=="selectionchange"&&(V0.has(a)||jh(a,!1,n),jh(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ql]||(i[Ql]=!0,jh("selectionchange",!1,i))}}function Am(n,i,a,c){switch(ha(i)){case 1:var f=Je;break;case 4:f=Rh;break;default:f=ca}a=f.bind(null,i,a,n),f=void 0,!Ns||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Fh(n,i,a,c,f){var g=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;E=E.return}for(;A!==null;){if(E=Ji(A),E===null)return;if(D=E.tag,D===5||D===6){c=g=E;continue e}A=A.parentNode}}c=c.return}ra(function(){var W=g,Z=Rs(a),te=[];e:{var J=Im.get(n);if(J!==void 0){var le=Bs,fe=n;switch(n){case"keypress":if(zs(a)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":fe="focus",le=Ks;break;case"focusout":fe="blur",le=Ks;break;case"beforeblur":case"afterblur":le=Ks;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=H;break;case vm:case wm:case Em:le=Tr;break;case Tm:le=$e;break;case"scroll":le=Ph;break;case"wheel":le=Oe;break;case"copy":case"cut":case"paste":le=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var pe=(i&4)!==0,lt=!pe&&n==="scroll",z=pe?J!==null?J+"Capture":null:J;pe=[];for(var V=W,B;V!==null;){B=V;var ie=B.stateNode;if(B.tag===5&&ie!==null&&(B=ie,z!==null&&(ie=at(V,z),ie!=null&&pe.push(Ta(V,ie,B)))),lt)break;V=V.return}0<pe.length&&(J=new le(J,fe,null,a,Z),te.push({event:J,listeners:pe}))}}if(!(i&7)){e:{if(J=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",J&&a!==Fi&&(fe=a.relatedTarget||a.fromElement)&&(Ji(fe)||fe[Ir]))break e;if((le||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,le?(fe=a.relatedTarget||a.toElement,le=W,fe=fe?Ji(fe):null,fe!==null&&(lt=Dn(fe),fe!==lt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=W),le!==fe)){if(pe=Ws,ie="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(pe=I,ie="onPointerLeave",z="onPointerEnter",V="pointer"),lt=le==null?J:eo(le),B=fe==null?J:eo(fe),J=new pe(ie,V+"leave",le,a,Z),J.target=lt,J.relatedTarget=B,ie=null,Ji(Z)===W&&(pe=new pe(z,V+"enter",fe,a,Z),pe.target=B,pe.relatedTarget=lt,ie=pe),lt=ie,le&&fe)t:{for(pe=le,z=fe,V=0,B=pe;B;B=Js(B))V++;for(B=0,ie=z;ie;ie=Js(ie))B++;for(;0<V-B;)pe=Js(pe),V--;for(;0<B-V;)z=Js(z),B--;for(;V--;){if(pe===z||z!==null&&pe===z.alternate)break t;pe=Js(pe),z=Js(z)}pe=null}else pe=null;le!==null&&Rm(te,J,le,pe,!1),fe!==null&&lt!==null&&Rm(te,lt,fe,pe,!0)}}e:{if(J=W?eo(W):window,le=J.nodeName&&J.nodeName.toLowerCase(),le==="select"||le==="input"&&J.type==="file")var me=C0;else if(am(J))if(um)me=P0;else{me=A0;var ve=k0}else(le=J.nodeName)&&le.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(me=R0);if(me&&(me=me(n,W))){lm(te,me,a,Z);break e}ve&&ve(n,J,W),n==="focusout"&&(ve=J._wrapperState)&&ve.controlled&&J.type==="number"&&Cs(J,"number",J.value)}switch(ve=W?eo(W):window,n){case"focusin":(am(ve)||ve.contentEditable==="true")&&(Xs=ve,Dh=W,va=null);break;case"focusout":va=Dh=Xs=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,ym(te,a,Z);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":ym(te,a,Z)}var we;if(ht)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Qs?sm(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Yi&&a.locale!=="ko"&&(Qs||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Qs&&(we=da()):(un=Z,Us="value"in un?un.value:un.textContent,Qs=!0)),ve=Xl(W,Ee),0<ve.length&&(Ee=new ma(Ee,n,null,a,Z),te.push({event:Ee,listeners:ve}),we?Ee.data=we:(we=om(a),we!==null&&(Ee.data=we)))),(we=cn?E0(n,a):T0(n,a))&&(W=Xl(W,"onBeforeInput"),0<W.length&&(Z=new ma("onBeforeInput","beforeinput",null,a,Z),te.push({event:Z,listeners:W}),Z.data=we))}km(te,i)})}function Ta(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Xl(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=at(n,a),g!=null&&c.unshift(Ta(n,g,f)),g=at(n,i),g!=null&&c.push(Ta(n,g,f))),n=n.return}return c}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Rm(n,i,a,c,f){for(var g=i._reactName,E=[];a!==null&&a!==c;){var A=a,D=A.alternate,W=A.stateNode;if(D!==null&&D===c)break;A.tag===5&&W!==null&&(A=W,f?(D=at(a,g),D!=null&&E.unshift(Ta(a,D,A))):f||(D=at(a,g),D!=null&&E.push(Ta(a,D,A)))),a=a.return}E.length!==0&&n.push({event:i,listeners:E})}var L0=/\r\n?/g,M0=/\u0000|\uFFFD/g;function Pm(n){return(typeof n=="string"?n:""+n).replace(L0,`
`).replace(M0,"")}function Yl(n,i,a){if(i=Pm(i),Pm(n)!==i&&a)throw Error(t(425))}function Jl(){}var Uh=null,zh=null;function Bh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,j0=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,F0=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(n){return xm.resolve(null).then(n).catch(U0)}:$h;function U0(n){setTimeout(function(){throw n})}function Wh(n,i){var a=i,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),jn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);jn(i)}function ei(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Nm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),er="__reactFiber$"+Zs,Ia="__reactProps$"+Zs,Ir="__reactContainer$"+Zs,Hh="__reactEvents$"+Zs,z0="__reactListeners$"+Zs,B0="__reactHandles$"+Zs;function Ji(n){var i=n[er];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ir]||a[er]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Nm(n);n!==null;){if(a=n[er])return a;n=Nm(n)}return i}n=a,a=n.parentNode}return null}function Sa(n){return n=n[er]||n[Ir],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zl(n){return n[Ia]||null}var Kh=[],to=-1;function ti(n){return{current:n}}function Xe(n){0>to||(n.current=Kh[to],Kh[to]=null,to--)}function Ge(n,i){to++,Kh[to]=n.current,n.current=i}var ni={},Lt=ti(ni),Yt=ti(!1),Zi=ni;function no(n,i){var a=n.type.contextTypes;if(!a)return ni;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Jt(n){return n=n.childContextTypes,n!=null}function eu(){Xe(Yt),Xe(Lt)}function bm(n,i,a){if(Lt.current!==ni)throw Error(t(168));Ge(Lt,i),Ge(Yt,a)}function Dm(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(t(108,Fe(n)||"Unknown",f));return ue({},a,c)}function tu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ni,Zi=Lt.current,Ge(Lt,n),Ge(Yt,Yt.current),!0}function Om(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Dm(n,i,Zi),c.__reactInternalMemoizedMergedChildContext=n,Xe(Yt),Xe(Lt),Ge(Lt,n)):Xe(Yt),Ge(Yt,a)}var Sr=null,nu=!1,Gh=!1;function Vm(n){Sr===null?Sr=[n]:Sr.push(n)}function $0(n){nu=!0,Vm(n)}function ri(){if(!Gh&&Sr!==null){Gh=!0;var n=0,i=xe;try{var a=Sr;for(xe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Sr=null,nu=!1}catch(f){throw Sr!==null&&(Sr=Sr.slice(n+1)),Vs(Wi,ri),f}finally{xe=i,Gh=!1}}return null}var ro=[],io=0,ru=null,iu=0,En=[],Tn=0,es=null,Cr=1,kr="";function ts(n,i){ro[io++]=iu,ro[io++]=ru,ru=n,iu=i}function Lm(n,i,a){En[Tn++]=Cr,En[Tn++]=kr,En[Tn++]=es,es=n;var c=Cr;n=kr;var f=32-Ht(c)-1;c&=~(1<<f),a+=1;var g=32-Ht(i)+f;if(30<g){var E=f-f%5;g=(c&(1<<E)-1).toString(32),c>>=E,f-=E,Cr=1<<32-Ht(i)+f|a<<f|c,kr=g+n}else Cr=1<<g|a<<f|c,kr=n}function qh(n){n.return!==null&&(ts(n,1),Lm(n,1,0))}function Qh(n){for(;n===ru;)ru=ro[--io],ro[io]=null,iu=ro[--io],ro[io]=null;for(;n===es;)es=En[--Tn],En[Tn]=null,kr=En[--Tn],En[Tn]=null,Cr=En[--Tn],En[Tn]=null}var hn=null,dn=null,Ze=!1,zn=null;function Mm(n,i){var a=kn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function jm(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,hn=n,dn=ei(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,hn=n,dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=es!==null?{id:Cr,overflow:kr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=kn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function Xh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Yh(n){if(Ze){var i=dn;if(i){var a=i;if(!jm(n,i)){if(Xh(n))throw Error(t(418));i=ei(a.nextSibling);var c=hn;i&&jm(n,i)?Mm(c,a):(n.flags=n.flags&-4097|2,Ze=!1,hn=n)}}else{if(Xh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,hn=n}}}function Fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function su(n){if(n!==hn)return!1;if(!Ze)return Fm(n),Ze=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Bh(n.type,n.memoizedProps)),i&&(i=dn)){if(Xh(n))throw Um(),Error(t(418));for(;i;)Mm(n,i),i=ei(i.nextSibling)}if(Fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){dn=ei(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}dn=null}}else dn=hn?ei(n.stateNode.nextSibling):null;return!0}function Um(){for(var n=dn;n;)n=ei(n.nextSibling)}function so(){dn=hn=null,Ze=!1}function Jh(n){zn===null?zn=[n]:zn.push(n)}var W0=Y.ReactCurrentBatchConfig;function Ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(E){var A=f.refs;E===null?delete A[g]:A[g]=E},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ou(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function zm(n){var i=n._init;return i(n._payload)}function Bm(n){function i(z,V){if(n){var B=z.deletions;B===null?(z.deletions=[V],z.flags|=16):B.push(V)}}function a(z,V){if(!n)return null;for(;V!==null;)i(z,V),V=V.sibling;return null}function c(z,V){for(z=new Map;V!==null;)V.key!==null?z.set(V.key,V):z.set(V.index,V),V=V.sibling;return z}function f(z,V){return z=hi(z,V),z.index=0,z.sibling=null,z}function g(z,V,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<V?(z.flags|=2,V):B):(z.flags|=2,V)):(z.flags|=1048576,V)}function E(z){return n&&z.alternate===null&&(z.flags|=2),z}function A(z,V,B,ie){return V===null||V.tag!==6?(V=$d(B,z.mode,ie),V.return=z,V):(V=f(V,B),V.return=z,V)}function D(z,V,B,ie){var me=B.type;return me===R?Z(z,V,B.props.children,ie,B.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===et&&zm(me)===V.type)?(ie=f(V,B.props),ie.ref=Ca(z,V,B),ie.return=z,ie):(ie=xu(B.type,B.key,B.props,null,z.mode,ie),ie.ref=Ca(z,V,B),ie.return=z,ie)}function W(z,V,B,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Wd(B,z.mode,ie),V.return=z,V):(V=f(V,B.children||[]),V.return=z,V)}function Z(z,V,B,ie,me){return V===null||V.tag!==7?(V=us(B,z.mode,ie,me),V.return=z,V):(V=f(V,B),V.return=z,V)}function te(z,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=$d(""+V,z.mode,B),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case se:return B=xu(V.type,V.key,V.props,null,z.mode,B),B.ref=Ca(z,null,V),B.return=z,B;case re:return V=Wd(V,z.mode,B),V.return=z,V;case et:var ie=V._init;return te(z,ie(V._payload),B)}if(pr(V)||_e(V))return V=us(V,z.mode,B,null),V.return=z,V;ou(z,V)}return null}function J(z,V,B,ie){var me=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:A(z,V,""+B,ie);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case se:return B.key===me?D(z,V,B,ie):null;case re:return B.key===me?W(z,V,B,ie):null;case et:return me=B._init,J(z,V,me(B._payload),ie)}if(pr(B)||_e(B))return me!==null?null:Z(z,V,B,ie,null);ou(z,B)}return null}function le(z,V,B,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return z=z.get(B)||null,A(V,z,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case se:return z=z.get(ie.key===null?B:ie.key)||null,D(V,z,ie,me);case re:return z=z.get(ie.key===null?B:ie.key)||null,W(V,z,ie,me);case et:var ve=ie._init;return le(z,V,B,ve(ie._payload),me)}if(pr(ie)||_e(ie))return z=z.get(B)||null,Z(V,z,ie,me,null);ou(V,ie)}return null}function fe(z,V,B,ie){for(var me=null,ve=null,we=V,Ee=V=0,kt=null;we!==null&&Ee<B.length;Ee++){we.index>Ee?(kt=we,we=null):kt=we.sibling;var je=J(z,we,B[Ee],ie);if(je===null){we===null&&(we=kt);break}n&&we&&je.alternate===null&&i(z,we),V=g(je,V,Ee),ve===null?me=je:ve.sibling=je,ve=je,we=kt}if(Ee===B.length)return a(z,we),Ze&&ts(z,Ee),me;if(we===null){for(;Ee<B.length;Ee++)we=te(z,B[Ee],ie),we!==null&&(V=g(we,V,Ee),ve===null?me=we:ve.sibling=we,ve=we);return Ze&&ts(z,Ee),me}for(we=c(z,we);Ee<B.length;Ee++)kt=le(we,z,Ee,B[Ee],ie),kt!==null&&(n&&kt.alternate!==null&&we.delete(kt.key===null?Ee:kt.key),V=g(kt,V,Ee),ve===null?me=kt:ve.sibling=kt,ve=kt);return n&&we.forEach(function(di){return i(z,di)}),Ze&&ts(z,Ee),me}function pe(z,V,B,ie){var me=_e(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var ve=me=null,we=V,Ee=V=0,kt=null,je=B.next();we!==null&&!je.done;Ee++,je=B.next()){we.index>Ee?(kt=we,we=null):kt=we.sibling;var di=J(z,we,je.value,ie);if(di===null){we===null&&(we=kt);break}n&&we&&di.alternate===null&&i(z,we),V=g(di,V,Ee),ve===null?me=di:ve.sibling=di,ve=di,we=kt}if(je.done)return a(z,we),Ze&&ts(z,Ee),me;if(we===null){for(;!je.done;Ee++,je=B.next())je=te(z,je.value,ie),je!==null&&(V=g(je,V,Ee),ve===null?me=je:ve.sibling=je,ve=je);return Ze&&ts(z,Ee),me}for(we=c(z,we);!je.done;Ee++,je=B.next())je=le(we,z,Ee,je.value,ie),je!==null&&(n&&je.alternate!==null&&we.delete(je.key===null?Ee:je.key),V=g(je,V,Ee),ve===null?me=je:ve.sibling=je,ve=je);return n&&we.forEach(function(TE){return i(z,TE)}),Ze&&ts(z,Ee),me}function lt(z,V,B,ie){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case se:e:{for(var me=B.key,ve=V;ve!==null;){if(ve.key===me){if(me=B.type,me===R){if(ve.tag===7){a(z,ve.sibling),V=f(ve,B.props.children),V.return=z,z=V;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===et&&zm(me)===ve.type){a(z,ve.sibling),V=f(ve,B.props),V.ref=Ca(z,ve,B),V.return=z,z=V;break e}a(z,ve);break}else i(z,ve);ve=ve.sibling}B.type===R?(V=us(B.props.children,z.mode,ie,B.key),V.return=z,z=V):(ie=xu(B.type,B.key,B.props,null,z.mode,ie),ie.ref=Ca(z,V,B),ie.return=z,z=ie)}return E(z);case re:e:{for(ve=B.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(z,V.sibling),V=f(V,B.children||[]),V.return=z,z=V;break e}else{a(z,V);break}else i(z,V);V=V.sibling}V=Wd(B,z.mode,ie),V.return=z,z=V}return E(z);case et:return ve=B._init,lt(z,V,ve(B._payload),ie)}if(pr(B))return fe(z,V,B,ie);if(_e(B))return pe(z,V,B,ie);ou(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(a(z,V.sibling),V=f(V,B),V.return=z,z=V):(a(z,V),V=$d(B,z.mode,ie),V.return=z,z=V),E(z)):a(z,V)}return lt}var oo=Bm(!0),$m=Bm(!1),au=ti(null),lu=null,ao=null,Zh=null;function ed(){Zh=ao=lu=null}function td(n){var i=au.current;Xe(au),n._currentValue=i}function nd(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function lo(n,i){lu=n,Zh=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Zt=!0),n.firstContext=null)}function In(n){var i=n._currentValue;if(Zh!==n)if(n={context:n,memoizedValue:i,next:null},ao===null){if(lu===null)throw Error(t(308));ao=n,lu.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return i}var ns=null;function rd(n){ns===null?ns=[n]:ns.push(n)}function Wm(n,i,a,c){var f=i.interleaved;return f===null?(a.next=a,rd(i)):(a.next=f.next,f.next=a),i.interleaved=a,Ar(n,c)}function Ar(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ii=!1;function id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Rr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function si(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Me&2){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,Ar(n,a)}return f=c.interleaved,f===null?(i.next=i,rd(c)):(i.next=f.next,f.next=i),c.interleaved=i,Ar(n,a)}function uu(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,qr(n,a)}}function Km(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function cu(n,i,a,c){var f=n.updateQueue;ii=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,W=D.next;D.next=null,E===null?g=W:E.next=W,E=D;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==E&&(A===null?Z.firstBaseUpdate=W:A.next=W,Z.lastBaseUpdate=D))}if(g!==null){var te=f.baseState;E=0,Z=W=D=null,A=g;do{var J=A.lane,le=A.eventTime;if((c&J)===J){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=n,pe=A;switch(J=i,le=a,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){te=fe.call(le,te,J);break e}te=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,J=typeof fe=="function"?fe.call(le,te,J):fe,J==null)break e;te=ue({},te,J);break e;case 2:ii=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,J=f.effects,J===null?f.effects=[A]:J.push(A))}else le={eventTime:le,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(W=Z=le,D=te):Z=Z.next=le,E|=J;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;J=A,A=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(Z===null&&(D=te),f.baseState=D,f.firstBaseUpdate=W,f.lastBaseUpdate=Z,i=f.shared.interleaved,i!==null){f=i;do E|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);ss|=E,n.lanes=E,n.memoizedState=te}}function Gm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ka={},tr=ti(ka),Aa=ti(ka),Ra=ti(ka);function rs(n){if(n===ka)throw Error(t(174));return n}function sd(n,i){switch(Ge(Ra,i),Ge(Aa,n),Ge(tr,ka),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:gt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=gt(i,n)}Xe(tr),Ge(tr,i)}function uo(){Xe(tr),Xe(Aa),Xe(Ra)}function qm(n){rs(Ra.current);var i=rs(tr.current),a=gt(i,n.type);i!==a&&(Ge(Aa,n),Ge(tr,a))}function od(n){Aa.current===n&&(Xe(tr),Xe(Aa))}var tt=ti(0);function hu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ad=[];function ld(){for(var n=0;n<ad.length;n++)ad[n]._workInProgressVersionPrimary=null;ad.length=0}var du=Y.ReactCurrentDispatcher,ud=Y.ReactCurrentBatchConfig,is=0,nt=null,_t=null,St=null,fu=!1,Pa=!1,xa=0,H0=0;function Mt(){throw Error(t(321))}function cd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Un(n[a],i[a]))return!1;return!0}function hd(n,i,a,c,f,g){if(is=g,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,du.current=n===null||n.memoizedState===null?Q0:X0,n=a(c,f),Pa){g=0;do{if(Pa=!1,xa=0,25<=g)throw Error(t(301));g+=1,St=_t=null,i.updateQueue=null,du.current=Y0,n=a(c,f)}while(Pa)}if(du.current=gu,i=_t!==null&&_t.next!==null,is=0,St=_t=nt=null,fu=!1,i)throw Error(t(300));return n}function dd(){var n=xa!==0;return xa=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?nt.memoizedState=St=n:St=St.next=n,St}function Sn(){if(_t===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=St===null?nt.memoizedState:St.next;if(i!==null)St=i,_t=n;else{if(n===null)throw Error(t(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?nt.memoizedState=St=n:St=St.next=n}return St}function Na(n,i){return typeof i=="function"?i(n):i}function fd(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=_t,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var A=E=null,D=null,W=g;do{var Z=W.lane;if((is&Z)===Z)D!==null&&(D=D.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),c=W.hasEagerState?W.eagerState:n(c,W.action);else{var te={lane:Z,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};D===null?(A=D=te,E=c):D=D.next=te,nt.lanes|=Z,ss|=Z}W=W.next}while(W!==null&&W!==g);D===null?E=c:D.next=A,Un(c,i.memoizedState)||(Zt=!0),i.memoizedState=c,i.baseState=E,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,nt.lanes|=g,ss|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function pd(n){var i=Sn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);Un(g,i.memoizedState)||(Zt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Qm(){}function Xm(n,i){var a=nt,c=Sn(),f=i(),g=!Un(c.memoizedState,f);if(g&&(c.memoizedState=f,Zt=!0),c=c.queue,md(Zm.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,ba(9,Jm.bind(null,a,c,f,i),void 0,null),Ct===null)throw Error(t(349));is&30||Ym(a,i,f)}return f}function Ym(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Jm(n,i,a,c){i.value=a,i.getSnapshot=c,eg(i)&&tg(n)}function Zm(n,i,a){return a(function(){eg(i)&&tg(n)})}function eg(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Un(n,a)}catch{return!0}}function tg(n){var i=Ar(n,1);i!==null&&Hn(i,n,1,-1)}function ng(n){var i=nr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},i.queue=n,n=n.dispatch=q0.bind(null,nt,n),[i.memoizedState,n]}function ba(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function rg(){return Sn().memoizedState}function pu(n,i,a,c){var f=nr();nt.flags|=n,f.memoizedState=ba(1|i,a,void 0,c===void 0?null:c)}function mu(n,i,a,c){var f=Sn();c=c===void 0?null:c;var g=void 0;if(_t!==null){var E=_t.memoizedState;if(g=E.destroy,c!==null&&cd(c,E.deps)){f.memoizedState=ba(i,a,g,c);return}}nt.flags|=n,f.memoizedState=ba(1|i,a,g,c)}function ig(n,i){return pu(8390656,8,n,i)}function md(n,i){return mu(2048,8,n,i)}function sg(n,i){return mu(4,2,n,i)}function og(n,i){return mu(4,4,n,i)}function ag(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function lg(n,i,a){return a=a!=null?a.concat([n]):null,mu(4,4,ag.bind(null,i,n),a)}function gd(){}function ug(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&cd(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function cg(n,i){var a=Sn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&cd(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function hg(n,i,a){return is&21?(Un(a,i)||(a=Gi(),nt.lanes|=a,ss|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a)}function K0(n,i){var a=xe;xe=a!==0&&4>a?a:4,n(!0);var c=ud.transition;ud.transition={};try{n(!1),i()}finally{xe=a,ud.transition=c}}function dg(){return Sn().memoizedState}function G0(n,i,a){var c=ui(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},fg(n))pg(i,a);else if(a=Wm(n,i,a,c),a!==null){var f=qt();Hn(a,n,c,f),mg(a,i,c)}}function q0(n,i,a){var c=ui(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(fg(n))pg(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,A=g(E,a);if(f.hasEagerState=!0,f.eagerState=A,Un(A,E)){var D=i.interleaved;D===null?(f.next=f,rd(i)):(f.next=D.next,D.next=f),i.interleaved=f;return}}catch{}finally{}a=Wm(n,i,f,c),a!==null&&(f=qt(),Hn(a,n,c,f),mg(a,i,c))}}function fg(n){var i=n.alternate;return n===nt||i!==null&&i===nt}function pg(n,i){Pa=fu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function mg(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,qr(n,a)}}var gu={readContext:In,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Q0={readContext:In,useCallback:function(n,i){return nr().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:ig,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,pu(4194308,4,ag.bind(null,i,n),a)},useLayoutEffect:function(n,i){return pu(4194308,4,n,i)},useInsertionEffect:function(n,i){return pu(4,2,n,i)},useMemo:function(n,i){var a=nr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=nr();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=G0.bind(null,nt,n),[c.memoizedState,n]},useRef:function(n){var i=nr();return n={current:n},i.memoizedState=n},useState:ng,useDebugValue:gd,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=ng(!1),i=n[0];return n=K0.bind(null,n[1]),nr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=nt,f=nr();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ct===null)throw Error(t(349));is&30||Ym(c,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,ig(Zm.bind(null,c,g,n),[n]),c.flags|=2048,ba(9,Jm.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=nr(),i=Ct.identifierPrefix;if(Ze){var a=kr,c=Cr;a=(c&~(1<<32-Ht(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=xa++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=H0++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},X0={readContext:In,useCallback:ug,useContext:In,useEffect:md,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:fd,useRef:rg,useState:function(){return fd(Na)},useDebugValue:gd,useDeferredValue:function(n){var i=Sn();return hg(i,_t.memoizedState,n)},useTransition:function(){var n=fd(Na)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:Qm,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1},Y0={readContext:In,useCallback:ug,useContext:In,useEffect:md,useImperativeHandle:lg,useInsertionEffect:sg,useLayoutEffect:og,useMemo:cg,useReducer:pd,useRef:rg,useState:function(){return pd(Na)},useDebugValue:gd,useDeferredValue:function(n){var i=Sn();return _t===null?i.memoizedState=n:hg(i,_t.memoizedState,n)},useTransition:function(){var n=pd(Na)[0],i=Sn().memoizedState;return[n,i]},useMutableSource:Qm,useSyncExternalStore:Xm,useId:dg,unstable_isNewReconciler:!1};function Bn(n,i){if(n&&n.defaultProps){i=ue({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function yd(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ue({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yu={isMounted:function(n){return(n=n._reactInternals)?Dn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=qt(),f=ui(n),g=Rr(c,f);g.payload=i,a!=null&&(g.callback=a),i=si(n,g,f),i!==null&&(Hn(i,n,f,c),uu(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=qt(),f=ui(n),g=Rr(c,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=si(n,g,f),i!==null&&(Hn(i,n,f,c),uu(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=qt(),c=ui(n),f=Rr(a,c);f.tag=2,i!=null&&(f.callback=i),i=si(n,f,c),i!==null&&(Hn(i,n,c,a),uu(i,n,c))}};function gg(n,i,a,c,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,E):i.prototype&&i.prototype.isPureReactComponent?!_a(a,c)||!_a(f,g):!0}function yg(n,i,a){var c=!1,f=ni,g=i.contextType;return typeof g=="object"&&g!==null?g=In(g):(f=Jt(i)?Zi:Lt.current,c=i.contextTypes,g=(c=c!=null)?no(n,f):ni),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=yu,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),i}function _g(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&yu.enqueueReplaceState(i,i.state,null)}function _d(n,i,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},id(n);var g=i.contextType;typeof g=="object"&&g!==null?f.context=In(g):(g=Jt(i)?Zi:Lt.current,f.context=no(n,g)),f.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(yd(n,i,g,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&yu.enqueueReplaceState(f,f.state,null),cu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,i){try{var a="",c=i;do a+=Ae(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:f,digest:null}}function vd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function wd(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var J0=typeof WeakMap=="function"?WeakMap:Map;function vg(n,i,a){a=Rr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Su||(Su=!0,Vd=c),wd(n,i)},a}function wg(n,i,a){a=Rr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){wd(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){wd(n,i),typeof c!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),a}function Eg(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new J0;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),n=dE.bind(null,n,i,a),i.then(n,n))}function Tg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Ig(n,i,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Rr(-1,1),i.tag=2,si(a,i,1))),a.lanes|=1),n)}var Z0=Y.ReactCurrentOwner,Zt=!1;function Gt(n,i,a,c){i.child=n===null?$m(i,null,a,c):oo(i,n.child,a,c)}function Sg(n,i,a,c,f){a=a.render;var g=i.ref;return lo(i,f),c=hd(n,i,a,c,g,f),a=dd(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Pr(n,i,f)):(Ze&&a&&qh(i),i.flags|=1,Gt(n,i,c,f),i.child)}function Cg(n,i,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!Bd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,kg(n,i,g,c,f)):(n=xu(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!(n.lanes&f)){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:_a,a(E,c)&&n.ref===i.ref)return Pr(n,i,f)}return i.flags|=1,n=hi(g,c),n.ref=i.ref,n.return=i,i.child=n}function kg(n,i,a,c,f){if(n!==null){var g=n.memoizedProps;if(_a(g,c)&&n.ref===i.ref)if(Zt=!1,i.pendingProps=c=g,(n.lanes&f)!==0)n.flags&131072&&(Zt=!0);else return i.lanes=n.lanes,Pr(n,i,f)}return Ed(n,i,a,c,f)}function Ag(n,i,a){var c=i.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(fo,fn),fn|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ge(fo,fn),fn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ge(fo,fn),fn|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,Ge(fo,fn),fn|=c;return Gt(n,i,f,a),i.child}function Rg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Ed(n,i,a,c,f){var g=Jt(a)?Zi:Lt.current;return g=no(i,g),lo(i,f),a=hd(n,i,a,c,g,f),c=dd(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Pr(n,i,f)):(Ze&&c&&qh(i),i.flags|=1,Gt(n,i,a,f),i.child)}function Pg(n,i,a,c,f){if(Jt(a)){var g=!0;tu(i)}else g=!1;if(lo(i,f),i.stateNode===null)vu(n,i),yg(i,a,c),_d(i,a,c,f),c=!0;else if(n===null){var E=i.stateNode,A=i.memoizedProps;E.props=A;var D=E.context,W=a.contextType;typeof W=="object"&&W!==null?W=In(W):(W=Jt(a)?Zi:Lt.current,W=no(i,W));var Z=a.getDerivedStateFromProps,te=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==c||D!==W)&&_g(i,E,c,W),ii=!1;var J=i.memoizedState;E.state=J,cu(i,c,E,f),D=i.memoizedState,A!==c||J!==D||Yt.current||ii?(typeof Z=="function"&&(yd(i,a,Z,c),D=i.memoizedState),(A=ii||gg(i,a,A,c,J,D,W))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),E.props=c,E.state=D,E.context=W,c=A):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{E=i.stateNode,Hm(n,i),A=i.memoizedProps,W=i.type===i.elementType?A:Bn(i.type,A),E.props=W,te=i.pendingProps,J=E.context,D=a.contextType,typeof D=="object"&&D!==null?D=In(D):(D=Jt(a)?Zi:Lt.current,D=no(i,D));var le=a.getDerivedStateFromProps;(Z=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==te||J!==D)&&_g(i,E,c,D),ii=!1,J=i.memoizedState,E.state=J,cu(i,c,E,f);var fe=i.memoizedState;A!==te||J!==fe||Yt.current||ii?(typeof le=="function"&&(yd(i,a,le,c),fe=i.memoizedState),(W=ii||gg(i,a,W,c,J,fe,D)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(c,fe,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(c,fe,D)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=fe),E.props=c,E.state=fe,E.context=D,c=W):(typeof E.componentDidUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return Td(n,i,a,c,g,f)}function Td(n,i,a,c,f,g){Rg(n,i);var E=(i.flags&128)!==0;if(!c&&!E)return f&&Om(i,a,!1),Pr(n,i,g);c=i.stateNode,Z0.current=i;var A=E&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&E?(i.child=oo(i,n.child,null,g),i.child=oo(i,null,A,g)):Gt(n,i,A,g),i.memoizedState=c.state,f&&Om(i,a,!0),i.child}function xg(n){var i=n.stateNode;i.pendingContext?bm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&bm(n,i.context,!1),sd(n,i.containerInfo)}function Ng(n,i,a,c,f){return so(),Jh(f),i.flags|=256,Gt(n,i,a,c),i.child}var Id={dehydrated:null,treeContext:null,retryLane:0};function Sd(n){return{baseLanes:n,cachePool:null,transitions:null}}function bg(n,i,a){var c=i.pendingProps,f=tt.current,g=!1,E=(i.flags&128)!==0,A;if((A=E)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ge(tt,f&1),n===null)return Yh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(E=c.children,n=c.fallback,g?(c=i.mode,g=i.child,E={mode:"hidden",children:E},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Nu(E,c,0,null),n=us(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Sd(a),i.memoizedState=Id,n):Cd(i,E));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return eE(n,i,E,c,A,f,a);if(g){g=c.fallback,E=i.mode,f=n.child,A=f.sibling;var D={mode:"hidden",children:c.children};return!(E&1)&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=hi(f,D),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=hi(A,g):(g=us(g,E,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,E=n.child.memoizedState,E=E===null?Sd(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=n.childLanes&~a,i.memoizedState=Id,c}return g=n.child,n=g.sibling,c=hi(g,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function Cd(n,i){return i=Nu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function _u(n,i,a,c){return c!==null&&Jh(c),oo(i,n.child,null,a),n=Cd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function eE(n,i,a,c,f,g,E){if(a)return i.flags&256?(i.flags&=-257,c=vd(Error(t(422))),_u(n,i,E,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,f=i.mode,c=Nu({mode:"visible",children:c.children},f,0,null),g=us(g,f,E,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,i.mode&1&&oo(i,n.child,null,E),i.child.memoizedState=Sd(E),i.memoizedState=Id,g);if(!(i.mode&1))return _u(n,i,E,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,g=Error(t(419)),c=vd(g,c,void 0),_u(n,i,E,c)}if(A=(E&n.childLanes)!==0,Zt||A){if(c=Ct,c!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|E)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ar(n,f),Hn(c,n,f,-1))}return zd(),c=vd(Error(t(421))),_u(n,i,E,c)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=fE.bind(null,n),f._reactRetry=i,null):(n=g.treeContext,dn=ei(f.nextSibling),hn=i,Ze=!0,zn=null,n!==null&&(En[Tn++]=Cr,En[Tn++]=kr,En[Tn++]=es,Cr=n.id,kr=n.overflow,es=i),i=Cd(i,c.children),i.flags|=4096,i)}function Dg(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),nd(n.return,i,a)}function kd(n,i,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Og(n,i,a){var c=i.pendingProps,f=c.revealOrder,g=c.tail;if(Gt(n,i,c.children,a),c=tt.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dg(n,a,i);else if(n.tag===19)Dg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ge(tt,c),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&hu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),kd(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&hu(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}kd(i,!0,a,null,g);break;case"together":kd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vu(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Pr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),ss|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=hi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=hi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function tE(n,i,a){switch(i.tag){case 3:xg(i),so();break;case 5:qm(i);break;case 1:Jt(i.type)&&tu(i);break;case 4:sd(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;Ge(au,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ge(tt,tt.current&1),i.flags|=128,null):a&i.child.childLanes?bg(n,i,a):(Ge(tt,tt.current&1),n=Pr(n,i,a),n!==null?n.sibling:null);Ge(tt,tt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return Og(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ge(tt,tt.current),c)break;return null;case 22:case 23:return i.lanes=0,Ag(n,i,a)}return Pr(n,i,a)}var Vg,Ad,Lg,Mg;Vg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ad=function(){},Lg=function(n,i,a,c){var f=n.memoizedProps;if(f!==c){n=i.stateNode,rs(tr.current);var g=null;switch(a){case"input":f=Li(n,f),c=Li(n,c),g=[];break;case"select":f=ue({},f,{value:void 0}),c=ue({},c,{value:void 0}),g=[];break;case"textarea":f=Go(n,f),c=Go(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Jl)}Zo(a,c);var E;a=null;for(W in f)if(!c.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var A=f[W];for(E in A)A.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?g||(g=[]):(g=g||[]).push(W,null));for(W in c){var D=c[W];if(A=f!=null?f[W]:void 0,c.hasOwnProperty(W)&&D!==A&&(D!=null||A!=null))if(W==="style")if(A){for(E in A)!A.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in D)D.hasOwnProperty(E)&&A[E]!==D[E]&&(a||(a={}),a[E]=D[E])}else a||(g||(g=[]),g.push(W,a)),a=D;else W==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(g=g||[]).push(W,D)):W==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(W,""+D):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(D!=null&&W==="onScroll"&&Qe("scroll",n),g||A===D||(g=[])):(g=g||[]).push(W,D))}a&&(g=g||[]).push("style",a);var W=g;(i.updateQueue=W)&&(i.flags|=4)}},Mg=function(n,i,a,c){a!==c&&(i.flags|=4)};function Da(n,i){if(!Ze)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function nE(n,i,a){var c=i.pendingProps;switch(Qh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(i),null;case 1:return Jt(i.type)&&eu(),jt(i),null;case 3:return c=i.stateNode,uo(),Xe(Yt),Xe(Lt),ld(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zn!==null&&(jd(zn),zn=null))),Ad(n,i),jt(i),null;case 5:od(i);var f=rs(Ra.current);if(a=i.type,n!==null&&i.stateNode!=null)Lg(n,i,a,c,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return jt(i),null}if(n=rs(tr.current),su(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[er]=i,c[Ia]=g,n=(i.mode&1)!==0,a){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(f=0;f<wa.length;f++)Qe(wa[f],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":Ss(c,g),Qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Qe("invalid",c);break;case"textarea":ks(c,g),Qe("invalid",c)}Zo(a,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var A=g[E];E==="children"?typeof A=="string"?c.textContent!==A&&(g.suppressHydrationWarning!==!0&&Yl(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Yl(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&Qe("scroll",c)}switch(a){case"input":fr(c),Il(c,g,!0);break;case"textarea":fr(c),qo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Jl)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=E.createElement(a,{is:c.is}):(n=E.createElement(a),a==="select"&&(E=n,c.multiple?E.multiple=!0:c.size&&(E.size=c.size))):n=E.createElementNS(n,a),n[er]=i,n[Ia]=c,Vg(n,i,!1,!1),i.stateNode=n;e:{switch(E=ea(a,c),a){case"dialog":Qe("cancel",n),Qe("close",n),f=c;break;case"iframe":case"object":case"embed":Qe("load",n),f=c;break;case"video":case"audio":for(f=0;f<wa.length;f++)Qe(wa[f],n);f=c;break;case"source":Qe("error",n),f=c;break;case"img":case"image":case"link":Qe("error",n),Qe("load",n),f=c;break;case"details":Qe("toggle",n),f=c;break;case"input":Ss(n,c),f=Li(n,c),Qe("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ue({},c,{value:void 0}),Qe("invalid",n);break;case"textarea":ks(n,c),f=Go(n,c),Qe("invalid",n);break;default:f=c}Zo(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var D=A[g];g==="style"?Yo(n,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Qo(n,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&$r(n,D):typeof D=="number"&&$r(n,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&Qe("scroll",n):D!=null&&ee(n,g,D,E))}switch(a){case"input":fr(n),Il(n,c,!1);break;case"textarea":fr(n),qo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?mr(n,!!c.multiple,g,!1):c.defaultValue!=null&&mr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return jt(i),null;case 6:if(n&&i.stateNode!=null)Mg(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=rs(Ra.current),rs(tr.current),su(i)){if(c=i.stateNode,a=i.memoizedProps,c[er]=i,(g=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:Yl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yl(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[er]=i,i.stateNode=c}return jt(i),null;case 13:if(Xe(tt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&dn!==null&&i.mode&1&&!(i.flags&128))Um(),so(),i.flags|=98560,g=!1;else if(g=su(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=i}else so(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;jt(i),g=!1}else zn!==null&&(jd(zn),zn=null),g=!0;if(!g)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||tt.current&1?vt===0&&(vt=3):zd())),i.updateQueue!==null&&(i.flags|=4),jt(i),null);case 4:return uo(),Ad(n,i),n===null&&Ea(i.stateNode.containerInfo),jt(i),null;case 10:return td(i.type._context),jt(i),null;case 17:return Jt(i.type)&&eu(),jt(i),null;case 19:if(Xe(tt),g=i.memoizedState,g===null)return jt(i),null;if(c=(i.flags&128)!==0,E=g.rendering,E===null)if(c)Da(g,!1);else{if(vt!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(E=hu(n),E!==null){for(i.flags|=128,Da(g,!1),c=E.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,n=E.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(tt,tt.current&1|2),i.child}n=n.sibling}g.tail!==null&&Ke()>po&&(i.flags|=128,c=!0,Da(g,!1),i.lanes=4194304)}else{if(!c)if(n=hu(E),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Da(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ze)return jt(i),null}else 2*Ke()-g.renderingStartTime>po&&a!==1073741824&&(i.flags|=128,c=!0,Da(g,!1),i.lanes=4194304);g.isBackwards?(E.sibling=i.child,i.child=E):(a=g.last,a!==null?a.sibling=E:i.child=E,g.last=E)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Ke(),i.sibling=null,a=tt.current,Ge(tt,c?a&1|2:a&1),i):(jt(i),null);case 22:case 23:return Ud(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?fn&1073741824&&(jt(i),i.subtreeFlags&6&&(i.flags|=8192)):jt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function rE(n,i){switch(Qh(i),i.tag){case 1:return Jt(i.type)&&eu(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return uo(),Xe(Yt),Xe(Lt),ld(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return od(i),null;case 13:if(Xe(tt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));so()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Xe(tt),null;case 4:return uo(),null;case 10:return td(i.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var wu=!1,Ft=!1,iE=typeof WeakSet=="function"?WeakSet:Set,de=null;function ho(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(n,i,c)}else a.current=null}function Rd(n,i,a){try{a()}catch(c){it(n,i,c)}}var jg=!1;function sE(n,i){if(Uh=Yr,n=gm(),bh(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,A=-1,D=-1,W=0,Z=0,te=n,J=null;t:for(;;){for(var le;te!==a||f!==0&&te.nodeType!==3||(A=E+f),te!==g||c!==0&&te.nodeType!==3||(D=E+c),te.nodeType===3&&(E+=te.nodeValue.length),(le=te.firstChild)!==null;)J=te,te=le;for(;;){if(te===n)break t;if(J===a&&++W===f&&(A=E),J===g&&++Z===c&&(D=E),(le=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=le}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(zh={focusedElem:n,selectionRange:a},Yr=!1,de=i;de!==null;)if(i=de,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,de=n;else for(;de!==null;){i=de;try{var fe=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,lt=fe.memoizedState,z=i.stateNode,V=z.getSnapshotBeforeUpdate(i.elementType===i.type?pe:Bn(i.type,pe),lt);z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){it(i,i.return,ie)}if(n=i.sibling,n!==null){n.return=i.return,de=n;break}de=i.return}return fe=jg,jg=!1,fe}function Oa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Rd(i,a,g)}f=f.next}while(f!==c)}}function Eu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Pd(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Fg(n){var i=n.alternate;i!==null&&(n.alternate=null,Fg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[er],delete i[Ia],delete i[Hh],delete i[z0],delete i[B0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ug(n){return n.tag===5||n.tag===3||n.tag===4}function zg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ug(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Jl));else if(c!==4&&(n=n.child,n!==null))for(xd(n,i,a),n=n.sibling;n!==null;)xd(n,i,a),n=n.sibling}function Nd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Nd(n,i,a),n=n.sibling;n!==null;)Nd(n,i,a),n=n.sibling}var Nt=null,$n=!1;function oi(n,i,a){for(a=a.child;a!==null;)Bg(n,i,a),a=a.sibling}function Bg(n,i,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Hi,a)}catch{}switch(a.tag){case 5:Ft||ho(a,i);case 6:var c=Nt,f=$n;Nt=null,oi(n,i,a),Nt=c,$n=f,Nt!==null&&($n?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&($n?(n=Nt,a=a.stateNode,n.nodeType===8?Wh(n.parentNode,a):n.nodeType===1&&Wh(n,a),jn(n)):Wh(Nt,a.stateNode));break;case 4:c=Nt,f=$n,Nt=a.stateNode.containerInfo,$n=!0,oi(n,i,a),Nt=c,$n=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&(g&2||g&4)&&Rd(a,i,E),f=f.next}while(f!==c)}oi(n,i,a);break;case 1:if(!Ft&&(ho(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){it(a,i,A)}oi(n,i,a);break;case 21:oi(n,i,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,oi(n,i,a),Ft=c):oi(n,i,a);break;default:oi(n,i,a)}}function $g(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new iE),i.forEach(function(c){var f=pE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Wn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,E=i,A=E;e:for(;A!==null;){switch(A.tag){case 5:Nt=A.stateNode,$n=!1;break e;case 3:Nt=A.stateNode.containerInfo,$n=!0;break e;case 4:Nt=A.stateNode.containerInfo,$n=!0;break e}A=A.return}if(Nt===null)throw Error(t(160));Bg(g,E,f),Nt=null,$n=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(W){it(f,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Wg(i,n),i=i.sibling}function Wg(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wn(i,n),rr(n),c&4){try{Oa(3,n,n.return),Eu(3,n)}catch(pe){it(n,n.return,pe)}try{Oa(5,n,n.return)}catch(pe){it(n,n.return,pe)}}break;case 1:Wn(i,n),rr(n),c&512&&a!==null&&ho(a,a.return);break;case 5:if(Wn(i,n),rr(n),c&512&&a!==null&&ho(a,a.return),n.flags&32){var f=n.stateNode;try{$r(f,"")}catch(pe){it(n,n.return,pe)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,E=a!==null?a.memoizedProps:g,A=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Ho(f,g),ea(A,E);var W=ea(A,g);for(E=0;E<D.length;E+=2){var Z=D[E],te=D[E+1];Z==="style"?Yo(f,te):Z==="dangerouslySetInnerHTML"?Qo(f,te):Z==="children"?$r(f,te):ee(f,Z,te,W)}switch(A){case"input":Ko(f,g);break;case"textarea":As(f,g);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?mr(f,!!g.multiple,le,!1):J!==!!g.multiple&&(g.defaultValue!=null?mr(f,!!g.multiple,g.defaultValue,!0):mr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ia]=g}catch(pe){it(n,n.return,pe)}}break;case 6:if(Wn(i,n),rr(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(pe){it(n,n.return,pe)}}break;case 3:if(Wn(i,n),rr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{jn(i.containerInfo)}catch(pe){it(n,n.return,pe)}break;case 4:Wn(i,n),rr(n);break;case 13:Wn(i,n),rr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Od=Ke())),c&4&&$g(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(W=Ft)||Z,Wn(i,n),Ft=W):Wn(i,n),rr(n),c&8192){if(W=n.memoizedState!==null,(n.stateNode.isHidden=W)&&!Z&&n.mode&1)for(de=n,Z=n.child;Z!==null;){for(te=de=Z;de!==null;){switch(J=de,le=J.child,J.tag){case 0:case 11:case 14:case 15:Oa(4,J,J.return);break;case 1:ho(J,J.return);var fe=J.stateNode;if(typeof fe.componentWillUnmount=="function"){c=J,a=J.return;try{i=c,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(pe){it(c,a,pe)}}break;case 5:ho(J,J.return);break;case 22:if(J.memoizedState!==null){Gg(te);continue}}le!==null?(le.return=J,de=le):Gg(te)}Z=Z.sibling}e:for(Z=null,te=n;;){if(te.tag===5){if(Z===null){Z=te;try{f=te.stateNode,W?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=te.stateNode,D=te.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=Xo("display",E))}catch(pe){it(n,n.return,pe)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(pe){it(n,n.return,pe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Wn(i,n),rr(n),c&4&&$g(n);break;case 21:break;default:Wn(i,n),rr(n)}}function rr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Ug(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&($r(f,""),c.flags&=-33);var g=zg(n);Nd(n,g,f);break;case 3:case 4:var E=c.stateNode.containerInfo,A=zg(n);xd(n,A,E);break;default:throw Error(t(161))}}catch(D){it(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function oE(n,i,a){de=n,Hg(n)}function Hg(n,i,a){for(var c=(n.mode&1)!==0;de!==null;){var f=de,g=f.child;if(f.tag===22&&c){var E=f.memoizedState!==null||wu;if(!E){var A=f.alternate,D=A!==null&&A.memoizedState!==null||Ft;A=wu;var W=Ft;if(wu=E,(Ft=D)&&!W)for(de=f;de!==null;)E=de,D=E.child,E.tag===22&&E.memoizedState!==null?qg(f):D!==null?(D.return=E,de=D):qg(f);for(;g!==null;)de=g,Hg(g),g=g.sibling;de=f,wu=A,Ft=W}Kg(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,de=g):Kg(n)}}function Kg(n){for(;de!==null;){var i=de;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Ft||Eu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:Bn(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&Gm(i,g,c);break;case 3:var E=i.updateQueue;if(E!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Gm(i,E,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var Z=W.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&jn(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||i.flags&512&&Pd(i)}catch(J){it(i,i.return,J)}}if(i===n){de=null;break}if(a=i.sibling,a!==null){a.return=i.return,de=a;break}de=i.return}}function Gg(n){for(;de!==null;){var i=de;if(i===n){de=null;break}var a=i.sibling;if(a!==null){a.return=i.return,de=a;break}de=i.return}}function qg(n){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Eu(4,i)}catch(D){it(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(D){it(i,f,D)}}var g=i.return;try{Pd(i)}catch(D){it(i,g,D)}break;case 5:var E=i.return;try{Pd(i)}catch(D){it(i,E,D)}}}catch(D){it(i,i.return,D)}if(i===n){de=null;break}var A=i.sibling;if(A!==null){A.return=i.return,de=A;break}de=i.return}}var aE=Math.ceil,Tu=Y.ReactCurrentDispatcher,bd=Y.ReactCurrentOwner,Cn=Y.ReactCurrentBatchConfig,Me=0,Ct=null,dt=null,bt=0,fn=0,fo=ti(0),vt=0,Va=null,ss=0,Iu=0,Dd=0,La=null,en=null,Od=0,po=1/0,xr=null,Su=!1,Vd=null,ai=null,Cu=!1,li=null,ku=0,Ma=0,Ld=null,Au=-1,Ru=0;function qt(){return Me&6?Ke():Au!==-1?Au:Au=Ke()}function ui(n){return n.mode&1?Me&2&&bt!==0?bt&-bt:W0.transition!==null?(Ru===0&&(Ru=Gi()),Ru):(n=xe,n!==0||(n=window.event,n=n===void 0?16:ha(n.type)),n):1}function Hn(n,i,a,c){if(50<Ma)throw Ma=0,Ld=null,Error(t(185));Gr(n,a,c),(!(Me&2)||n!==Ct)&&(n===Ct&&(!(Me&2)&&(Iu|=a),vt===4&&ci(n,bt)),tn(n,c),a===1&&Me===0&&!(i.mode&1)&&(po=Ke()+500,nu&&ri()))}function tn(n,i){var a=n.callbackNode;_r(n,i);var c=Ki(n,n===Ct?bt:0);if(c===0)a!==null&&oa(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&oa(a),i===1)n.tag===0?$0(Xg.bind(null,n)):Vm(Xg.bind(null,n)),F0(function(){!(Me&6)&&ri()}),a=null;else{switch(Qr(c)){case 1:a=Wi;break;case 4:a=Wr;break;case 16:a=_n;break;case 536870912:a=Rl;break;default:a=_n}a=iy(a,Qg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Qg(n,i){if(Au=-1,Ru=0,Me&6)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var c=Ki(n,n===Ct?bt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=Pu(n,c);else{i=c;var f=Me;Me|=2;var g=Jg();(Ct!==n||bt!==i)&&(xr=null,po=Ke()+500,as(n,i));do try{cE();break}catch(A){Yg(n,A)}while(!0);ed(),Tu.current=g,Me=f,dt!==null?i=0:(Ct=null,bt=0,i=vt)}if(i!==0){if(i===2&&(f=ln(n),f!==0&&(c=f,i=Md(n,f))),i===1)throw a=Va,as(n,0),ci(n,c),tn(n,Ke()),a;if(i===6)ci(n,c);else{if(f=n.current.alternate,!(c&30)&&!lE(f)&&(i=Pu(n,c),i===2&&(g=ln(n),g!==0&&(c=g,i=Md(n,g))),i===1))throw a=Va,as(n,0),ci(n,c),tn(n,Ke()),a;switch(n.finishedWork=f,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:ls(n,en,xr);break;case 3:if(ci(n,c),(c&130023424)===c&&(i=Od+500-Ke(),10<i)){if(Ki(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=$h(ls.bind(null,n,en,xr),i);break}ls(n,en,xr);break;case 4:if(ci(n,c),(c&4194240)===c)break;for(i=n.eventTimes,f=-1;0<c;){var E=31-Ht(c);g=1<<E,E=i[E],E>f&&(f=E),c&=~g}if(c=f,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*aE(c/1960))-c,10<c){n.timeoutHandle=$h(ls.bind(null,n,en,xr),c);break}ls(n,en,xr);break;case 5:ls(n,en,xr);break;default:throw Error(t(329))}}}return tn(n,Ke()),n.callbackNode===a?Qg.bind(null,n):null}function Md(n,i){var a=La;return n.current.memoizedState.isDehydrated&&(as(n,i).flags|=256),n=Pu(n,i),n!==2&&(i=en,en=a,i!==null&&jd(i)),n}function jd(n){en===null?en=n:en.push.apply(en,n)}function lE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Un(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ci(n,i){for(i&=~Dd,i&=~Iu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Ht(i),c=1<<a;n[a]=-1,i&=~c}}function Xg(n){if(Me&6)throw Error(t(327));mo();var i=Ki(n,0);if(!(i&1))return tn(n,Ke()),null;var a=Pu(n,i);if(n.tag!==0&&a===2){var c=ln(n);c!==0&&(i=c,a=Md(n,c))}if(a===1)throw a=Va,as(n,0),ci(n,i),tn(n,Ke()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,ls(n,en,xr),tn(n,Ke()),null}function Fd(n,i){var a=Me;Me|=1;try{return n(i)}finally{Me=a,Me===0&&(po=Ke()+500,nu&&ri())}}function os(n){li!==null&&li.tag===0&&!(Me&6)&&mo();var i=Me;Me|=1;var a=Cn.transition,c=xe;try{if(Cn.transition=null,xe=1,n)return n()}finally{xe=c,Cn.transition=a,Me=i,!(Me&6)&&ri()}}function Ud(){fn=fo.current,Xe(fo)}function as(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,j0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(Qh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:uo(),Xe(Yt),Xe(Lt),ld();break;case 5:od(c);break;case 4:uo();break;case 13:Xe(tt);break;case 19:Xe(tt);break;case 10:td(c.type._context);break;case 22:case 23:Ud()}a=a.return}if(Ct=n,dt=n=hi(n.current,null),bt=fn=i,vt=0,Va=null,Dd=Iu=ss=0,en=La=null,ns!==null){for(i=0;i<ns.length;i++)if(a=ns[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var E=g.next;g.next=f,c.next=E}a.pending=c}ns=null}return n}function Yg(n,i){do{var a=dt;try{if(ed(),du.current=gu,fu){for(var c=nt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}fu=!1}if(is=0,St=_t=nt=null,Pa=!1,xa=0,bd.current=null,a===null||a.return===null){vt=1,Va=i,dt=null;break}e:{var g=n,E=a.return,A=a,D=i;if(i=bt,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=D,Z=A,te=Z.tag;if(!(Z.mode&1)&&(te===0||te===11||te===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=Tg(E);if(le!==null){le.flags&=-257,Ig(le,E,A,g,i),le.mode&1&&Eg(g,W,i),i=le,D=W;var fe=i.updateQueue;if(fe===null){var pe=new Set;pe.add(D),i.updateQueue=pe}else fe.add(D);break e}else{if(!(i&1)){Eg(g,W,i),zd();break e}D=Error(t(426))}}else if(Ze&&A.mode&1){var lt=Tg(E);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),Ig(lt,E,A,g,i),Jh(co(D,A));break e}}g=D=co(D,A),vt!==4&&(vt=2),La===null?La=[g]:La.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var z=vg(g,D,i);Km(g,z);break e;case 1:A=D;var V=g.type,B=g.stateNode;if(!(g.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ai===null||!ai.has(B)))){g.flags|=65536,i&=-i,g.lanes|=i;var ie=wg(g,A,i);Km(g,ie);break e}}g=g.return}while(g!==null)}ey(a)}catch(me){i=me,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Jg(){var n=Tu.current;return Tu.current=gu,n===null?gu:n}function zd(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!(ss&268435455)&&!(Iu&268435455)||ci(Ct,bt)}function Pu(n,i){var a=Me;Me|=2;var c=Jg();(Ct!==n||bt!==i)&&(xr=null,as(n,i));do try{uE();break}catch(f){Yg(n,f)}while(!0);if(ed(),Me=a,Tu.current=c,dt!==null)throw Error(t(261));return Ct=null,bt=0,vt}function uE(){for(;dt!==null;)Zg(dt)}function cE(){for(;dt!==null&&!kl();)Zg(dt)}function Zg(n){var i=ry(n.alternate,n,fn);n.memoizedProps=n.pendingProps,i===null?ey(n):dt=i,bd.current=null}function ey(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=rE(a,i),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vt=6,dt=null;return}}else if(a=nE(a,i,fn),a!==null){dt=a;return}if(i=i.sibling,i!==null){dt=i;return}dt=i=n}while(i!==null);vt===0&&(vt=5)}function ls(n,i,a){var c=xe,f=Cn.transition;try{Cn.transition=null,xe=1,hE(n,i,a,c)}finally{Cn.transition=f,xe=c}return null}function hE(n,i,a,c){do mo();while(li!==null);if(Me&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(We(n,g),n===Ct&&(dt=Ct=null,bt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Cu||(Cu=!0,iy(_n,function(){return mo(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=Cn.transition,Cn.transition=null;var E=xe;xe=1;var A=Me;Me|=4,bd.current=null,sE(n,a),Wg(a,n),N0(zh),Yr=!!Uh,zh=Uh=null,n.current=a,oE(a),Sh(),Me=A,xe=E,Cn.transition=g}else n.current=a;if(Cu&&(Cu=!1,li=n,ku=f),g=n.pendingLanes,g===0&&(ai=null),Pl(a.stateNode),tn(n,Ke()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Su)throw Su=!1,n=Vd,Vd=null,n;return ku&1&&n.tag!==0&&mo(),g=n.pendingLanes,g&1?n===Ld?Ma++:(Ma=0,Ld=n):Ma=0,ri(),null}function mo(){if(li!==null){var n=Qr(ku),i=Cn.transition,a=xe;try{if(Cn.transition=null,xe=16>n?16:n,li===null)var c=!1;else{if(n=li,li=null,ku=0,Me&6)throw Error(t(331));var f=Me;for(Me|=4,de=n.current;de!==null;){var g=de,E=g.child;if(de.flags&16){var A=g.deletions;if(A!==null){for(var D=0;D<A.length;D++){var W=A[D];for(de=W;de!==null;){var Z=de;switch(Z.tag){case 0:case 11:case 15:Oa(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,de=te;else for(;de!==null;){Z=de;var J=Z.sibling,le=Z.return;if(Fg(Z),Z===W){de=null;break}if(J!==null){J.return=le,de=J;break}de=le}}}var fe=g.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var lt=pe.sibling;pe.sibling=null,pe=lt}while(pe!==null)}}de=g}}if(g.subtreeFlags&2064&&E!==null)E.return=g,de=E;else e:for(;de!==null;){if(g=de,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Oa(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,de=z;break e}de=g.return}}var V=n.current;for(de=V;de!==null;){E=de;var B=E.child;if(E.subtreeFlags&2064&&B!==null)B.return=E,de=B;else e:for(E=V;de!==null;){if(A=de,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Eu(9,A)}}catch(me){it(A,A.return,me)}if(A===E){de=null;break e}var ie=A.sibling;if(ie!==null){ie.return=A.return,de=ie;break e}de=A.return}}if(Me=f,ri(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Hi,n)}catch{}c=!0}return c}finally{xe=a,Cn.transition=i}}return!1}function ty(n,i,a){i=co(a,i),i=vg(n,i,1),n=si(n,i,1),i=qt(),n!==null&&(Gr(n,1,i),tn(n,i))}function it(n,i,a){if(n.tag===3)ty(n,n,a);else for(;i!==null;){if(i.tag===3){ty(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ai===null||!ai.has(c))){n=co(a,n),n=wg(i,n,1),i=si(i,n,1),n=qt(),i!==null&&(Gr(i,1,n),tn(i,n));break}}i=i.return}}function dE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=qt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(bt&a)===a&&(vt===4||vt===3&&(bt&130023424)===bt&&500>Ke()-Od?as(n,0):Dd|=a),tn(n,i)}function ny(n,i){i===0&&(n.mode&1?(i=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):i=1);var a=qt();n=Ar(n,i),n!==null&&(Gr(n,i,a),tn(n,a))}function fE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),ny(n,a)}function pE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),ny(n,a)}var ry;ry=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Yt.current)Zt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Zt=!1,tE(n,i,a);Zt=!!(n.flags&131072)}else Zt=!1,Ze&&i.flags&1048576&&Lm(i,iu,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;vu(n,i),n=i.pendingProps;var f=no(i,Lt.current);lo(i,a),f=hd(null,i,c,n,f,a);var g=dd();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Jt(c)?(g=!0,tu(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,id(i),f.updater=yu,i.stateNode=f,f._reactInternals=i,_d(i,c,n,a),i=Td(null,i,c,!0,g,a)):(i.tag=0,Ze&&g&&qh(i),Gt(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(vu(n,i),n=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=gE(c),n=Bn(c,n),f){case 0:i=Ed(null,i,c,n,a);break e;case 1:i=Pg(null,i,c,n,a);break e;case 11:i=Sg(null,i,c,n,a);break e;case 14:i=Cg(null,i,c,Bn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Bn(c,f),Ed(n,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Bn(c,f),Pg(n,i,c,f,a);case 3:e:{if(xg(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,f=g.element,Hm(n,i),cu(i,c,null,a);var E=i.memoizedState;if(c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=co(Error(t(423)),i),i=Ng(n,i,c,a,f);break e}else if(c!==f){f=co(Error(t(424)),i),i=Ng(n,i,c,a,f);break e}else for(dn=ei(i.stateNode.containerInfo.firstChild),hn=i,Ze=!0,zn=null,a=$m(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),c===f){i=Pr(n,i,a);break e}Gt(n,i,c,a)}i=i.child}return i;case 5:return qm(i),n===null&&Yh(i),c=i.type,f=i.pendingProps,g=n!==null?n.memoizedProps:null,E=f.children,Bh(c,f)?E=null:g!==null&&Bh(c,g)&&(i.flags|=32),Rg(n,i),Gt(n,i,E,a),i.child;case 6:return n===null&&Yh(i),null;case 13:return bg(n,i,a);case 4:return sd(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=oo(i,null,c,a):Gt(n,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Bn(c,f),Sg(n,i,c,f,a);case 7:return Gt(n,i,i.pendingProps,a),i.child;case 8:return Gt(n,i,i.pendingProps.children,a),i.child;case 12:return Gt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,g=i.memoizedProps,E=f.value,Ge(au,c._currentValue),c._currentValue=E,g!==null)if(Un(g.value,E)){if(g.children===f.children&&!Yt.current){i=Pr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){E=g.child;for(var D=A.firstContext;D!==null;){if(D.context===c){if(g.tag===1){D=Rr(-1,a&-a),D.tag=2;var W=g.updateQueue;if(W!==null){W=W.shared;var Z=W.pending;Z===null?D.next=D:(D.next=Z.next,Z.next=D),W.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),nd(g.return,a,i),A.lanes|=a;break}D=D.next}}else if(g.tag===10)E=g.type===i.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,A=E.alternate,A!==null&&(A.lanes|=a),nd(E,a,i),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}Gt(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,lo(i,a),f=In(f),c=c(f),i.flags|=1,Gt(n,i,c,a),i.child;case 14:return c=i.type,f=Bn(c,i.pendingProps),f=Bn(c.type,f),Cg(n,i,c,f,a);case 15:return kg(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:Bn(c,f),vu(n,i),i.tag=1,Jt(c)?(n=!0,tu(i)):n=!1,lo(i,a),yg(i,c,f),_d(i,c,f,a),Td(null,i,c,!0,n,a);case 19:return Og(n,i,a);case 22:return Ag(n,i,a)}throw Error(t(156,i.tag))};function iy(n,i){return Vs(n,i)}function mE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(n,i,a,c){return new mE(n,i,a,c)}function Bd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gE(n){if(typeof n=="function")return Bd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===ot)return 14}return 2}function hi(n,i){var a=n.alternate;return a===null?(a=kn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function xu(n,i,a,c,f,g){var E=2;if(c=n,typeof n=="function")Bd(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case R:return us(a.children,f,g,i);case S:E=8,f|=8;break;case k:return n=kn(12,a,i,f|2),n.elementType=k,n.lanes=g,n;case P:return n=kn(13,a,i,f),n.elementType=P,n.lanes=g,n;case qe:return n=kn(19,a,i,f),n.elementType=qe,n.lanes=g,n;case be:return Nu(a,f,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:E=10;break e;case O:E=9;break e;case j:E=11;break e;case ot:E=14;break e;case et:E=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=kn(E,a,i,f),i.elementType=n,i.type=c,i.lanes=g,i}function us(n,i,a,c){return n=kn(7,n,c,i),n.lanes=a,n}function Nu(n,i,a,c){return n=kn(22,n,c,i),n.elementType=be,n.lanes=a,n.stateNode={isHidden:!1},n}function $d(n,i,a){return n=kn(6,n,null,i),n.lanes=a,n}function Wd(n,i,a){return i=kn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function yE(n,i,a,c,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Hd(n,i,a,c,f,g,E,A,D){return n=new yE(n,i,a,A,D),i===1?(i=1,g===!0&&(i|=8)):i=0,g=kn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(g),n}function _E(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function sy(n){if(!n)return ni;n=n._reactInternals;e:{if(Dn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return Dm(n,a,i)}return i}function oy(n,i,a,c,f,g,E,A,D){return n=Hd(a,c,!0,n,f,g,E,A,D),n.context=sy(null),a=n.current,c=qt(),f=ui(a),g=Rr(c,f),g.callback=i??null,si(a,g,f),n.current.lanes=f,Gr(n,f,c),tn(n,c),n}function bu(n,i,a,c){var f=i.current,g=qt(),E=ui(f);return a=sy(a),i.context===null?i.context=a:i.pendingContext=a,i=Rr(g,E),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=si(f,i,E),n!==null&&(Hn(n,f,E,g),uu(n,f,E)),E}function Du(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ay(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Kd(n,i){ay(n,i),(n=n.alternate)&&ay(n,i)}var ly=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gd(n){this._internalRoot=n}Ou.prototype.render=Gd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));bu(n,i,null,null)},Ou.prototype.unmount=Gd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;os(function(){bu(null,n,null,null)}),i[Ir]=null}};function Ou(n){this._internalRoot=n}Ou.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ol();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Xn.length&&i!==0&&i<Xn[a].priority;a++);Xn.splice(a,0,n),a===0&&Ml(n)}};function qd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uy(){}function vE(n,i,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var W=Du(E);g.call(W)}}var E=oy(i,c,n,0,null,!1,!1,"",uy);return n._reactRootContainer=E,n[Ir]=E.current,Ea(n.nodeType===8?n.parentNode:n),os(),E}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var W=Du(D);A.call(W)}}var D=Hd(n,0,!1,null,null,!1,!1,"",uy);return n._reactRootContainer=D,n[Ir]=D.current,Ea(n.nodeType===8?n.parentNode:n),os(function(){bu(i,D,a,c)}),D}function Lu(n,i,a,c,f){var g=a._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var A=f;f=function(){var D=Du(E);A.call(D)}}bu(i,E,n,f)}else E=vE(a,i,n,f,c);return Du(E)}bl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Hr(i.pendingLanes);a!==0&&(qr(i,a|1),tn(i,Ke()),!(Me&6)&&(po=Ke()+500,ri()))}break;case 13:os(function(){var c=Ar(n,1);if(c!==null){var f=qt();Hn(c,n,1,f)}}),Kd(n,1)}},js=function(n){if(n.tag===13){var i=Ar(n,134217728);if(i!==null){var a=qt();Hn(i,n,134217728,a)}Kd(n,134217728)}},Dl=function(n){if(n.tag===13){var i=ui(n),a=Ar(n,i);if(a!==null){var c=qt();Hn(a,n,i,c)}Kd(n,i)}},Ol=function(){return xe},Vl=function(n,i){var a=xe;try{return xe=n,i()}finally{xe=a}},Ps=function(n,i,a){switch(i){case"input":if(Ko(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=Zl(c);if(!f)throw Error(t(90));Is(c),Ko(c,f)}}}break;case"textarea":As(n,a);break;case"select":i=a.value,i!=null&&mr(n,!!a.multiple,i,!1)}},Ui=Fd,na=os;var wE={usingClientEntryPoint:!1,Events:[Sa,eo,Zl,qn,ta,Fd]},ja={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EE={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sa(n),n===null?null:n.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Hi=Mu.inject(EE),an=Mu}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wE,nn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(i))throw Error(t(200));return _E(n,i,null,a)},nn.createRoot=function(n,i){if(!qd(n))throw Error(t(299));var a=!1,c="",f=ly;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Hd(n,1,!1,null,null,a,!1,c,f),n[Ir]=i.current,Ea(n.nodeType===8?n.parentNode:n),new Gd(i)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=sa(i),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return os(n)},nn.hydrate=function(n,i,a){if(!Vu(i))throw Error(t(200));return Lu(null,n,i,!0,a)},nn.hydrateRoot=function(n,i,a){if(!qd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",E=ly;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),i=oy(i,null,n,1,a??null,f,!1,g,E),n[Ir]=i.current,Ea(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new Ou(i)},nn.render=function(n,i,a){if(!Vu(i))throw Error(t(200));return Lu(null,n,i,!1,a)},nn.unmountComponentAtNode=function(n){if(!Vu(n))throw Error(t(40));return n._reactRootContainer?(os(function(){Lu(null,null,n,!1,function(){n._reactRootContainer=null,n[Ir]=null})}),!0):!1},nn.unstable_batchedUpdates=Fd,nn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Lu(n,i,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var yy;function G_(){if(yy)return Yd.exports;yy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Yd.exports=NE(),Yd.exports}var _y;function bE(){if(_y)return ju;_y=1;var r=G_();return ju.createRoot=r.createRoot,ju.hydrateRoot=r.hydrateRoot,ju}var DE=bE();G_();/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},il.apply(this,arguments)}var yi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(yi||(yi={}));const vy="popstate";function OE(r){r===void 0&&(r={});function e(s,o){let{pathname:l,search:h,hash:d}=s.location;return If("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:ac(o)}return LE(e,t,null,r)}function ct(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function q_(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VE(){return Math.random().toString(36).substr(2,8)}function wy(r,e){return{usr:r.state,key:r.key,idx:e}}function If(r,e,t,s){return t===void 0&&(t=null),il({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Lo(e):e,{state:t,key:e&&e.key||s||VE()})}function ac(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Lo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function LE(r,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,d=yi.Pop,p=null,y=_();y==null&&(y=0,h.replaceState(il({},h.state,{idx:y}),""));function _(){return(h.state||{idx:null}).idx}function w(){d=yi.Pop;let N=_(),K=N==null?null:N-y;y=N,p&&p({action:d,location:L.location,delta:K})}function T(N,K){d=yi.Push;let G=If(L.location,N,K);y=_()+1;let ee=wy(G,y),Y=L.createHref(G);try{h.pushState(ee,"",Y)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(Y)}l&&p&&p({action:d,location:L.location,delta:1})}function C(N,K){d=yi.Replace;let G=If(L.location,N,K);y=_();let ee=wy(G,y),Y=L.createHref(G);h.replaceState(ee,"",Y),l&&p&&p({action:d,location:L.location,delta:0})}function b(N){let K=o.location.origin!=="null"?o.location.origin:o.location.href,G=typeof N=="string"?N:ac(N);return G=G.replace(/ $/,"%20"),ct(K,"No window.location.(origin|href) available to create URL for href: "+G),new URL(G,K)}let L={get action(){return d},get location(){return r(o,h)},listen(N){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(vy,w),p=N,()=>{o.removeEventListener(vy,w),p=null}},createHref(N){return e(o,N)},createURL:b,encodeLocation(N){let K=b(N);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:T,replace:C,go(N){return h.go(N)}};return L}var Ey;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Ey||(Ey={}));function ME(r,e,t){return t===void 0&&(t="/"),jE(r,e,t)}function jE(r,e,t,s){let o=typeof e=="string"?Lo(e):e,l=dp(o.pathname||"/",t);if(l==null)return null;let h=Q_(r);FE(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let y=YE(l);d=qE(h[p],y)}return d}function Q_(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(ct(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=vi([s,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(ct(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Q_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:KE(y,l.index),routesMeta:_})};return r.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of X_(l.path))o(l,h,p)}),e}function X_(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=X_(s.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function FE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:GE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const UE=/^:[\w-]+$/,zE=3,BE=2,$E=1,WE=10,HE=-2,Ty=r=>r==="*";function KE(r,e){let t=r.split("/"),s=t.length;return t.some(Ty)&&(s+=HE),e&&(s+=BE),t.filter(o=>!Ty(o)).reduce((o,l)=>o+(UE.test(l)?zE:l===""?$E:WE),s)}function GE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function qE(r,e,t){let{routesMeta:s}=r,o={},l="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],y=d===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",w=QE({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:vi([l,w.pathname]),pathnameBase:t1(vi([l,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(l=vi([l,w.pathnameBase]))}return h}function QE(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=XE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((y,_,w)=>{let{paramName:T,isOptional:C}=_;if(T==="*"){let L=d[w]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const b=d[w];return C&&!b?y[T]=void 0:y[T]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function XE(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),q_(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function YE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return q_(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function dp(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function JE(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?Lo(r):r;return{pathname:t?t.startsWith("/")?t:ZE(t,e):e,search:n1(s),hash:r1(o)}}function ZE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function ef(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e1(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fp(r,e){let t=e1(r);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function pp(r,e,t,s){s===void 0&&(s=!1);let o;typeof r=="string"?o=Lo(r):(o=il({},r),ct(!o.pathname||!o.pathname.includes("?"),ef("?","pathname","search",o)),ct(!o.pathname||!o.pathname.includes("#"),ef("#","pathname","hash",o)),ct(!o.search||!o.search.includes("#"),ef("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let w=e.length-1;if(!s&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}d=w>=0?e[w]:"/"}let p=JE(o,d),y=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const vi=r=>r.join("/").replace(/\/\/+/g,"/"),t1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),n1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,r1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function i1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Y_=["post","put","patch","delete"];new Set(Y_);const s1=["get",...Y_];new Set(s1);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},sl.apply(this,arguments)}const mp=$.createContext(null),o1=$.createContext(null),Ni=$.createContext(null),Jc=$.createContext(null),bi=$.createContext({outlet:null,matches:[],isDataRoute:!1}),J_=$.createContext(null);function a1(r,e){let{relative:t}=e===void 0?{}:e;Mo()||ct(!1);let{basename:s,navigator:o}=$.useContext(Ni),{hash:l,pathname:h,search:d}=tv(r,{relative:t}),p=h;return s!=="/"&&(p=h==="/"?s:vi([s,h])),o.createHref({pathname:p,search:d,hash:l})}function Mo(){return $.useContext(Jc)!=null}function ml(){return Mo()||ct(!1),$.useContext(Jc).location}function Z_(r){$.useContext(Ni).static||$.useLayoutEffect(r)}function ev(){let{isDataRoute:r}=$.useContext(bi);return r?w1():l1()}function l1(){Mo()||ct(!1);let r=$.useContext(mp),{basename:e,future:t,navigator:s}=$.useContext(Ni),{matches:o}=$.useContext(bi),{pathname:l}=ml(),h=JSON.stringify(fp(o,t.v7_relativeSplatPath)),d=$.useRef(!1);return Z_(()=>{d.current=!0}),$.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){s.go(y);return}let w=pp(y,JSON.parse(h),l,_.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:vi([e,w.pathname])),(_.replace?s.replace:s.push)(w,_.state,_)},[e,s,h,l,r])}function tv(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=$.useContext(Ni),{matches:o}=$.useContext(bi),{pathname:l}=ml(),h=JSON.stringify(fp(o,s.v7_relativeSplatPath));return $.useMemo(()=>pp(r,JSON.parse(h),l,t==="path"),[r,h,l,t])}function u1(r,e){return c1(r,e)}function c1(r,e,t,s){Mo()||ct(!1);let{navigator:o,static:l}=$.useContext(Ni),{matches:h}=$.useContext(bi),d=h[h.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let _=ml(),w;if(e){var T;let K=typeof e=="string"?Lo(e):e;y==="/"||(T=K.pathname)!=null&&T.startsWith(y)||ct(!1),w=K}else w=_;let C=w.pathname||"/",b=C;if(y!=="/"){let K=y.replace(/^\//,"").split("/");b="/"+C.replace(/^\//,"").split("/").slice(K.length).join("/")}let L=ME(r,{pathname:b}),N=m1(L&&L.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:vi([y,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:vi([y,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,t,s);return e&&N?$.createElement(Jc.Provider,{value:{location:sl({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:yi.Pop}},N):N}function h1(){let r=v1(),e=i1(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:o},t):null,null)}const d1=$.createElement(h1,null);class f1 extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?$.createElement(bi.Provider,{value:this.props.routeContext},$.createElement(J_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function p1(r){let{routeContext:e,match:t,children:s}=r,o=$.useContext(mp);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(bi.Provider,{value:e},s)}function m1(r,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var l;if(!t)return null;if(t.errors)r=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let h=r,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=h.findIndex(w=>w.route.id&&(d==null?void 0:d[w.route.id])!==void 0);_>=0||ct(!1),h=h.slice(0,Math.min(h.length,_+1))}let p=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<h.length;_++){let w=h[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(y=_),w.route.id){let{loaderData:T,errors:C}=t,b=w.route.loader&&T[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||b){p=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((_,w,T)=>{let C,b=!1,L=null,N=null;t&&(C=d&&w.route.id?d[w.route.id]:void 0,L=w.route.errorElement||d1,p&&(y<0&&T===0?(b=!0,N=null):y===T&&(b=!0,N=w.route.hydrateFallbackElement||null)));let K=e.concat(h.slice(0,T+1)),G=()=>{let ee;return C?ee=L:b?ee=N:w.route.Component?ee=$.createElement(w.route.Component,null):w.route.element?ee=w.route.element:ee=_,$.createElement(p1,{match:w,routeContext:{outlet:_,matches:K,isDataRoute:t!=null},children:ee})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?$.createElement(f1,{location:t.location,revalidation:t.revalidation,component:L,error:C,children:G(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):G()},null)}var nv=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(nv||{}),lc=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(lc||{});function g1(r){let e=$.useContext(mp);return e||ct(!1),e}function y1(r){let e=$.useContext(o1);return e||ct(!1),e}function _1(r){let e=$.useContext(bi);return e||ct(!1),e}function rv(r){let e=_1(),t=e.matches[e.matches.length-1];return t.route.id||ct(!1),t.route.id}function v1(){var r;let e=$.useContext(J_),t=y1(lc.UseRouteError),s=rv(lc.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function w1(){let{router:r}=g1(nv.UseNavigateStable),e=rv(lc.UseNavigateStable),t=$.useRef(!1);return Z_(()=>{t.current=!0}),$.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?r.navigate(o):r.navigate(o,sl({fromRouteId:e},l)))},[r,e])}function E1(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function T1(r){let{to:e,replace:t,state:s,relative:o}=r;Mo()||ct(!1);let{future:l,static:h}=$.useContext(Ni),{matches:d}=$.useContext(bi),{pathname:p}=ml(),y=ev(),_=pp(e,fp(d,l.v7_relativeSplatPath),p,o==="path"),w=JSON.stringify(_);return $.useEffect(()=>y(JSON.parse(w),{replace:t,state:s,relative:o}),[y,w,o,t,s]),null}function Xu(r){ct(!1)}function I1(r){let{basename:e="/",children:t=null,location:s,navigationType:o=yi.Pop,navigator:l,static:h=!1,future:d}=r;Mo()&&ct(!1);let p=e.replace(/^\/*/,"/"),y=$.useMemo(()=>({basename:p,navigator:l,static:h,future:sl({v7_relativeSplatPath:!1},d)}),[p,d,l,h]);typeof s=="string"&&(s=Lo(s));let{pathname:_="/",search:w="",hash:T="",state:C=null,key:b="default"}=s,L=$.useMemo(()=>{let N=dp(_,p);return N==null?null:{location:{pathname:N,search:w,hash:T,state:C,key:b},navigationType:o}},[p,_,w,T,C,b,o]);return L==null?null:$.createElement(Ni.Provider,{value:y},$.createElement(Jc.Provider,{children:t,value:L}))}function S1(r){let{children:e,location:t}=r;return u1(Sf(e),t)}new Promise(()=>{});function Sf(r,e){e===void 0&&(e=[]);let t=[];return $.Children.forEach(r,(s,o)=>{if(!$.isValidElement(s))return;let l=[...e,o];if(s.type===$.Fragment){t.push.apply(t,Sf(s.props.children,l));return}s.type!==Xu&&ct(!1),!s.props.index||!s.props.children||ct(!1);let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Sf(s.props.children,l)),t.push(h)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Cf.apply(this,arguments)}function C1(r,e){if(r==null)return{};var t={},s=Object.keys(r),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=r[o]);return t}function k1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function A1(r,e){return r.button===0&&(!e||e==="_self")&&!k1(r)}const R1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P1="6";try{window.__reactRouterVersion=P1}catch{}const x1="startTransition",Iy=RE[x1];function N1(r){let{basename:e,children:t,future:s,window:o}=r,l=$.useRef();l.current==null&&(l.current=OE({window:o,v5Compat:!0}));let h=l.current,[d,p]=$.useState({action:h.action,location:h.location}),{v7_startTransition:y}=s||{},_=$.useCallback(w=>{y&&Iy?Iy(()=>p(w)):p(w)},[p,y]);return $.useLayoutEffect(()=>h.listen(_),[h,_]),$.useEffect(()=>E1(s),[s]),$.createElement(I1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:h,future:s})}const b1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",D1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sy=$.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:h,state:d,target:p,to:y,preventScrollReset:_,viewTransition:w}=e,T=C1(e,R1),{basename:C}=$.useContext(Ni),b,L=!1;if(typeof y=="string"&&D1.test(y)&&(b=y,b1))try{let ee=new URL(window.location.href),Y=y.startsWith("//")?new URL(ee.protocol+y):new URL(y),se=dp(Y.pathname,C);Y.origin===ee.origin&&se!=null?y=se+Y.search+Y.hash:L=!0}catch{}let N=a1(y,{relative:o}),K=O1(y,{replace:h,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:w});function G(ee){s&&s(ee),ee.defaultPrevented||K(ee)}return $.createElement("a",Cf({},T,{href:b||N,onClick:L||l?s:G,ref:t,target:p}))});var Cy;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Cy||(Cy={}));var ky;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ky||(ky={}));function O1(r,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:h,viewTransition:d}=e===void 0?{}:e,p=ev(),y=ml(),_=tv(r,{relative:h});return $.useCallback(w=>{if(A1(w,t)){w.preventDefault();let T=s!==void 0?s:ac(y)===ac(_);p(r,{replace:T,state:o,preventScrollReset:l,relative:h,viewTransition:d})}},[y,p,_,s,o,t,r,l,h,d])}var kf=function(r,e){return kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},kf(r,e)};function V1(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");kf(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var At=function(){return At=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},At.apply(this,arguments)};function L1(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function go(r,e,t,s){function o(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(_){try{y(s.next(_))}catch(w){h(w)}}function p(_){try{y(s.throw(_))}catch(w){h(w)}}function y(_){_.done?l(_.value):o(_.value).then(d,p)}y((s=s.apply(r,[])).next())})}function yo(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=d(0),h.throw=d(1),h.return=d(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(y){return function(_){return p([y,_])}}function p(y){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(t=0)),t;)try{if(s=1,o&&(l=y[0]&2?o.return:y[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,y[1])).done)return l;switch(o=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){t.label=y[1];break}if(y[0]===6&&t.label<l[1]){t.label=l[1],l=y;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(y);break}l[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(r,t)}catch(_){y=[6,_],o=0}finally{s=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function ar(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]])}return t}var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function yp(r,e){return r(e={exports:{}},e.exports),e.exports}var cs=yp(function(r,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function s(){var o=this;this.locked=new Map,this.addToLocked=function(l,h){var d=o.locked.get(l);d===void 0?h===void 0?o.locked.set(l,[]):o.locked.set(l,[h]):h!==void 0&&(d.unshift(h),o.locked.set(l,d))},this.isLocked=function(l){return o.locked.has(l)},this.lock=function(l){return new Promise(function(h,d){o.isLocked(l)?o.addToLocked(l,h):(o.addToLocked(l),h())})},this.unlock=function(l){var h=o.locked.get(l);if(h!==void 0&&h.length!==0){var d=h.pop();o.locked.set(l,h),d!==void 0&&setTimeout(d,0)}else o.locked.delete(l)}}return s.getInstance=function(){return s.instance===void 0&&(s.instance=new s),s.instance},s}();e.default=function(){return t.getInstance()}});gp(cs);var M1=gp(yp(function(r,e){var t=ds&&ds.__awaiter||function(_,w,T,C){return new(T||(T=Promise))(function(b,L){function N(ee){try{G(C.next(ee))}catch(Y){L(Y)}}function K(ee){try{G(C.throw(ee))}catch(Y){L(Y)}}function G(ee){ee.done?b(ee.value):new T(function(Y){Y(ee.value)}).then(N,K)}G((C=C.apply(_,w||[])).next())})},s=ds&&ds.__generator||function(_,w){var T,C,b,L,N={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return L={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function K(G){return function(ee){return function(Y){if(T)throw new TypeError("Generator is already executing.");for(;N;)try{if(T=1,C&&(b=2&Y[0]?C.return:Y[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,Y[1])).done)return b;switch(C=0,b&&(Y=[2&Y[0],b.value]),Y[0]){case 0:case 1:b=Y;break;case 4:return N.label++,{value:Y[1],done:!1};case 5:N.label++,C=Y[1],Y=[0];continue;case 7:Y=N.ops.pop(),N.trys.pop();continue;default:if(b=N.trys,!((b=b.length>0&&b[b.length-1])||Y[0]!==6&&Y[0]!==2)){N=0;continue}if(Y[0]===3&&(!b||Y[1]>b[0]&&Y[1]<b[3])){N.label=Y[1];break}if(Y[0]===6&&N.label<b[1]){N.label=b[1],b=Y;break}if(b&&N.label<b[2]){N.label=b[2],N.ops.push(Y);break}b[2]&&N.ops.pop(),N.trys.pop();continue}Y=w.call(_,N)}catch(se){Y=[6,se],C=0}finally{T=b=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([G,ee])}}},o=ds;Object.defineProperty(e,"__esModule",{value:!0});var l="browser-tabs-lock-key",h={key:function(_){return t(o,void 0,void 0,function(){return s(this,function(w){throw new Error("Unsupported")})})},getItem:function(_){return t(o,void 0,void 0,function(){return s(this,function(w){throw new Error("Unsupported")})})},clear:function(){return t(o,void 0,void 0,function(){return s(this,function(_){return[2,window.localStorage.clear()]})})},removeItem:function(_){return t(o,void 0,void 0,function(){return s(this,function(w){throw new Error("Unsupported")})})},setItem:function(_,w){return t(o,void 0,void 0,function(){return s(this,function(T){throw new Error("Unsupported")})})},keySync:function(_){return window.localStorage.key(_)},getItemSync:function(_){return window.localStorage.getItem(_)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(_){return window.localStorage.removeItem(_)},setItemSync:function(_,w){return window.localStorage.setItem(_,w)}};function d(_){return new Promise(function(w){return setTimeout(w,_)})}function p(_){for(var w="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",T="",C=0;C<_;C++)T+=w[Math.floor(Math.random()*w.length)];return T}var y=function(){function _(w){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+p(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=w,_.waiters===void 0&&(_.waiters=[])}return _.prototype.acquireLock=function(w,T){return T===void 0&&(T=5e3),t(this,void 0,void 0,function(){var C,b,L,N,K,G,ee;return s(this,function(Y){switch(Y.label){case 0:C=Date.now()+p(4),b=Date.now()+T,L=l+"-"+w,N=this.storageHandler===void 0?h:this.storageHandler,Y.label=1;case 1:return Date.now()<b?[4,d(30)]:[3,8];case 2:return Y.sent(),N.getItemSync(L)!==null?[3,5]:(K=this.id+"-"+w+"-"+C,[4,d(Math.floor(25*Math.random()))]);case 3:return Y.sent(),N.setItemSync(L,JSON.stringify({id:this.id,iat:C,timeoutKey:K,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,d(30)];case 4:return Y.sent(),(G=N.getItemSync(L))!==null&&(ee=JSON.parse(G)).id===this.id&&ee.iat===C?(this.acquiredIatSet.add(C),this.refreshLockWhileAcquired(L,C),[2,!0]):[3,7];case 5:return _.lockCorrector(this.storageHandler===void 0?h:this.storageHandler),[4,this.waitForSomethingToChange(b)];case 6:Y.sent(),Y.label=7;case 7:return C=Date.now()+p(4),[3,1];case 8:return[2,!1]}})})},_.prototype.refreshLockWhileAcquired=function(w,T){return t(this,void 0,void 0,function(){var C=this;return s(this,function(b){return setTimeout(function(){return t(C,void 0,void 0,function(){var L,N,K;return s(this,function(G){switch(G.label){case 0:return[4,cs.default().lock(T)];case 1:return G.sent(),this.acquiredIatSet.has(T)?(L=this.storageHandler===void 0?h:this.storageHandler,(N=L.getItemSync(w))===null?(cs.default().unlock(T),[2]):((K=JSON.parse(N)).timeRefreshed=Date.now(),L.setItemSync(w,JSON.stringify(K)),cs.default().unlock(T),this.refreshLockWhileAcquired(w,T),[2])):(cs.default().unlock(T),[2])}})})},1e3),[2]})})},_.prototype.waitForSomethingToChange=function(w){return t(this,void 0,void 0,function(){return s(this,function(T){switch(T.label){case 0:return[4,new Promise(function(C){var b=!1,L=Date.now(),N=!1;function K(){if(N||(window.removeEventListener("storage",K),_.removeFromWaiting(K),clearTimeout(G),N=!0),!b){b=!0;var ee=50-(Date.now()-L);ee>0?setTimeout(C,ee):C(null)}}window.addEventListener("storage",K),_.addToWaiting(K);var G=setTimeout(K,Math.max(0,w-Date.now()))})];case 1:return T.sent(),[2]}})})},_.addToWaiting=function(w){this.removeFromWaiting(w),_.waiters!==void 0&&_.waiters.push(w)},_.removeFromWaiting=function(w){_.waiters!==void 0&&(_.waiters=_.waiters.filter(function(T){return T!==w}))},_.notifyWaiters=function(){_.waiters!==void 0&&_.waiters.slice().forEach(function(w){return w()})},_.prototype.releaseLock=function(w){return t(this,void 0,void 0,function(){return s(this,function(T){switch(T.label){case 0:return[4,this.releaseLock__private__(w)];case 1:return[2,T.sent()]}})})},_.prototype.releaseLock__private__=function(w){return t(this,void 0,void 0,function(){var T,C,b,L;return s(this,function(N){switch(N.label){case 0:return T=this.storageHandler===void 0?h:this.storageHandler,C=l+"-"+w,(b=T.getItemSync(C))===null?[2]:(L=JSON.parse(b)).id!==this.id?[3,2]:[4,cs.default().lock(L.iat)];case 1:N.sent(),this.acquiredIatSet.delete(L.iat),T.removeItemSync(C),cs.default().unlock(L.iat),_.notifyWaiters(),N.label=2;case 2:return[2]}})})},_.lockCorrector=function(w){for(var T=Date.now()-5e3,C=w,b=[],L=0;;){var N=C.keySync(L);if(N===null)break;b.push(N),L++}for(var K=!1,G=0;G<b.length;G++){var ee=b[G];if(ee.includes(l)){var Y=C.getItemSync(ee);if(Y!==null){var se=JSON.parse(Y);(se.timeRefreshed===void 0&&se.timeAcquired<T||se.timeRefreshed!==void 0&&se.timeRefreshed<T)&&(C.removeItemSync(ee),K=!0)}}}K&&_.notifyWaiters()},_.waiters=void 0,_}();e.default=y}));const j1={timeoutInSeconds:60},iv={name:"auth0-spa-js",version:"2.1.3"},sv=()=>Date.now();let pn=class Af extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,Af.prototype)}static fromPayload({error:e,error_description:t}){return new Af(e,t)}},F1=class ov extends pn{constructor(e,t,s,o=null){super(e,t),this.state=s,this.appState=o,Object.setPrototypeOf(this,ov.prototype)}},Rf=class av extends pn{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,av.prototype)}},U1=class lv extends Rf{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,lv.prototype)}},z1=class uv extends pn{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,uv.prototype)}},B1=class cv extends pn{constructor(e,t,s){super(e,t),this.mfa_token=s,Object.setPrototypeOf(this,cv.prototype)}},hv=class dv extends pn{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${Ay(e,["default"])}', scope: '${Ay(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,dv.prototype)}};function Ay(r,e=[]){return r&&!e.includes(r)?r:""}const Yu=()=>window.crypto,tf=()=>{const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(Yu().getRandomValues(new Uint8Array(43))).forEach(t=>e+=r[t%r.length]),e},Ry=r=>btoa(r),Pf=r=>{var{clientId:e}=r,t=ar(r,["clientId"]);return new URLSearchParams((s=>Object.keys(s).filter(o=>s[o]!==void 0).reduce((o,l)=>Object.assign(Object.assign({},o),{[l]:s[l]}),{}))(Object.assign({client_id:e},t))).toString()},Py=r=>(e=>decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))(r.replace(/_/g,"/").replace(/-/g,"+")),$1=async(r,e)=>{const t=await fetch(r,e);return{ok:t.ok,json:await t.json()}},W1=async(r,e,t)=>{const s=new AbortController;let o;return e.signal=s.signal,Promise.race([$1(r,e),new Promise((l,h)=>{o=setTimeout(()=>{s.abort(),h(new Error("Timeout when executing 'fetch'"))},t)})]).finally(()=>{clearTimeout(o)})},H1=async(r,e,t,s,o,l,h)=>{return d={auth:{audience:e,scope:t},timeout:o,fetchUrl:r,fetchOptions:s,useFormData:h},p=l,new Promise(function(y,_){const w=new MessageChannel;w.port1.onmessage=function(T){T.data.error?_(new Error(T.data.error)):y(T.data),w.port1.close()},p.postMessage(d,[w.port2])});var d,p},K1=async(r,e,t,s,o,l,h=1e4)=>o?H1(r,e,t,s,h,o,l):W1(r,s,h);async function G1(r,e){var{baseUrl:t,timeout:s,audience:o,scope:l,auth0Client:h,useFormData:d}=r,p=ar(r,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const y=d?Pf(p):JSON.stringify(p);return await async function(_,w,T,C,b,L,N){let K,G=null;for(let S=0;S<3;S++)try{K=await K1(_,T,C,b,L,N,w),G=null;break}catch(k){G=k}if(G)throw G;const ee=K.json,{error:Y,error_description:se}=ee,re=ar(ee,["error","error_description"]),{ok:R}=K;if(!R){const S=se||`HTTP error. Unable to fetch ${_}`;throw Y==="mfa_required"?new B1(Y,S,re.mfa_token):Y==="missing_refresh_token"?new hv(T,C):new pn(Y||"request_error",S)}return re}(`${t}/oauth/token`,s,o||"default",l,{method:"POST",body:y,headers:{"Content-Type":d?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(h||iv))}},e,d)}const Fu=(...r)=>{return(e=r.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let fs=class xf{constructor(e,t="@@auth0spajs@@",s){this.prefix=t,this.suffix=s,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[t,s,o,l]=e.split("::");return new xf({clientId:s,scope:l,audience:o},t)}static fromCacheEntry(e){const{scope:t,audience:s,client_id:o}=e;return new xf({scope:t,audience:s,clientId:o})}};class q1{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}}let fv=class{constructor(){this.enclosedCache=function(){let e={};return{set(t,s){e[t]=s},get(t){const s=e[t];if(s)return s},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}},Q1=class{constructor(e,t,s){this.cache=e,this.keyManifest=t,this.nowProvider=s||sv}async setIdToken(e,t,s){var o;const l=this.getIdTokenCacheKey(e);await this.cache.set(l,{id_token:t,decodedToken:s}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(l))}async getIdToken(e){const t=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){const s=await this.get(e);return!s||!s.id_token||!s.decodedToken?void 0:{id_token:s.id_token,decodedToken:s.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}}async get(e,t=0){var s;let o=await this.cache.get(e.toKey());if(!o){const d=await this.getCacheKeys();if(!d)return;const p=this.matchExistingCacheKey(e,d);p&&(o=await this.cache.get(p))}if(!o)return;const l=await this.nowProvider(),h=Math.floor(l/1e3);return o.expiresAt-t<h?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((s=this.keyManifest)===null||s===void 0?void 0:s.remove(e.toKey()))):o.body}async set(e){var t;const s=new fs({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(s.toKey(),o),await((t=this.keyManifest)===null||t===void 0?void 0:t.add(s.toKey()))}async clear(e){var t;const s=await this.getCacheKeys();s&&(await s.filter(o=>!e||o.includes(e)).reduce(async(o,l)=>{await o,await this.cache.remove(l)},Promise.resolve()),await((t=this.keyManifest)===null||t===void 0?void 0:t.clear()))}async wrapCacheEntry(e){const t=await this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new fs({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter(s=>{var o;const l=fs.fromKey(s),h=new Set(l.scope&&l.scope.split(" ")),d=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],p=l.scope&&d.reduce((y,_)=>y&&h.has(_),!0);return l.prefix==="@@auth0spajs@@"&&l.clientId===e.clientId&&l.audience===e.audience&&p})[0]}},X1=class{constructor(e,t,s){this.storage=e,this.clientId=t,this.cookieDomain=s,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const Ua=r=>typeof r=="number",Y1=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],J1=r=>{if(!r.id_token)throw new Error("ID token is required but missing");const e=(l=>{const h=l.split("."),[d,p,y]=h;if(h.length!==3||!d||!p||!y)throw new Error("ID token could not be decoded");const _=JSON.parse(Py(p)),w={__raw:l},T={};return Object.keys(_).forEach(C=>{w[C]=_[C],Y1.includes(C)||(T[C]=_[C])}),{encoded:{header:d,payload:p,signature:y},header:JSON.parse(Py(d)),claims:w,user:T}})(r.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==r.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${r.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(r.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==r.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${r.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==r.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${r.aud}" but found "${e.claims.aud}"`);if(r.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==r.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${r.nonce}", found "${e.claims.nonce}"`)}if(r.max_age&&!Ua(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!Ua(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Ua(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const t=r.leeway||60,s=new Date(r.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+t),s>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${s}) is after expiration time (${o})`);if(e.claims.nbf!=null&&Ua(e.claims.nbf)){const l=new Date(0);if(l.setUTCSeconds(e.claims.nbf-t),s<l)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${s}) is before ${l}`)}if(e.claims.auth_time!=null&&Ua(e.claims.auth_time)){const l=new Date(0);if(l.setUTCSeconds(parseInt(e.claims.auth_time)+r.max_age+t),s>l)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${s}) is after last auth at ${l}`)}if(r.organization){const l=r.organization.trim();if(l.startsWith("org_")){const h=l;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(h!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_id}"`)}else{const h=l.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(h!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${h}", found "${e.claims.org_name}"`)}}return e};var ps=yp(function(r,e){var t=ds&&ds.__assign||function(){return t=Object.assign||function(p){for(var y,_=1,w=arguments.length;_<w;_++)for(var T in y=arguments[_])Object.prototype.hasOwnProperty.call(y,T)&&(p[T]=y[T]);return p},t.apply(this,arguments)};function s(p,y){if(!y)return"";var _="; "+p;return y===!0?_:_+"="+y}function o(p,y,_){return encodeURIComponent(p).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(y).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(w){if(typeof w.expires=="number"){var T=new Date;T.setMilliseconds(T.getMilliseconds()+864e5*w.expires),w.expires=T}return s("Expires",w.expires?w.expires.toUTCString():"")+s("Domain",w.domain)+s("Path",w.path)+s("Secure",w.secure)+s("SameSite",w.sameSite)}(_)}function l(p){for(var y={},_=p?p.split("; "):[],w=/(%[\dA-F]{2})+/gi,T=0;T<_.length;T++){var C=_[T].split("="),b=C.slice(1).join("=");b.charAt(0)==='"'&&(b=b.slice(1,-1));try{y[C[0].replace(w,decodeURIComponent)]=b.replace(w,decodeURIComponent)}catch{}}return y}function h(){return l(document.cookie)}function d(p,y,_){document.cookie=o(p,y,t({path:"/"},_))}e.__esModule=!0,e.encode=o,e.parse=l,e.getAll=h,e.get=function(p){return h()[p]},e.set=d,e.remove=function(p,y){d(p,"",t(t({},y),{expires:-1}))}});gp(ps),ps.encode,ps.parse,ps.getAll;var Z1=ps.get,pv=ps.set,mv=ps.remove;const _o={get(r){const e=Z1(r);if(e!==void 0)return JSON.parse(e)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0,sameSite:"none"}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),pv(r,JSON.stringify(e),s)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),mv(r,t)}},eT={get(r){return _o.get(r)||_o.get(`_legacy_${r}`)},save(r,e,t){let s={};window.location.protocol==="https:"&&(s={secure:!0}),t!=null&&t.daysUntilExpire&&(s.expires=t.daysUntilExpire),t!=null&&t.cookieDomain&&(s.domain=t.cookieDomain),pv(`_legacy_${r}`,JSON.stringify(e),s),_o.save(r,e,t)},remove(r,e){let t={};e!=null&&e.cookieDomain&&(t.domain=e.cookieDomain),mv(r,t),_o.remove(r,e),_o.remove(`_legacy_${r}`,e)}},tT={get(r){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(r);return e!=null?JSON.parse(e):void 0},save(r,e){sessionStorage.setItem(r,JSON.stringify(e))},remove(r){sessionStorage.removeItem(r)}};function nT(r,e,t){var s=e===void 0?null:e,o=function(p,y){var _=atob(p);if(y){for(var w=new Uint8Array(_.length),T=0,C=_.length;T<C;++T)w[T]=_.charCodeAt(T);return String.fromCharCode.apply(null,new Uint16Array(w.buffer))}return _}(r,t!==void 0&&t),l=o.indexOf(`
`,10)+1,h=o.substring(l)+(s?"//# sourceMappingURL="+s:""),d=new Blob([h],{type:"application/javascript"});return URL.createObjectURL(d)}var xy,Ny,by,nf,rT=(xy="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",Ny=null,by=!1,function(r){return nf=nf||nT(xy,Ny,by),new Worker(nf,r)});const rf={};class iT{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var t;const s=new Set(((t=await this.cache.get(this.manifestKey))===null||t===void 0?void 0:t.keys)||[]);s.add(e),await this.cache.set(this.manifestKey,{keys:[...s]})}async remove(e){const t=await this.cache.get(this.manifestKey);if(t){const s=new Set(t.keys);return s.delete(e),s.size>0?await this.cache.set(this.manifestKey,{keys:[...s]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}}const sT={memory:()=>new fv().enclosedCache,localstorage:()=>new q1},Dy=r=>sT[r],Oy=r=>{const{openUrl:e,onRedirect:t}=r,s=ar(r,["openUrl","onRedirect"]);return Object.assign(Object.assign({},s),{openUrl:e===!1||e?e:t})},sf=new M1;let oT=class{constructor(e){let t,s;if(this.userCache=new fv().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await sf.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!Yu())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Yu().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)s=e.cache;else{if(t=e.cacheLocation||"memory",!Dy(t))throw new Error(`Invalid cache location "${t}"`);s=Dy(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?_o:eT,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(h=>`auth0.${h}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:tT;var l;this.scope=Fu("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new X1(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||sv,this.cacheManager=new Q1(s,s.allKeys?void 0:new iT(s,this.options.clientId),this.nowProvider),this.domainUrl=(l=this.options.domain,/^https?:\/\//.test(l)?l:`https://${l}`),this.tokenIssuer=((h,d)=>h?h.startsWith("https://")?h:`https://${h}/`:`${d}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&t==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new rT)}_url(e){const t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||iv)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${Pf(e)}`)}async _verifyIdToken(e,t,s){const o=await this.nowProvider();return J1({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:s,leeway:this.options.leeway,max_age:(l=this.options.authorizationParams.max_age,typeof l!="string"?l:parseInt(l,10)||void 0),now:o});var l}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,t,s){const o=Ry(tf()),l=Ry(tf()),h=tf(),d=(_=>{const w=new Uint8Array(_);return(T=>{const C={"+":"-","/":"_","=":""};return T.replace(/[+/=]/g,b=>C[b])})(window.btoa(String.fromCharCode(...Array.from(w))))})(await(async _=>await Yu().subtle.digest({name:"SHA-256"},new TextEncoder().encode(_)))(h)),p=((_,w,T,C,b,L,N,K)=>Object.assign(Object.assign(Object.assign({client_id:_.clientId},_.authorizationParams),T),{scope:Fu(w,T.scope),response_type:"code",response_mode:K||"query",state:C,nonce:b,redirect_uri:N||_.authorizationParams.redirect_uri,code_challenge:L,code_challenge_method:"S256"}))(this.options,this.scope,e,o,l,d,e.redirect_uri||this.options.authorizationParams.redirect_uri||s,t==null?void 0:t.response_mode),y=this._authorizeUrl(p);return{nonce:l,code_verifier:h,scope:p.scope,audience:p.audience||"default",redirect_uri:p.redirect_uri,state:o,url:y}}async loginWithPopup(e,t){var s;if(e=e||{},!(t=t||{}).popup&&(t.popup=(d=>{const p=window.screenX+(window.innerWidth-400)/2,y=window.screenY+(window.innerHeight-600)/2;return window.open(d,"auth0:authorize:popup",`left=${p},top=${y},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=o.url;const l=await(d=>new Promise((p,y)=>{let _;const w=setInterval(()=>{d.popup&&d.popup.closed&&(clearInterval(w),clearTimeout(T),window.removeEventListener("message",_,!1),y(new z1(d.popup)))},1e3),T=setTimeout(()=>{clearInterval(w),y(new U1(d.popup)),window.removeEventListener("message",_,!1)},1e3*(d.timeoutInSeconds||60));_=function(C){if(C.data&&C.data.type==="authorization_response"){if(clearTimeout(T),clearInterval(w),window.removeEventListener("message",_,!1),d.popup.close(),C.data.response.error)return y(pn.fromPayload(C.data.response));p(C.data.response)}},window.addEventListener("message",_)}))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==l.state)throw new pn("state_mismatch","Invalid state");const h=((s=e.authorizationParams)===null||s===void 0?void 0:s.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:l.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:h})}async getUser(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const t=await this._getIdTokenFromCache();return(e=t==null?void 0:t.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var t;const s=Oy(e),{openUrl:o,fragment:l,appState:h}=s,d=ar(s,["openUrl","fragment","appState"]),p=((t=d.authorizationParams)===null||t===void 0?void 0:t.organization)||this.options.authorizationParams.organization,y=await this._prepareAuthorizeUrl(d.authorizationParams||{}),{url:_}=y,w=ar(y,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},w),{appState:h}),p&&{organization:p}));const T=l?`${_}#${l}`:_;o?await o(T):window.location.assign(T)}async handleRedirectCallback(e=window.location.href){const t=e.split("?").slice(1);if(t.length===0)throw new Error("There are no query params available for parsing.");const{state:s,code:o,error:l,error_description:h}=(w=>{w.indexOf("#")>-1&&(w=w.substring(0,w.indexOf("#")));const T=new URLSearchParams(w);return{state:T.get("state"),code:T.get("code")||void 0,error:T.get("error")||void 0,error_description:T.get("error_description")||void 0}})(t.join("")),d=this.transactionManager.get();if(!d)throw new pn("missing_transaction","Invalid state");if(this.transactionManager.remove(),l)throw new F1(l,h||l,s,d.appState);if(!d.code_verifier||d.state&&d.state!==s)throw new pn("state_mismatch","Invalid state");const p=d.organization,y=d.nonce,_=d.redirect_uri;return await this._requestToken(Object.assign({audience:d.audience,scope:d.scope,code_verifier:d.code_verifier,grant_type:"authorization_code",code:o},_?{redirect_uri:_}:{}),{nonceIn:y,organization:p}),{appState:d.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var t;const s=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Fu(this.scope,(t=e.authorizationParams)===null||t===void 0?void 0:t.scope)})}),o=await((l,h)=>{let d=rf[h];return d||(d=l().finally(()=>{delete rf[h],d=null}),rf[h]=d),d})(()=>this._getTokenSilently(s),`${this.options.clientId}::${s.authorizationParams.audience}::${s.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:t}=e,s=ar(e,["cacheMode"]);if(t!=="off"){const o=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(t!=="cache-only"){if(!await(async(o,l=3)=>{for(let h=0;h<l;h++)if(await o())return!0;return!1})(()=>sf.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new Rf;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),t!=="off"){const y=await this._getEntryFromCache({scope:s.authorizationParams.scope,audience:s.authorizationParams.audience||"default",clientId:this.options.clientId});if(y)return y}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(s):await this._getTokenFromIFrame(s),{id_token:l,access_token:h,oauthTokenScope:d,expires_in:p}=o;return Object.assign(Object.assign({id_token:l,access_token:h},d?{scope:d}:null),{expires_in:p})}finally{await sf.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},t={}){var s;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Fu(this.scope,(s=e.authorizationParams)===null||s===void 0?void 0:s.scope)})});return t=Object.assign(Object.assign({},j1),t),await this.loginWithPopup(o,t),(await this.cacheManager.get(new fs({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const t=e.logoutParams||{},{federated:s}=t,o=ar(t,["federated"]),l=s?"&federated":"";return this._url(`/v2/logout?${Pf(Object.assign({clientId:e.clientId},o))}`)+l}async logout(e={}){const t=Oy(e),{openUrl:s}=t,o=ar(t,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const l=this._buildLogoutUrl(o);s?await s(l):s!==!1&&window.location.assign(l)}async _getTokenFromIFrame(e){const t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),s=this.cookieStorage.get(this.orgHintCookieName);s&&!t.organization&&(t.organization=s);const{url:o,state:l,nonce:h,code_verifier:d,redirect_uri:p,scope:y,audience:_}=await this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new pn("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const w=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,T=await((b,L,N=60)=>new Promise((K,G)=>{const ee=window.document.createElement("iframe");ee.setAttribute("width","0"),ee.setAttribute("height","0"),ee.style.display="none";const Y=()=>{window.document.body.contains(ee)&&(window.document.body.removeChild(ee),window.removeEventListener("message",se,!1))};let se;const re=setTimeout(()=>{G(new Rf),Y()},1e3*N);se=function(R){if(R.origin!=L||!R.data||R.data.type!=="authorization_response")return;const S=R.source;S&&S.close(),R.data.response.error?G(pn.fromPayload(R.data.response)):K(R.data.response),clearTimeout(re),window.removeEventListener("message",se,!1),setTimeout(Y,2e3)},window.addEventListener("message",se,!1),window.document.body.appendChild(ee),ee.setAttribute("src",b)}))(o,this.domainUrl,w);if(l!==T.state)throw new pn("state_mismatch","Invalid state");const C=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:d,code:T.code,grant_type:"authorization_code",redirect_uri:p,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:h,organization:t.organization});return Object.assign(Object.assign({},C),{scope:y,oauthTokenScope:C.scope,audience:_})}catch(w){throw w.error==="login_required"&&this.logout({openUrl:!1}),w}}async _getTokenUsingRefreshToken(e){const t=await this.cacheManager.get(new fs({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new hv(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const s=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const l=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:s}),o&&{timeout:o}));return Object.assign(Object.assign({},l),{scope:e.authorizationParams.scope,oauthTokenScope:l.scope,audience:e.authorizationParams.audience||"default"})}catch(l){if((l.message.indexOf("Missing Refresh Token")>-1||l.message&&l.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw l}}async _saveEntryInCache(e){const{id_token:t,decodedToken:s}=e,o=ar(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:s}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",t=await this.cacheManager.getIdToken(new fs({clientId:this.options.clientId,audience:e,scope:this.scope})),s=this.userCache.get("@@user@@");return t&&t.id_token===(s==null?void 0:s.id_token)?s:(this.userCache.set("@@user@@",t),t)}async _getEntryFromCache({scope:e,audience:t,clientId:s}){const o=await this.cacheManager.get(new fs({scope:e,audience:t,clientId:s}),60);if(o&&o.access_token){const{access_token:l,oauthTokenScope:h,expires_in:d}=o,p=await this._getIdTokenFromCache();return p&&Object.assign(Object.assign({id_token:p.id_token,access_token:l},h?{scope:h}:null),{expires_in:d})}}async _requestToken(e,t){const{nonceIn:s,organization:o}=t||{},l=await G1(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),h=await this._verifyIdToken(l.id_token,s,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},l),{decodedToken:h,scope:e.scope,audience:e.audience||"default"}),l.scope?{oauthTokenScope:l.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||h.claims.org_id),Object.assign(Object.assign({},l),{decodedToken:h})}};var gv={isAuthenticated:!1,isLoading:!0},Nr=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},aT=At(At({},gv),{buildAuthorizeUrl:Nr,buildLogoutUrl:Nr,getAccessTokenSilently:Nr,getAccessTokenWithPopup:Nr,getIdTokenClaims:Nr,loginWithRedirect:Nr,loginWithPopup:Nr,logout:Nr,handleRedirectCallback:Nr}),yv=$.createContext(aT),Vy=function(r){V1(e,r);function e(t,s){var o=r.call(this,s||t)||this;return o.error=t,o.error_description=s,Object.setPrototypeOf(o,e.prototype),o}return e}(Error),lT=/[?&]code=[^&]+/,uT=/[?&]state=[^&]+/,cT=/[?&]error=[^&]+/,hT=function(r){return r===void 0&&(r=window.location.search),(lT.test(r)||cT.test(r))&&uT.test(r)},_v=function(r){return function(e){return e instanceof Error?e:e!==null&&typeof e=="object"&&"error"in e&&typeof e.error=="string"?"error_description"in e&&typeof e.error_description=="string"?new Vy(e.error,e.error_description):new Vy(e.error):new Error(r)}},Ly=_v("Login failed"),of=_v("Get access token failed"),vv=function(r){var e;r!=null&&r.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),r.authorizationParams=r.authorizationParams||{},r.authorizationParams.redirect_uri=r.redirectUri,delete r.redirectUri),!((e=r==null?void 0:r.authorizationParams)===null||e===void 0)&&e.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),r.authorizationParams.redirect_uri=r.authorizationParams.redirectUri,delete r.authorizationParams.redirectUri)},dT=function(r,e){switch(e.type){case"LOGIN_POPUP_STARTED":return At(At({},r),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return At(At({},r),{isAuthenticated:!!e.user,user:e.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return r.user===e.user?r:At(At({},r),{isAuthenticated:!!e.user,user:e.user});case"LOGOUT":return At(At({},r),{isAuthenticated:!1,user:void 0});case"ERROR":return At(At({},r),{isLoading:!1,error:e.error})}},fT=function(r){return vv(r),At(At({},r),{auth0Client:{name:"auth0-react",version:"2.3.0"}})},pT=function(r){window.history.replaceState({},document.title,(r==null?void 0:r.returnTo)||window.location.pathname)},mT=function(r){var e=r.children,t=r.skipRedirectCallback,s=r.onRedirectCallback,o=s===void 0?pT:s,l=r.context,h=l===void 0?yv:l,d=L1(r,["children","skipRedirectCallback","onRedirectCallback","context"]),p=$.useState(function(){return new oT(fT(d))})[0],y=$.useReducer(dT,gv),_=y[0],w=y[1],T=$.useRef(!1),C=$.useCallback(function(re){return w({type:"ERROR",error:re}),re},[]);$.useEffect(function(){T.current||(T.current=!0,function(){return go(void 0,void 0,void 0,function(){var re,R,S;return yo(this,function(k){switch(k.label){case 0:return k.trys.push([0,7,,8]),re=void 0,hT()&&!t?[4,p.handleRedirectCallback()]:[3,3];case 1:return R=k.sent().appState,[4,p.getUser()];case 2:return re=k.sent(),o(R,re),[3,6];case 3:return[4,p.checkSession()];case 4:return k.sent(),[4,p.getUser()];case 5:re=k.sent(),k.label=6;case 6:return w({type:"INITIALISED",user:re}),[3,8];case 7:return S=k.sent(),C(Ly(S)),[3,8];case 8:return[2]}})})}())},[p,o,t,C]);var b=$.useCallback(function(re){return vv(re),p.loginWithRedirect(re)},[p]),L=$.useCallback(function(re,R){return go(void 0,void 0,void 0,function(){var S,k;return yo(this,function(x){switch(x.label){case 0:w({type:"LOGIN_POPUP_STARTED"}),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,p.loginWithPopup(re,R)];case 2:return x.sent(),[3,4];case 3:return S=x.sent(),C(Ly(S)),[2];case 4:return[4,p.getUser()];case 5:return k=x.sent(),w({type:"LOGIN_POPUP_COMPLETE",user:k}),[2]}})})},[p]),N=$.useCallback(function(re){return re===void 0&&(re={}),go(void 0,void 0,void 0,function(){return yo(this,function(R){switch(R.label){case 0:return[4,p.logout(re)];case 1:return R.sent(),(re.openUrl||re.openUrl===!1)&&w({type:"LOGOUT"}),[2]}})})},[p]),K=$.useCallback(function(re){return go(void 0,void 0,void 0,function(){var R,S,k,x;return yo(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,3,5]),[4,p.getTokenSilently(re)];case 1:return R=O.sent(),[3,5];case 2:throw S=O.sent(),of(S);case 3:return k=w,x={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,p.getUser()];case 4:return k.apply(void 0,[(x.user=O.sent(),x)]),[7];case 5:return[2,R]}})})},[p]),G=$.useCallback(function(re,R){return go(void 0,void 0,void 0,function(){var S,k,x,O;return yo(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,3,5]),[4,p.getTokenWithPopup(re,R)];case 1:return S=j.sent(),[3,5];case 2:throw k=j.sent(),of(k);case 3:return x=w,O={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,p.getUser()];case 4:return x.apply(void 0,[(O.user=j.sent(),O)]),[7];case 5:return[2,S]}})})},[p]),ee=$.useCallback(function(){return p.getIdTokenClaims()},[p]),Y=$.useCallback(function(re){return go(void 0,void 0,void 0,function(){var R,S,k;return yo(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,3,5]),[4,p.handleRedirectCallback(re)];case 1:return[2,x.sent()];case 2:throw R=x.sent(),of(R);case 3:return S=w,k={type:"HANDLE_REDIRECT_COMPLETE"},[4,p.getUser()];case 4:return S.apply(void 0,[(k.user=x.sent(),k)]),[7];case 5:return[2]}})})},[p]),se=$.useMemo(function(){return At(At({},_),{getAccessTokenSilently:K,getAccessTokenWithPopup:G,getIdTokenClaims:ee,loginWithRedirect:b,loginWithPopup:L,logout:N,handleRedirectCallback:Y})},[_,K,G,ee,b,L,N,Y]);return Mr.createElement(h.Provider,{value:se},e)},gl=function(r){return r===void 0&&(r=yv),$.useContext(r)},My={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},gT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,_=l>>2,w=(l&3)<<4|d>>4;let T=(d&15)<<2|y>>6,C=y&63;p||(C=64,h||(T=64)),s.push(t[_],t[w],t[T],t[C])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(wv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):gT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||w==null)throw new yT;const T=l<<2|d>>4;if(s.push(T),y!==64){const C=d<<4&240|y>>2;if(s.push(C),w!==64){const b=y<<6&192|w;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class yT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _T=function(r){const e=wv(r);return Ev.encodeByteArray(e,!0)},uc=function(r){return _T(r).replace(/\./g,"")},vT=function(r){try{return Ev.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=()=>wT().__FIREBASE_DEFAULTS__,TT=()=>{if(typeof process>"u"||typeof My>"u")return;const r=My.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},IT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&vT(r[1]);return e&&JSON.parse(e)},_p=()=>{try{return ET()||TT()||IT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ST=r=>{var e,t;return(t=(e=_p())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},CT=r=>{const e=ST(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Tv=()=>{var r;return(r=_p())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[uc(JSON.stringify(t)),uc(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PT(){var r;const e=(r=_p())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){return!PT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function bT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="FirebaseError";class jo extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=DT,Object.setPrototypeOf(this,jo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iv.prototype.create)}}class Iv{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?OT(l,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new jo(o,d,s)}}function OT(r,e){return r.replace(VT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const VT=/\{\$([^}]+)}/g;function cc(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(jy(l)&&jy(h)){if(!cc(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function jy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(r){return r&&r._delegate?r._delegate:r}class ol{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new kT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jT(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:MT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MT(r){return r===hs?void 0:r}function jT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new LT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const UT={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},zT=Le.INFO,BT={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},$T=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=BT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=zT,this._logHandler=$T,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const WT=(r,e)=>e.some(t=>r instanceof t);let Fy,Uy;function HT(){return Fy||(Fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KT(){return Uy||(Uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cv=new WeakMap,Nf=new WeakMap,kv=new WeakMap,af=new WeakMap,vp=new WeakMap;function GT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(wi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Cv.set(t,r)}).catch(()=>{}),vp.set(e,r),e}function qT(r){if(Nf.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Nf.set(r,e)}let bf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Nf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function QT(r){bf=r(bf)}function XT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(lf(this),e,...t);return kv.set(s,e.sort?e.sort():[e]),wi(s)}:KT().includes(r)?function(...e){return r.apply(lf(this),e),wi(Cv.get(this))}:function(...e){return wi(r.apply(lf(this),e))}}function YT(r){return typeof r=="function"?XT(r):(r instanceof IDBTransaction&&qT(r),WT(r,HT())?new Proxy(r,bf):r)}function wi(r){if(r instanceof IDBRequest)return GT(r);if(af.has(r))return af.get(r);const e=YT(r);return e!==r&&(af.set(r,e),vp.set(e,r)),e}const lf=r=>vp.get(r);function JT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=wi(h);return s&&h.addEventListener("upgradeneeded",p=>{s(wi(h.result),p.oldVersion,p.newVersion,wi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const ZT=["get","getKey","getAll","getAllKeys","count"],eI=["put","add","delete","clear"],uf=new Map;function zy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(uf.get(e))return uf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=eI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||ZT.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return uf.set(e,l),l}QT(r=>({...r,get:(e,t,s)=>zy(e,t)||r.get(e,t,s),has:(e,t)=>!!zy(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function nI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Df="@firebase/app",By="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new Sv("@firebase/app"),rI="@firebase/app-compat",iI="@firebase/analytics-compat",sI="@firebase/analytics",oI="@firebase/app-check-compat",aI="@firebase/app-check",lI="@firebase/auth",uI="@firebase/auth-compat",cI="@firebase/database",hI="@firebase/data-connect",dI="@firebase/database-compat",fI="@firebase/functions",pI="@firebase/functions-compat",mI="@firebase/installations",gI="@firebase/installations-compat",yI="@firebase/messaging",_I="@firebase/messaging-compat",vI="@firebase/performance",wI="@firebase/performance-compat",EI="@firebase/remote-config",TI="@firebase/remote-config-compat",II="@firebase/storage",SI="@firebase/storage-compat",CI="@firebase/firestore",kI="@firebase/vertexai",AI="@firebase/firestore-compat",RI="firebase",PI="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",xI={[Df]:"fire-core",[rI]:"fire-core-compat",[sI]:"fire-analytics",[iI]:"fire-analytics-compat",[aI]:"fire-app-check",[oI]:"fire-app-check-compat",[lI]:"fire-auth",[uI]:"fire-auth-compat",[cI]:"fire-rtdb",[hI]:"fire-data-connect",[dI]:"fire-rtdb-compat",[fI]:"fire-fn",[pI]:"fire-fn-compat",[mI]:"fire-iid",[gI]:"fire-iid-compat",[yI]:"fire-fcm",[_I]:"fire-fcm-compat",[vI]:"fire-perf",[wI]:"fire-perf-compat",[EI]:"fire-rc",[TI]:"fire-rc-compat",[II]:"fire-gcs",[SI]:"fire-gcs-compat",[CI]:"fire-fst",[AI]:"fire-fst-compat",[kI]:"fire-vertex","fire-js":"fire-js",[RI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,NI=new Map,Vf=new Map;function $y(r,e){try{r.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function dc(r){const e=r.name;if(Vf.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Vf.set(e,r);for(const t of hc.values())$y(t,r);for(const t of NI.values())$y(t,r);return!0}function bI(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Iv("app","Firebase",DI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ol("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=PI;function Av(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Of,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=Tv()),!t)throw Ei.create("no-options");const l=hc.get(o);if(l){if(cc(t,l.options)&&cc(s,l.config))return l;throw Ei.create("duplicate-app",{appName:o})}const h=new FT(o);for(const p of Vf.values())h.addComponent(p);const d=new OI(t,s,h);return hc.set(o,d),d}function LI(r=Of){const e=hc.get(r);if(!e&&r===Of&&Tv())return Av();if(!e)throw Ei.create("no-app",{appName:r});return e}function So(r,e,t){var s;let o=(s=xI[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(d.join(" "));return}dc(new ol(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firebase-heartbeat-database",jI=1,al="firebase-heartbeat-store";let cf=null;function Rv(){return cf||(cf=JT(MI,jI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ei.create("idb-open",{originalErrorMessage:r.message})})),cf}async function FI(r){try{const t=(await Rv()).transaction(al),s=await t.objectStore(al).get(Pv(r));return await t.done,s}catch(e){if(e instanceof jo)jr.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(t.message)}}}async function Wy(r,e){try{const s=(await Rv()).transaction(al,"readwrite");await s.objectStore(al).put(e,Pv(r)),await s.done}catch(t){if(t instanceof jo)jr.warn(t.message);else{const s=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jr.warn(s.message)}}}function Pv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1024,zI=30*24*60*60*1e3;class BI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Hy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const d=new Date(h.date).valueOf();return Date.now()-d<=zI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){jr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Hy(),{heartbeatsToSend:s,unsentEntries:o}=$I(this._heartbeatsCache.heartbeats),l=uc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return jr.warn(t),""}}}function Hy(){return new Date().toISOString().substring(0,10)}function $I(r,e=UI){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ky(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ky(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class WI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?bT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ky(r){return uc(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(r){dc(new ol("platform-logger",e=>new tI(e),"PRIVATE")),dc(new ol("heartbeat",e=>new BI(e),"PRIVATE")),So(Df,By,r),So(Df,By,"esm2017"),So("fire-js","")}HI("");var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,xv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function k(){}k.prototype=S.prototype,R.D=S.prototype,R.prototype=new k,R.prototype.constructor=R,R.C=function(x,O,j){for(var P=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)P[qe-2]=arguments[qe];return S.prototype[O].apply(x,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,S,k){k||(k=0);var x=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)x[O]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(O=0;16>O;++O)x[O]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=R.g[0],k=R.g[1],O=R.g[2];var j=R.g[3],P=S+(j^k&(O^j))+x[0]+3614090360&4294967295;S=k+(P<<7&4294967295|P>>>25),P=j+(O^S&(k^O))+x[1]+3905402710&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(k^j&(S^k))+x[2]+606105819&4294967295,O=j+(P<<17&4294967295|P>>>15),P=k+(S^O&(j^S))+x[3]+3250441966&4294967295,k=O+(P<<22&4294967295|P>>>10),P=S+(j^k&(O^j))+x[4]+4118548399&4294967295,S=k+(P<<7&4294967295|P>>>25),P=j+(O^S&(k^O))+x[5]+1200080426&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(k^j&(S^k))+x[6]+2821735955&4294967295,O=j+(P<<17&4294967295|P>>>15),P=k+(S^O&(j^S))+x[7]+4249261313&4294967295,k=O+(P<<22&4294967295|P>>>10),P=S+(j^k&(O^j))+x[8]+1770035416&4294967295,S=k+(P<<7&4294967295|P>>>25),P=j+(O^S&(k^O))+x[9]+2336552879&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(k^j&(S^k))+x[10]+4294925233&4294967295,O=j+(P<<17&4294967295|P>>>15),P=k+(S^O&(j^S))+x[11]+2304563134&4294967295,k=O+(P<<22&4294967295|P>>>10),P=S+(j^k&(O^j))+x[12]+1804603682&4294967295,S=k+(P<<7&4294967295|P>>>25),P=j+(O^S&(k^O))+x[13]+4254626195&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(k^j&(S^k))+x[14]+2792965006&4294967295,O=j+(P<<17&4294967295|P>>>15),P=k+(S^O&(j^S))+x[15]+1236535329&4294967295,k=O+(P<<22&4294967295|P>>>10),P=S+(O^j&(k^O))+x[1]+4129170786&4294967295,S=k+(P<<5&4294967295|P>>>27),P=j+(k^O&(S^k))+x[6]+3225465664&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^k&(j^S))+x[11]+643717713&4294967295,O=j+(P<<14&4294967295|P>>>18),P=k+(j^S&(O^j))+x[0]+3921069994&4294967295,k=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(k^O))+x[5]+3593408605&4294967295,S=k+(P<<5&4294967295|P>>>27),P=j+(k^O&(S^k))+x[10]+38016083&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^k&(j^S))+x[15]+3634488961&4294967295,O=j+(P<<14&4294967295|P>>>18),P=k+(j^S&(O^j))+x[4]+3889429448&4294967295,k=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(k^O))+x[9]+568446438&4294967295,S=k+(P<<5&4294967295|P>>>27),P=j+(k^O&(S^k))+x[14]+3275163606&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^k&(j^S))+x[3]+4107603335&4294967295,O=j+(P<<14&4294967295|P>>>18),P=k+(j^S&(O^j))+x[8]+1163531501&4294967295,k=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(k^O))+x[13]+2850285829&4294967295,S=k+(P<<5&4294967295|P>>>27),P=j+(k^O&(S^k))+x[2]+4243563512&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^k&(j^S))+x[7]+1735328473&4294967295,O=j+(P<<14&4294967295|P>>>18),P=k+(j^S&(O^j))+x[12]+2368359562&4294967295,k=O+(P<<20&4294967295|P>>>12),P=S+(k^O^j)+x[5]+4294588738&4294967295,S=k+(P<<4&4294967295|P>>>28),P=j+(S^k^O)+x[8]+2272392833&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^k)+x[11]+1839030562&4294967295,O=j+(P<<16&4294967295|P>>>16),P=k+(O^j^S)+x[14]+4259657740&4294967295,k=O+(P<<23&4294967295|P>>>9),P=S+(k^O^j)+x[1]+2763975236&4294967295,S=k+(P<<4&4294967295|P>>>28),P=j+(S^k^O)+x[4]+1272893353&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^k)+x[7]+4139469664&4294967295,O=j+(P<<16&4294967295|P>>>16),P=k+(O^j^S)+x[10]+3200236656&4294967295,k=O+(P<<23&4294967295|P>>>9),P=S+(k^O^j)+x[13]+681279174&4294967295,S=k+(P<<4&4294967295|P>>>28),P=j+(S^k^O)+x[0]+3936430074&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^k)+x[3]+3572445317&4294967295,O=j+(P<<16&4294967295|P>>>16),P=k+(O^j^S)+x[6]+76029189&4294967295,k=O+(P<<23&4294967295|P>>>9),P=S+(k^O^j)+x[9]+3654602809&4294967295,S=k+(P<<4&4294967295|P>>>28),P=j+(S^k^O)+x[12]+3873151461&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^k)+x[15]+530742520&4294967295,O=j+(P<<16&4294967295|P>>>16),P=k+(O^j^S)+x[2]+3299628645&4294967295,k=O+(P<<23&4294967295|P>>>9),P=S+(O^(k|~j))+x[0]+4096336452&4294967295,S=k+(P<<6&4294967295|P>>>26),P=j+(k^(S|~O))+x[7]+1126891415&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~k))+x[14]+2878612391&4294967295,O=j+(P<<15&4294967295|P>>>17),P=k+(j^(O|~S))+x[5]+4237533241&4294967295,k=O+(P<<21&4294967295|P>>>11),P=S+(O^(k|~j))+x[12]+1700485571&4294967295,S=k+(P<<6&4294967295|P>>>26),P=j+(k^(S|~O))+x[3]+2399980690&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~k))+x[10]+4293915773&4294967295,O=j+(P<<15&4294967295|P>>>17),P=k+(j^(O|~S))+x[1]+2240044497&4294967295,k=O+(P<<21&4294967295|P>>>11),P=S+(O^(k|~j))+x[8]+1873313359&4294967295,S=k+(P<<6&4294967295|P>>>26),P=j+(k^(S|~O))+x[15]+4264355552&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~k))+x[6]+2734768916&4294967295,O=j+(P<<15&4294967295|P>>>17),P=k+(j^(O|~S))+x[13]+1309151649&4294967295,k=O+(P<<21&4294967295|P>>>11),P=S+(O^(k|~j))+x[4]+4149444226&4294967295,S=k+(P<<6&4294967295|P>>>26),P=j+(k^(S|~O))+x[11]+3174756917&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~k))+x[2]+718787259&4294967295,O=j+(P<<15&4294967295|P>>>17),P=k+(j^(O|~S))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+j&4294967295}s.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var k=S-this.blockSize,x=this.B,O=this.h,j=0;j<S;){if(O==0)for(;j<=k;)o(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<S;)if(x[O++]=R.charCodeAt(j++),O==this.blockSize){o(this,x),O=0;break}}else for(;j<S;)if(x[O++]=R[j++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var k=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=k&255,k/=256;for(this.u(R),R=Array(16),S=k=0;4>S;++S)for(var x=0;32>x;x+=8)R[k++]=this.g[S]>>>x&255;return R};function l(R,S){var k=d;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=S(R)}function h(R,S){this.h=S;for(var k=[],x=!0,O=R.length-1;0<=O;O--){var j=R[O]|0;x&&j==S||(k[O]=j,x=!1)}this.g=k}var d={};function p(R){return-128<=R&&128>R?l(R,function(S){return new h([S|0],0>S?-1:0)}):new h([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return N(y(-R));for(var S=[],k=1,x=0;R>=k;x++)S[x]=R/k|0,k*=4294967296;return new h(S,0)}function _(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return N(_(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=y(Math.pow(S,8)),x=w,O=0;O<R.length;O+=8){var j=Math.min(8,R.length-O),P=parseInt(R.substring(O,O+j),S);8>j?(j=y(Math.pow(S,j)),x=x.j(j).add(y(P))):(x=x.j(k),x=x.add(y(P)))}return x}var w=p(0),T=p(1),C=p(16777216);r=h.prototype,r.m=function(){if(L(this))return-N(this).m();for(var R=0,S=1,k=0;k<this.g.length;k++){var x=this.i(k);R+=(0<=x?x:4294967296+x)*S,S*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(L(this))return"-"+N(this).toString(R);for(var S=y(Math.pow(R,6)),k=this,x="";;){var O=Y(k,S).g;k=K(k,O.j(S));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(R);if(k=O,b(k))return j+x;for(;6>j.length;)j="0"+j;x=j+x}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function L(R){return R.h==-1}r.l=function(R){return R=K(this,R),L(R)?-1:b(R)?0:1};function N(R){for(var S=R.g.length,k=[],x=0;x<S;x++)k[x]=~R.g[x];return new h(k,~R.h).add(T)}r.abs=function(){return L(this)?N(this):this},r.add=function(R){for(var S=Math.max(this.g.length,R.g.length),k=[],x=0,O=0;O<=S;O++){var j=x+(this.i(O)&65535)+(R.i(O)&65535),P=(j>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);x=P>>>16,j&=65535,P&=65535,k[O]=P<<16|j}return new h(k,k[k.length-1]&-2147483648?-1:0)};function K(R,S){return R.add(N(S))}r.j=function(R){if(b(this)||b(R))return w;if(L(this))return L(R)?N(this).j(N(R)):N(N(this).j(R));if(L(R))return N(this.j(N(R)));if(0>this.l(C)&&0>R.l(C))return y(this.m()*R.m());for(var S=this.g.length+R.g.length,k=[],x=0;x<2*S;x++)k[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<R.g.length;O++){var j=this.i(x)>>>16,P=this.i(x)&65535,qe=R.i(O)>>>16,ot=R.i(O)&65535;k[2*x+2*O]+=P*ot,G(k,2*x+2*O),k[2*x+2*O+1]+=j*ot,G(k,2*x+2*O+1),k[2*x+2*O+1]+=P*qe,G(k,2*x+2*O+1),k[2*x+2*O+2]+=j*qe,G(k,2*x+2*O+2)}for(x=0;x<S;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=S;x<2*S;x++)k[x]=0;return new h(k,0)};function G(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function ee(R,S){this.g=R,this.h=S}function Y(R,S){if(b(S))throw Error("division by zero");if(b(R))return new ee(w,w);if(L(R))return S=Y(N(R),S),new ee(N(S.g),N(S.h));if(L(S))return S=Y(R,N(S)),new ee(N(S.g),S.h);if(30<R.g.length){if(L(R)||L(S))throw Error("slowDivide_ only works with positive integers.");for(var k=T,x=S;0>=x.l(R);)k=se(k),x=se(x);var O=re(k,1),j=re(x,1);for(x=re(x,2),k=re(k,2);!b(x);){var P=j.add(x);0>=P.l(R)&&(O=O.add(k),j=P),x=re(x,1),k=re(k,1)}return S=K(R,O.j(S)),new ee(O,S)}for(O=w;0<=R.l(S);){for(k=Math.max(1,Math.floor(R.m()/S.m())),x=Math.ceil(Math.log(k)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),j=y(k),P=j.j(S);L(P)||0<P.l(R);)k-=x,j=y(k),P=j.j(S);b(j)&&(j=T),O=O.add(j),R=K(R,P)}return new ee(O,R)}r.A=function(R){return Y(this,R).h},r.and=function(R){for(var S=Math.max(this.g.length,R.g.length),k=[],x=0;x<S;x++)k[x]=this.i(x)&R.i(x);return new h(k,this.h&R.h)},r.or=function(R){for(var S=Math.max(this.g.length,R.g.length),k=[],x=0;x<S;x++)k[x]=this.i(x)|R.i(x);return new h(k,this.h|R.h)},r.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),k=[],x=0;x<S;x++)k[x]=this.i(x)^R.i(x);return new h(k,this.h^R.h)};function se(R){for(var S=R.g.length+1,k=[],x=0;x<S;x++)k[x]=R.i(x)<<1|R.i(x-1)>>>31;return new h(k,R.h)}function re(R,S){var k=S>>5;S%=32;for(var x=R.g.length-k,O=[],j=0;j<x;j++)O[j]=0<S?R.i(j+k)>>>S|R.i(j+k+1)<<32-S:R.i(j+k);return new h(O,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,xv=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,Ti=h}).apply(typeof Gy<"u"?Gy:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nv,Ba,bv,Ju,Lf,Dv,Ov,Vv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var v=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in v))break e;v=v[U]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,I=!1,U={next:function(){if(!I&&v<u.length){var H=v++;return{value:m(H,u[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function w(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function T(u,m,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,T.apply(null,arguments)}function C(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function b(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,U,H){for(var oe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)oe[$e-2]=arguments[$e];return m.prototype[U].apply(I,oe)}}function L(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function N(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const U=u.length||0,H=I.length||0;u.length=U+H;for(let oe=0;oe<H;oe++)u[U+oe]=I[oe]}else u.push(I)}}class K{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function G(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var se=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function re(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function R(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function S(u){const m={};for(const v in u)m[v]=u[v];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let v,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(v in I)u[v]=I[v];for(let H=0;H<k.length;H++)v=k[H],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function O(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function j(u){d.setTimeout(()=>{throw u},0)}function P(){var u=_e;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class qe{constructor(){this.h=this.g=null}add(m,v){const I=ot.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ot=new K(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ae=!1,_e=new qe,ue=()=>{const u=d.Promise.resolve(void 0);be=()=>{u.then(F)}};var F=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(v){j(v)}var m=ot;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ae=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u}();function Ae(u,m){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(se){e:{try{Y(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}b(Ae,ge);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function He(u,m,v,I,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=U,this.key=++Ue,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fr(u){this.src=u,this.g={},this.h=0}fr.prototype.add=function(u,m,v,I,U){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var oe=Br(u,m,I,U);return-1<oe?(m=u[oe],v||(m.fa=!1)):(m=new He(m,this.src,H,!!I,U),m.fa=v,u.push(m)),m};function Is(u,m){var v=m.type;if(v in u.g){var I=u.g[v],U=Array.prototype.indexOf.call(I,m,void 0),H;(H=0<=U)&&Array.prototype.splice.call(I,U,1),H&&(Tt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Br(u,m,v,I){for(var U=0;U<u.length;++U){var H=u[U];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==I)return U}return-1}var Li="closure_lm_"+(1e6*Math.random()|0),Ss={};function Ho(u,m,v,I,U){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Ho(u,m[H],v,I,U);return null}return v=qo(v),u&&u[Fe]?u.K(m,v,y(I)?!!I.capture:!1,U):Ko(u,m,v,!1,I,U)}function Ko(u,m,v,I,U,H){if(!m)throw Error("Invalid event type");var oe=y(U)?!!U.capture:!!U,$e=ks(u);if($e||(u[Li]=$e=new fr(u)),v=$e.add(m,v,I,oe,H),v.proxy)return v;if(I=Il(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)ke||(U=oe),U===void 0&&(U=!1),u.addEventListener(m.toString(),I,U);else if(u.attachEvent)u.attachEvent(mr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Il(){function u(v){return m.call(u.src,u.listener,v)}const m=Go;return u}function Cs(u,m,v,I,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)Cs(u,m[H],v,I,U);else I=y(I)?!!I.capture:!!I,v=qo(v),u&&u[Fe]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],v=Br(H,v,I,U),-1<v&&(Tt(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=ks(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Br(m,v,I,U)),(v=-1<u?m[u]:null)&&pr(v))}function pr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Fe])Is(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(mr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=ks(m))?(Is(v,u),v.h==0&&(v.src=null,m[Li]=null)):Tt(u)}}}function mr(u){return u in Ss?Ss[u]:Ss[u]="on"+u}function Go(u,m){if(u.da)u=!0;else{m=new Ae(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&pr(u),u=v.call(I,m)}return u}function ks(u){return u=u[Li],u instanceof fr?u:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function qo(u){return typeof u=="function"?u:(u[As]||(u[As]=function(m){return u.handleEvent(m)}),u[As])}function mt(){Q.call(this),this.i=new fr(this),this.M=this,this.F=null}b(mt,Q),mt.prototype[Fe]=!0,mt.prototype.removeEventListener=function(u,m,v,I){Cs(this,u,m,v,I)};function gt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new ge(m,u);else if(m instanceof ge)m.target=m.target||u;else{var U=m;m=new ge(I,u),x(m,U)}if(U=!0,v)for(var H=v.length-1;0<=H;H--){var oe=m.g=v[H];U=gr(oe,I,!0,m)&&U}if(oe=m.g=u,U=gr(oe,I,!0,m)&&U,U=gr(oe,I,!1,m)&&U,v)for(H=0;H<v.length;H++)oe=m.g=v[H],U=gr(oe,I,!1,m)&&U}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Tt(v[I]);delete u.g[m],u.h--}}this.F=null},mt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},mt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function gr(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,H=0;H<m.length;++H){var oe=m[H];if(oe&&!oe.da&&oe.capture==v){var $e=oe.listener,yt=oe.ha||oe.src;oe.fa&&Is(u.i,oe),U=$e.call(yt,I)!==!1&&U}}return U&&!I.defaultPrevented}function Qo(u,m,v){if(typeof u=="function")v&&(u=T(u,v));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function $r(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,$r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Mi extends Q{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(u){Q.call(this),this.h=u,this.g={}}b(ji,Q);var Xo=[];function Yo(u){re(u.g,function(m,v){this.g.hasOwnProperty(v)&&pr(m)},u),u.g={}}ji.prototype.N=function(){ji.aa.N.call(this),Yo(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jo=d.JSON.stringify,Zo=d.JSON.parse,ea=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Fi(){}Fi.prototype.h=null;function Rs(u){return u.h||(u.h=u.i())}function Ps(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){ge.call(this,"d")}b(Gn,ge);function xs(){ge.call(this,"c")}b(xs,ge);var qn={},ta=null;function Ui(){return ta=ta||new mt}qn.La="serverreachability";function na(u){ge.call(this,qn.La,u)}b(na,ge);function yr(u){const m=Ui();gt(m,new na(m))}qn.STAT_EVENT="statevent";function ra(u,m){ge.call(this,qn.STAT_EVENT,u),this.stat=m}b(ra,ge);function at(u){const m=Ui();gt(m,new ra(m,u))}qn.Ma="timingevent";function Ns(u,m){ge.call(this,qn.Ma,u),this.size=m}b(Ns,ge);function Nn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function Bi(u,m,v,I,U,H){u.info(function(){if(u.g)if(H)for(var oe="",$e=H.split("&"),yt=0;yt<$e.length;yt++){var Oe=$e[yt].split("=");if(1<Oe.length){var It=Oe[0];Oe=Oe[1];var ht=It.split("_");oe=2<=ht.length&&ht[1]=="type"?oe+(It+"="+Oe+"&"):oe+(It+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+v+`
`+oe})}function bs(u,m,v,I,U,H,oe){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+v+`
`+H+" "+oe})}function bn(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ih(u,v)+(I?" "+I:"")})}function ia(u,m){u.info(function(){return"TIMEOUT: "+m})}zi.prototype.info=function(){};function Ih(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<U.length;oe++)U[oe]=""}}}}return Jo(v)}catch{return m}}var Ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function $i(){}b($i,Fi),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Dn=new $i;function On(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var sa={},Os={};function Vs(u,m,v){u.L=1,u.v=qr(ln(m)),u.m=v,u.P=!0,oa(u,null)}function oa(u,m){u.F=Date.now(),Ke(u),u.A=ln(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Xr(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Cl,u.g=$l(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Mi(T(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Xo[0]=U.toString()),U=Xo);for(var H=0;H<U.length;H++){var oe=Ho(v,U[H],I||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),yr(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const m=this.M;m&&Xt(u)==3?m.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{const ht=Xt(this.g);var m=this.g.Ba();const wn=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||ht!=4||m==7||(m==8||0>=wn?yr(3):yr(2)),Wi(this);var v=this.g.Z();this.X=v;t:if(kl(this)){var I=da(this.g);u="";var U=I.length,H=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Wr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(H&&m==U-1)});I.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,bs(this.i,this.u,this.A,this.l,this.R,ht,v),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,yt=this.g;if(($e=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G($e)){var Oe=$e;break t}}Oe=null}if(v=Oe)bn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,v);else{this.o=!1,this.s=3,at(12),_n(this),Wr(this);break e}}if(this.P){v=!0;let cn;for(;!this.J&&this.C<oe.length;)if(cn=Sh(this,oe),cn==Os){ht==4&&(this.s=4,at(14),v=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==sa){this.s=4,at(15),bn(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else bn(this.i,this.l,cn,null),aa(this,cn);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||oe.length!=0||this.h.h||(this.s=1,at(16),v=!1),this.o=this.o&&v,!v)bn(this.i,this.l,oe,"[Invalid Chunked Response]"),_n(this),Wr(this);else if(0<oe.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),pa(It),It.M=!0,at(11))}}else bn(this.i,this.l,oe,null),aa(this,oe);ht==4&&_n(this),this.o&&!this.J&&(ht==4?Ks(this.j,this):(this.o=!1,Ke(this)))}else zs(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),_n(this),Wr(this)}}}catch{}finally{}};function kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Sh(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?Os:(v=Number(m.substring(v,I)),isNaN(v)?sa:(I+=1,I+v>m.length?Os:(m=m.slice(I,I+v),u.C=I+v,m)))}On.prototype.cancel=function(){this.J=!0,_n(this)};function Ke(u){u.S=Date.now()+u.I,Al(u,u.I)}function Al(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Nn(T(u.ba,u),m)}function Wi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ia(this.i,this.A),this.L!=2&&(yr(),at(17)),_n(this),this.s=2,Wr(this)):Al(this,this.S-u)};function Wr(u){u.j.G==0||u.J||Ks(u.j,u)}function _n(u){Wi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Yo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function aa(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ht(v.h,u))){if(!u.K&&Ht(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Hs(v),Fn(v);else break e;Ws(v),at(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Nn(T(v.Za,v),6e3));if(1>=Pl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Tr(v,11)}else if((u.K||v.g==u)&&Hs(v),!G(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Oe=U[m];if(v.T=Oe[0],Oe=Oe[1],v.G==2)if(Oe[0]=="c"){v.K=Oe[1],v.ia=Oe[2];const It=Oe[3];It!=null&&(v.la=It,v.j.info("VER="+v.la));const ht=Oe[4];ht!=null&&(v.Aa=ht,v.j.info("SVER="+v.Aa));const wn=Oe[5];wn!=null&&typeof wn=="number"&&0<wn&&(I=1.5*wn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const cn=u.g;if(cn){const Yi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var H=I.h;H.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(la(H,H.h),H.h=null))}if(I.D){const qs=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;qs&&(I.ya=qs,We(I.I,I.D,qs))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var oe=u;if(I.qa=Bl(I,I.J?I.ia:null,I.W),oe.K){xl(I.h,oe);var $e=oe,yt=I.L;yt&&($e.I=yt),$e.B&&(Wi($e),Ke($e)),I.g=oe}else Xi(I);0<v.i.length&&Jn(v)}else Oe[0]!="stop"&&Oe[0]!="close"||Tr(v,7);else v.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Tr(v,7):xt(v):Oe[0]!="noop"&&v.l&&v.l.ta(Oe),v.v=0)}}yr(4)}catch{}}var Rl=class{constructor(u,m){this.g=u,this.map=m}};function Hi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pl(u){return u.h?1:u.g?u.g.size:0}function Ht(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function la(u,m){u.g?u.g.add(m):u.h=m}function xl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Hi.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Nl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return L(u.i)}function Ls(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Ms(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function Hr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Ms(u),I=Ls(u),U=I.length,H=0;H<U;H++)m.call(void 0,I[H],v&&v[H],u)}var Ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),U=null;if(0<=I){var H=u[v].substring(0,I);U=u[v].substring(I+1)}else H=u[v];m(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function _r(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _r){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,Kr(this,u.s),this.l=u.l;var m=u.i,v=new Qn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Gr(this,v),this.m=u.m}else u&&(m=String(u).match(Ki))?(this.h=!1,Gi(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),Kr(this,m[4]),this.l=xe(m[5]||"",!0),Gr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}_r.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Qr(m,js,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qr(m,js,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Qr(v,v.charAt(0)=="/"?Ol:Dl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Qr(v,ua)),u.join("")};function ln(u){return new _r(u)}function Gi(u,m,v){u.j=v?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Kr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Gr(u,m,v){m instanceof Qn?(u.i=m,Xn(u.i,u.h)):(v||(m=Qr(m,Vl)),u.i=new Qn(m,u.h))}function We(u,m,v){u.i.set(m,v)}function qr(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,bl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var js=/[#\/\?@]/g,Dl=/[#\?:]/g,Ol=/[#\?]/g,Vl=/[#\?@]/g,ua=/#/g;function Qn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Pt(u){u.g||(u.g=new Map,u.h=0,u.i&&Ch(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=Qn.prototype,r.add=function(u,m){Pt(this),this.i=null,u=vn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Vn(u,m){Pt(u),m=vn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ln(u,m){return Pt(u),m=vn(u,m),u.g.has(m)}r.forEach=function(u,m){Pt(this),this.g.forEach(function(v,I){v.forEach(function(U){u.call(m,U,I,this)},this)},this)},r.na=function(){Pt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const U=u[I];for(let H=0;H<U.length;H++)v.push(m[I])}return v},r.V=function(u){Pt(this);let m=[];if(typeof u=="string")Ln(this,u)&&(m=m.concat(this.g.get(vn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},r.set=function(u,m){return Pt(this),this.i=null,u=vn(this,u),Ln(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Xr(u,m,v){Vn(u,m),0<v.length&&(u.i=null,u.g.set(vn(u,m),L(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const H=encodeURIComponent(String(I)),oe=this.V(I);for(I=0;I<oe.length;I++){var U=H;oe[I]!==""&&(U+="="+encodeURIComponent(String(oe[I]))),u.push(U)}}return this.i=u.join("&")};function vn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Xn(u,m){m&&!u.j&&(Pt(u),u.i=null,u.g.forEach(function(v,I){var U=I.toLowerCase();I!=U&&(Vn(this,I),Xr(this,U,v))},u)),u.j=m}function kh(u,m){const v=new zi;if(d.Image){const I=new Image;I.onload=C(Qt,v,"TestLoadImage: loaded",!0,m,I),I.onerror=C(Qt,v,"TestLoadImage: error",!1,m,I),I.onabort=C(Qt,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=C(Qt,v,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Ll(u,m){const v=new zi,I=new AbortController,U=setTimeout(()=>{I.abort(),Qt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(U),H.ok?Qt(v,"TestPingServer: ok",!0,m):Qt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Qt(v,"TestPingServer: error",!1,m)})}function Qt(u,m,v,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(v)}catch{}}function Ah(){this.g=new ea}function Ml(u,m,v){const I=v||"";try{Hr(u,function(U,H){let oe=U;y(U)&&(oe=Jo(U)),m.push(I+H+"="+encodeURIComponent(oe))})}catch(U){throw m.push(I+"type="+encodeURIComponent("_badmap")),U}}function vr(u){this.l=u.Ub||null,this.j=u.eb||!1}b(vr,Fi),vr.prototype.g=function(){return new qi(this.l,this.j)},vr.prototype.i=function(u){return function(){return u}}({});function qi(u,m){mt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(qi,mt),r=qi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,jn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Mn(this):jn(this),this.readyState==3&&jl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Mn(this))},r.Qa=function(u){this.g&&(this.response=u,Mn(this))},r.ga=function(){this.g&&Mn(this)};function Mn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,jn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function wr(u){let m="";return re(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function Yr(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=wr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):We(u,m,v))}function Je(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Je,mt);var Rh=/^https?$/i,ca=["POST","PUT"];r=Je.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Rs(this.o):Rs(Dn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Qi(this,H);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)v.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())v.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ca,m,void 0))||I||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of v)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Us(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Qi(this,H)}};function Qi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Fs(u),un(u)}function Fs(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),un(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Je.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ha(this):this.bb())},r.bb=function(){ha(this)};function ha(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)Qo(u.Ea,0,u);else if(gt(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=oe===0){var U=String(u.D).match(Ki)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),I=!Rh.test(U?U.toLowerCase():"")}v=I}if(v)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var H=2<Xt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Fs(u)}}finally{un(u)}}}}function un(u,m){if(u.g){Us(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||gt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Us(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Zo(m)}};function da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zs(u){const m={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(G(u[I]))continue;var v=O(u[I]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[U]||[];m[U]=H,H.push(v)}R(m,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function fa(u){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yn("baseRetryDelayMs",5e3,u),this.cb=Yn("retryDelaySeedMs",1e4,u),this.Wa=Yn("forwardChannelMaxRetries",2,u),this.wa=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(u&&u.concurrentRequestLimit),this.Da=new Ah,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=fa.prototype,r.la=8,r.G=1,r.connect=function(u,m,v,I){at(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=Bl(this,null,this.W),Jn(this)};function xt(u){if(Bs(u),u.G==3){var m=u.U++,v=ln(u.I);if(We(v,"SID",u.K),We(v,"RID",m),We(v,"TYPE","terminate"),Er(u,v),m=new On(u,u.j,m),m.L=2,m.v=qr(ln(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=$l(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ke(m)}zl(u)}function Fn(u){u.g&&(pa(u),u.g.cancel(),u.g=null)}function Bs(u){Fn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Hs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Jn(u){if(!an(u.h)&&!u.s){u.s=!0;var m=u.Ga;be||ue(),ae||(be(),ae=!0),_e.add(m,u),u.B=0}}function Ph(u,m){return Pl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Nn(T(u.Ga,u,m),Ul(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new On(this,this.j,u);let H=this.o;if(this.S&&(H?(H=S(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Jr(this,U,m),v=ln(this.I),We(v,"RID",u),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),Er(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(wr(H)))+"&"+m:this.m&&Yr(v,this.m,H)),la(this.h,U),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",m),We(v,"SID","null"),U.T=!0,Vs(U,v,null)):Vs(U,v,m),this.G=2}}else this.G==3&&(u?$s(this,u):this.i.length==0||an(this.h)||$s(this))};function $s(u,m){var v;m?v=m.l:v=u.U++;const I=ln(u.I);We(I,"SID",u.K),We(I,"RID",v),We(I,"AID",u.T),Er(u,I),u.m&&u.o&&Yr(I,u.m,u.o),v=new On(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Jr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),la(u.h,v),Vs(v,I,m)}function Er(u,m){u.H&&re(u.H,function(v,I){We(m,I,v)}),u.l&&Hr({},function(v,I){We(m,I,v)})}function Jr(u,m,v){v=Math.min(u.i.length,v);var I=u.l?T(u.l.Na,u.l,u):null;e:{var U=u.i;let H=-1;for(;;){const oe=["count="+v];H==-1?0<v?(H=U[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let $e=!0;for(let yt=0;yt<v;yt++){let Oe=U[yt].g;const It=U[yt].map;if(Oe-=H,0>Oe)H=Math.max(0,U[yt].g-100),$e=!1;else try{Ml(It,oe,"req"+Oe+"_")}catch{I&&I(It)}}if($e){I=oe.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function Xi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;be||ue(),ae||(be(),ae=!0),_e.add(m,u),u.v=0}}function Ws(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Nn(T(u.Fa,u),Ul(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Nn(T(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Fn(this),Fl(this))};function pa(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Fl(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=ln(u.qa);We(m,"RID","rpc"),We(m,"SID",u.K),We(m,"AID",u.T),We(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(m,"TO",u.ja),We(m,"TYPE","xmlhttp"),Er(u,m),u.m&&u.o&&Yr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=qr(ln(m)),v.m=null,v.P=!0,oa(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Fn(this),Ws(this),at(19))};function Hs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ks(u,m){var v=null;if(u.g==m){Hs(u),pa(u),u.g=null;var I=2}else if(Ht(u.h,m))v=m.D,xl(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;I=Ui(),gt(I,new Ns(I,v)),Jn(u)}else Xi(u);else if(U=m.s,U==3||U==0&&0<m.X||!(I==1&&Ph(u,m)||I==2&&Ws(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),U){case 1:Tr(u,5);break;case 4:Tr(u,10);break;case 3:Tr(u,6);break;default:Tr(u,2)}}}function Ul(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Tr(u,m){if(u.j.info("Error code "+m),m==2){var v=T(u.fb,u),I=u.Xa;const U=!I;I=new _r(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gi(I,"https"),qr(I),U?kh(I.toString(),v):Ll(I.toString(),v)}else at(2);u.G=0,u.l&&u.l.sa(m),zl(u),Bs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function zl(u){if(u.G=0,u.ka=[],u.l){const m=Nl(u.h);(m.length!=0||u.i.length!=0)&&(N(u.ka,m),N(u.ka,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.ra()}}function Bl(u,m,v){var I=v instanceof _r?ln(v):new _r(v);if(I.g!="")m&&(I.g=m+"."+I.g),Kr(I,I.s);else{var U=d.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var H=new _r(null);I&&Gi(H,I),m&&(H.g=m),U&&Kr(H,U),v&&(H.l=v),I=H}return v=u.D,m=u.ya,v&&m&&We(I,v,m),We(I,"VER",u.la),Er(u,I),I}function $l(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Je(new vr({eb:v})):new Je(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ma(){}r=ma.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Gs(){}Gs.prototype.g=function(u,m){return new Kt(u,m)};function Kt(u,m){mt.call(this),this.g=new fa(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!G(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!G(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}b(Kt,mt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){xt(this.g)},Kt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Jo(u),u=v);m.i.push(new Rl(m.Ya++,u)),m.G==3&&Jn(m)},Kt.prototype.N=function(){this.g.l=null,delete this.j,xt(this.g),delete this.g,Kt.aa.N.call(this)};function Wl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(Wl,Gn);function Hl(){xs.call(this),this.status=1}b(Hl,xs);function Zn(u){this.g=u}b(Zn,ma),Zn.prototype.ua=function(){gt(this.g,"a")},Zn.prototype.ta=function(u){gt(this.g,new Wl(u))},Zn.prototype.sa=function(u){gt(this.g,new Hl)},Zn.prototype.ra=function(){gt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Vv=function(){return new Gs},Ov=function(){return Ui()},Dv=qn,Lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,Ju=Ds,Sl.COMPLETE="complete",bv=Sl,Ps.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ba=Ps,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Nv=Je}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const qy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Sv("@firebase/firestore");function vo(){return ys.logLevel}function ce(r,...e){if(ys.logLevel<=Le.DEBUG){const t=e.map(wp);ys.debug(`Firestore (${Fo}): ${r}`,...t)}}function Fr(r,...e){if(ys.logLevel<=Le.ERROR){const t=e.map(wp);ys.error(`Firestore (${Fo}): ${r}`,...t)}}function ko(r,...e){if(ys.logLevel<=Le.WARN){const t=e.map(wp);ys.warn(`Firestore (${Fo}): ${r}`,...t)}}function wp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+r;throw Fr(e),new Error(e)}function Be(r,e){r||Te()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends jo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}}class GI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qI{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ii,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ii)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Be(typeof s.accessToken=="string"),new Lv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Bt(e)}}class QI{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class XI{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new QI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string"),this.R=t.token,new YI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=ZI(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function Ao(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new wt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new wt(0,0))}static max(){return new Ie(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(),s===void 0?s=e.length-t:s>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof or?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=or.isNumericId(e),o=or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?or.extractNumericId(e).compare(or.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class Ye extends or{construct(e,t,s){return new Ye(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const eS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends or{construct(e,t,s){return new Ot(e,t,s)}static isValidIdentifier(e){return eS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(l(),o++)}if(l(),h)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ye.fromString(e))}static fromName(e){return new ye(Ye.fromString(e).popFirst(5))}static empty(){return new ye(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ye(e.slice()))}}function tS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new wt(t+1,0):new wt(t,s));return new Ci(o,ye.empty(),e)}function nS(r){return new Ci(r.readTime,r.key,-1)}class Ci{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ci(Ie.min(),ye.empty(),-1)}static max(){return new Ci(Ie.max(),ye.empty(),-1)}}function rS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==iS)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,s)=>{t(e)})}static reject(e){return new q((t,s)=>{s(e)})}static waitFor(e){return new q((t,s)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},p=>s(p))}),h=!0,l===o&&t()})}static or(e){let t=q.resolve(!1);for(const s of e)t=t.next(o=>o?q.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new q((s,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(_=>{h[y]=_,++d,d===l&&s(h)},_=>o(_))}})}static doWhile(e,t){return new q((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function oS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zc.oe=-1;function eh(r){return r==null}function fc(r){return r===0&&1/r==-1/0}function aS(r){return typeof r=="number"&&Number.isInteger(r)&&!fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Qy(e)),e=uS(r.get(t),e);return Qy(e)}function uS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Qy(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Di(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function jv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Dt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yy(this.data.getIterator())}getIteratorFrom(e){return new Yy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class Yy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Et(Ot.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Fv("Invalid base64 string: "+l):l}}(e);return new Vt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const cS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(r){if(Be(!!r),typeof r=="string"){let e=0;const t=cS.exec(r);if(Be(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function th(r){const e=r.mapValue.fields.__previous_value__;return Ep(e)?th(e):e}function ll(r){const e=ki(r.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,t,s,o,l,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class ul{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ri(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ep(r)?4:fS(r)?9007199254740991:dS(r)?10:11:Te()}function dr(r,e){if(r===e)return!0;const t=Ri(r);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ll(r).isEqual(ll(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=ki(o.timestampValue),d=ki(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ai(o.bytesValue).isEqual(Ai(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),d=ut(l.doubleValue);return h===d?fc(h)===fc(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(Xy(h)!==Xy(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!dr(h[p],d[p])))return!1;return!0}(r,e);default:return Te()}}function cl(r,e){return(r.values||[]).find(t=>dr(t,e))!==void 0}function Ro(r,e){if(r===e)return 0;const t=Ri(r),s=Ri(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=ut(l.integerValue||l.doubleValue),p=ut(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return Jy(r.timestampValue,e.timestampValue);case 4:return Jy(ll(r),ll(e));case 5:return Ne(r.stringValue,e.stringValue);case 6:return function(l,h){const d=Ai(l),p=Ai(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Ne(d[y],p[y]);if(_!==0)return _}return Ne(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ne(ut(l.latitude),ut(h.latitude));return d!==0?d:Ne(ut(l.longitude),ut(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Zy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,y,_;const w=l.fields||{},T=h.fields||{},C=(d=w.value)===null||d===void 0?void 0:d.arrayValue,b=(p=T.value)===null||p===void 0?void 0:p.arrayValue,L=Ne(((y=C==null?void 0:C.values)===null||y===void 0?void 0:y.length)||0,((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:Zy(C,b)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Bu.mapValue&&h===Bu.mapValue)return 0;if(l===Bu.mapValue)return 1;if(h===Bu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=h.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const T=Ne(p[w],_[w]);if(T!==0)return T;const C=Ro(d[p[w]],y[_[w]]);if(C!==0)return C}return Ne(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Te()}}function Jy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=ki(r),s=ki(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function Zy(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ro(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function Po(r){return Mf(r)}function Mf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=ki(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ai(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Mf(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Mf(t.fields[h])}`;return o+"}"}(r.mapValue):Te()}function Zu(r){switch(Ri(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=th(r);return e?16+Zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Zu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Di(s.fields,(l,h)=>{o+=l.length+Zu(h)}),o}(r.mapValue);default:throw Te()}}function e_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function jf(r){return!!r&&"integerValue"in r}function Tp(r){return!!r&&"arrayValue"in r}function t_(r){return!!r&&"nullValue"in r}function n_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ec(r){return!!r&&"mapValue"in r}function dS(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ga(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Di(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ga(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ga(r.arrayValue.values[t]);return e}return Object.assign({},r)}function fS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ga(t)}setAll(e){let t=Ot.emptyPath(),s={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=Ga(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ec(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Di(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new sn(Ga(this.value))}}function Uv(r){const e=[];return Di(r.fields,(t,s)=>{const o=new Ot([t]);if(ec(s)){const l=Uv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,s,o,l,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new $t(e,0,Ie.min(),Ie.min(),Ie.min(),sn.empty(),0)}static newFoundDocument(e,t,s,o){return new $t(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ie.min(),Ie.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ie.min(),Ie.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.position=e,this.inclusive=t}}function r_(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function i_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!dr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t="asc"){this.field=e,this.dir=t}}function pS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{}class pt extends zv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new gS(e,t,s):t==="array-contains"?new vS(e,s):t==="in"?new wS(e,s):t==="not-in"?new ES(e,s):t==="array-contains-any"?new TS(e,s):new pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new yS(e,s):new _S(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ro(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends zv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Kn(e,t)}matches(e){return Bv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bv(r){return r.op==="and"}function $v(r){return mS(r)&&Bv(r)}function mS(r){for(const e of r.filters)if(e instanceof Kn)return!1;return!0}function Ff(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+Po(r.value);if($v(r))return r.filters.map(e=>Ff(e)).join(",");{const e=r.filters.map(t=>Ff(t)).join(",");return`${r.op}(${e})`}}function Wv(r,e){return r instanceof pt?function(s,o){return o instanceof pt&&s.op===o.op&&s.field.isEqual(o.field)&&dr(s.value,o.value)}(r,e):r instanceof Kn?function(s,o){return o instanceof Kn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,d)=>l&&Wv(h,o.filters[d]),!0):!1}(r,e):void Te()}function Hv(r){return r instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`}(r):r instanceof Kn?function(t){return t.op.toString()+" {"+t.getFilters().map(Hv).join(" ,")+"}"}(r):"Filter"}class gS extends pt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class yS extends pt{constructor(e,t){super(e,"in",t),this.keys=Kv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _S extends pt{constructor(e,t){super(e,"not-in",t),this.keys=Kv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ye.fromName(s.referenceValue))}class vS extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tp(t)&&cl(t.arrayValue,this.value)}}class wS extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cl(this.value.arrayValue,t)}}class ES extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!cl(this.value.arrayValue,t)}}class TS extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>cl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t=null,s=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.ue=null}}function s_(r,e=null,t=[],s=[],o=null,l=null,h=null){return new IS(r,e,t,s,o,l,h)}function Ip(r){const e=Se(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Ff(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),eh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Po(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Po(s)).join(",")),e.ue=t}return e.ue}function Sp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!pS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Wv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!i_(r.startAt,e.startAt)&&i_(r.endAt,e.endAt)}function Uf(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t=null,s=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SS(r,e,t,s,o,l,h,d){return new Bo(r,e,t,s,o,l,h,d)}function nh(r){return new Bo(r)}function o_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Gv(r){return r.collectionGroup!==null}function qa(r){const e=Se(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new Et(Ot.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new hl(l,s))}),t.has(Ot.keyField().canonicalString())||e.ce.push(new hl(Ot.keyField(),s))}return e.ce}function ur(r){const e=Se(r);return e.le||(e.le=CS(e,qa(r))),e.le}function CS(r,e){if(r.limitType==="F")return s_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new hl(o.field,l)});const t=r.endAt?new pc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new pc(r.startAt.position,r.startAt.inclusive):null;return s_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function zf(r,e){const t=r.filters.concat([e]);return new Bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bf(r,e,t){return new Bo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function rh(r,e){return Sp(ur(r),ur(e))&&r.limitType===e.limitType}function qv(r){return`${Ip(ur(r))}|lt:${r.limitType}`}function wo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Hv(o)).join(", ")}]`),eh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Po(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Po(o)).join(",")),`Target(${s})`}(ur(r))}; limitType=${r.limitType})`}function ih(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of qa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,d,p){const y=r_(h,d,p);return h.inclusive?y<=0:y<0}(s.startAt,qa(s),o)||s.endAt&&!function(h,d,p){const y=r_(h,d,p);return h.inclusive?y>=0:y>0}(s.endAt,qa(s),o))}(r,e)}function kS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Qv(r){return(e,t)=>{let s=!1;for(const o of qa(r)){const l=AS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function AS(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Ro(p,y):Te()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new rt(ye.comparator);function Ur(){return RS}const Xv=new rt(ye.comparator);function $a(...r){let e=Xv;for(const t of r)e=e.insert(t.key,t);return e}function Yv(r){let e=Xv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ms(){return Qa()}function Jv(){return Qa()}function Qa(){return new vs(r=>r.toString(),(r,e)=>r.isEqual(e))}const PS=new rt(ye.comparator),xS=new Et(ye.comparator);function Pe(...r){let e=xS;for(const t of r)e=e.add(t);return e}const NS=new Et(Ne);function bS(){return NS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function Zv(r){return{integerValue:""+r}}function DS(r,e){return aS(e)?Zv(e):Cp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function OS(r,e,t){return r instanceof dl?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ep(l)&&(l=th(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof xo?tw(r,e):r instanceof fl?nw(r,e):function(o,l){const h=ew(o,l),d=a_(h)+a_(o.Pe);return jf(h)&&jf(o.Pe)?Zv(d):Cp(o.serializer,d)}(r,e)}function VS(r,e,t){return r instanceof xo?tw(r,e):r instanceof fl?nw(r,e):t}function ew(r,e){return r instanceof mc?function(s){return jf(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class dl extends sh{}class xo extends sh{constructor(e){super(),this.elements=e}}function tw(r,e){const t=rw(e);for(const s of r.elements)t.some(o=>dr(o,s))||t.push(s);return{arrayValue:{values:t}}}class fl extends sh{constructor(e){super(),this.elements=e}}function nw(r,e){let t=rw(e);for(const s of r.elements)t=t.filter(o=>!dr(o,s));return{arrayValue:{values:t}}}class mc extends sh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function a_(r){return ut(r.integerValue||r.doubleValue)}function rw(r){return Tp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t){this.field=e,this.transform=t}}function LS(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof xo&&o instanceof xo||s instanceof fl&&o instanceof fl?Ao(s.elements,o.elements,dr):s instanceof mc&&o instanceof mc?dr(s.Pe,o.Pe):s instanceof dl&&o instanceof dl}(r.transform,e.transform)}class MS{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class oh{}function sw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new kp(r.key,Pn.none()):new yl(r.key,r.data,Pn.none());{const t=r.data,s=sn.empty();let o=new Et(Ot.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Oi(r.key,s,new gn(o.toArray()),Pn.none())}}function jS(r,e,t){r instanceof yl?function(o,l,h){const d=o.value.clone(),p=u_(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Oi?function(o,l,h){if(!tc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=u_(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(ow(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Xa(r,e,t,s){return r instanceof yl?function(l,h,d,p){if(!tc(l.precondition,h))return d;const y=l.value.clone(),_=c_(l.fieldTransforms,p,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof Oi?function(l,h,d,p){if(!tc(l.precondition,h))return d;const y=c_(l.fieldTransforms,p,h),_=h.data;return _.setAll(ow(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(r,e,t,s):function(l,h,d){return tc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function FS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=ew(s.transform,o||null);l!=null&&(t===null&&(t=sn.empty()),t.set(s.field,l))}return t||null}function l_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,(l,h)=>LS(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yl extends oh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Oi extends oh{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ow(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function u_(r,e,t){const s=new Map;Be(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);s.set(l.field,VS(h,d,t[o]))}return s}function c_(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,OS(l,h,e))}return s}class kp extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class US extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&jS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Xa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Xa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=sw(h,d);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ie.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,s)=>l_(t,s))&&Ao(this.baseMutations,e.baseMutations,(t,s)=>l_(t,s))}}class Ap{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Be(e.mutations.length===s.length);let o=function(){return PS}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Ap(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ve;function WS(r){switch(r){default:return Te();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function aw(r){if(r===void 0)return Fr("GRPC error has no .code"),X.UNKNOWN;switch(r){case ft.OK:return X.OK;case ft.CANCELLED:return X.CANCELLED;case ft.UNKNOWN:return X.UNKNOWN;case ft.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ft.INTERNAL:return X.INTERNAL;case ft.UNAVAILABLE:return X.UNAVAILABLE;case ft.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ft.NOT_FOUND:return X.NOT_FOUND;case ft.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ft.ABORTED:return X.ABORTED;case ft.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ft.DATA_LOSS:return X.DATA_LOSS;default:return Te()}}(Ve=ft||(ft={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Ti([4294967295,4294967295],0);function h_(r){const e=HS().encode(r),t=new xv;return t.update(e),new Uint8Array(t.digest())}function d_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ti([t,s],0),new Ti([o,l],0)]}class Rp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Wa(`Invalid padding: ${t}`);if(s<0)throw new Wa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ti.fromNumber(this.Te)}de(e,t,s){let o=e.add(t.multiply(Ti.fromNumber(s)));return o.compare(KS)===1&&(o=new Ti([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=h_(e),[s,o]=d_(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Rp(l,o,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Te===0)return;const t=h_(e),[s,o]=d_(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ah(Ie.min(),o,new rt(Ne),Ur(),Pe())}}class _l{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new _l(s,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class lw{constructor(e,t){this.targetId=e,this.me=t}}class uw{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class f_{constructor(){this.fe=0,this.ge=p_(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),t=Pe(),s=Pe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te()}}),new _l(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=p_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GS{constructor(e){this.Be=e,this.Le=new Map,this.ke=Ur(),this.qe=$u(),this.Qe=$u(),this.Ke=new rt(Ne)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(Uf(l))if(s===0){const h=new ye(l.path);this.We(t,h,$t.newNoDocument(h,Ie.min()))}else Be(s===1);else{const h=this.Ze(t);if(h!==s){const d=this.Xe(e),p=d?this.et(d,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ai(s).toUint8Array()}catch(p){if(p instanceof Fv)return ko("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Rp(h,o,l)}catch(p){return ko(p instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Be.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Be.nt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const d=this.Ye(h);if(d){if(l.current&&Uf(d.target)){const p=new ye(d.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,$t.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=Pe();this.Qe.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new ah(e,t,this.Ke,this.ke,s);return this.ke=Ur(),this.qe=$u(),this.Qe=$u(),this.Ke=new rt(Ne),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new f_,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Et(Ne),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Et(Ne),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new f_),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function $u(){return new rt(ye.comparator)}function p_(){return new rt(ye.comparator)}const qS={asc:"ASCENDING",desc:"DESCENDING"},QS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XS={and:"AND",or:"OR"};class YS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $f(r,e){return r.useProto3Json||eh(e)?e:{value:e}}function gc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function JS(r,e){return gc(r,e.toTimestamp())}function cr(r){return Be(!!r),Ie.fromTimestamp(function(t){const s=ki(t);return new wt(s.seconds,s.nanos)}(r))}function Pp(r,e){return Wf(r,e).canonicalString()}function Wf(r,e){const t=function(o){return new Ye(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function hw(r){const e=Ye.fromString(r);return Be(gw(e)),e}function Hf(r,e){return Pp(r.databaseId,e.path)}function hf(r,e){const t=hw(e);if(t.get(1)!==r.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(fw(t))}function dw(r,e){return Pp(r.databaseId,e)}function ZS(r){const e=hw(r);return e.length===4?Ye.emptyPath():fw(e)}function Kf(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fw(r){return Be(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function m_(r,e,t){return{name:Hf(r,e),fields:t.value.mapValue.fields}}function eC(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,_){return y.useProto3Json?(Be(_===void 0||typeof _=="string"),Vt.fromBase64String(_||"")):(Be(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Vt.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const _=y.code===void 0?X.UNKNOWN:aw(y.code);return new he(_,y.message||"")}(h);t=new uw(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=hf(r,s.document.name),l=cr(s.document.updateTime),h=s.document.createTime?cr(s.document.createTime):Ie.min(),d=new sn({mapValue:{fields:s.document.fields}}),p=$t.newFoundDocument(o,l,h,d),y=s.targetIds||[],_=s.removedTargetIds||[];t=new nc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=hf(r,s.document),l=s.readTime?cr(s.readTime):Ie.min(),h=$t.newNoDocument(o,l),d=s.removedTargetIds||[];t=new nc([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=hf(r,s.document),l=s.removedTargetIds||[];t=new nc([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new $S(o,l),d=s.targetId;t=new lw(d,h)}}return t}function tC(r,e){let t;if(e instanceof yl)t={update:m_(r,e.key,e.value)};else if(e instanceof kp)t={delete:Hf(r,e.key)};else if(e instanceof Oi)t={update:m_(r,e.key,e.data),updateMask:cC(e.fieldMask)};else{if(!(e instanceof US))return Te();t={verify:Hf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const d=h.transform;if(d instanceof dl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof fl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof mc)return{fieldPath:h.field.canonicalString(),increment:d.Pe};throw Te()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:JS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(r,e.precondition)),t}function nC(r,e){return r&&r.length>0?(Be(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?cr(o.updateTime):cr(l);return h.isEqual(Ie.min())&&(h=cr(l)),new MS(h,o.transformResults||[])}(t,e))):[]}function rC(r,e){return{documents:[dw(r,e.path)]}}function iC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=dw(r,o);const l=function(y){if(y.length!==0)return mw(Kn.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(_=>function(T){return{field:Eo(T.field),direction:aC(T.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=$f(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function sC(r){let e=ZS(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Be(s===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(w){const T=pw(w);return T instanceof Kn&&$v(T)?T.getFilters():[T]}(t.where));let h=[];t.orderBy&&(h=function(w){return w.map(T=>function(b){return new hl(To(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,eh(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,C=w.values||[];return new pc(C,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,C=w.values||[];return new pc(C,T)}(t.endAt)),SS(e,o,h,l,d,"F",p,y)}function oC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pw(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=To(t.unaryFilter.field);return pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=To(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=To(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=To(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(r):r.fieldFilter!==void 0?function(t){return pt.create(To(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Kn.create(t.compositeFilter.filters.map(s=>pw(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(r):Te()}function aC(r){return qS[r]}function lC(r){return QS[r]}function uC(r){return XS[r]}function Eo(r){return{fieldPath:r.canonicalString()}}function To(r){return Ot.fromServerFormat(r.fieldPath)}function mw(r){return r instanceof pt?function(t){if(t.op==="=="){if(n_(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(t_(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n_(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(t_(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:lC(t.op),value:t.value}}}(r):r instanceof Kn?function(t){const s=t.getFilters().map(o=>mw(o));return s.length===1?s[0]:{compositeFilter:{op:uC(t.op),filters:s}}}(r):Te()}function cC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,s,o,l=Ie.min(),h=Ie.min(),d=Vt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.ht=e}}function dC(r){const e=sC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.ln=new pC}addToCollectionParentIndex(e,t){return this.ln.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Ci.min())}updateCollectionGroup(e,t,s){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class pC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Et(Ye.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new No(0)}static Qn(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_([r,e],[t,s]){const o=Ne(r,t);return o===0?Ne(e,s):o}class mC{constructor(e){this.Gn=e,this.buffer=new Et(y_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();y_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Yn(3e5)})}}class yC{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return q.resolve(Zc.oe);const s=new mC(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(g_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,h,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,d=Date.now(),this.removeTargets(e,s,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(y=Date.now(),vo()<=Le.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function _C(r,e){return new yC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.changes=new vs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&Xa(s.mutation,o,gn.empty(),wt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Pe()){const o=ms();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=$a();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=ms();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Pe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,o){let l=Ur();const h=Qa(),d=function(){return Qa()}();return t.forEach((p,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Oi)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),Xa(_.mutation,y,_.mutation.getFieldMask(),wt.now())):h.set(y.key,gn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,_)=>h.set(y,_)),t.forEach((y,_)=>{var w;return d.set(y,new wC(_,(w=h.get(y))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const s=Qa();let o=new rt((h,d)=>h-d),l=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=s.get(p)||gn.empty();_=d.applyToLocalView(y,_),s.set(p,_);const w=(o.get(d.batchId)||Pe()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,w=Jv();_.forEach(T=>{if(!l.has(T)){const C=sw(t.get(T),s.get(T));C!==null&&w.set(T,C),l=l.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return q.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):q.resolve(ms());let d=-1,p=l;return h.next(y=>q.forEach(y,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{p=p.insert(_,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Pe())).next(_=>({batchId:d,changes:Yv(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(s=>{let o=$a();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=$a();return this.indexManager.getCollectionParents(e,l).next(d=>q.forEach(d,p=>{const y=function(w,T){return new Bo(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(_=>{_.forEach((w,T)=>{h=h.insert(w,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((p,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,$t.newInvalidDocument(_)))});let d=$a();return h.forEach((p,y)=>{const _=l.get(p);_!==void 0&&Xa(_.mutation,y,gn.empty(),wt.now()),ih(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return q.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:dC(o.bundledQuery),readTime:cr(o.readTime)}}(t)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.overlays=new rt(ye.comparator),this.dr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ms();return q.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.dr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(s)),q.resolve()}getOverlaysForCollection(e,t,s){const o=ms(),l=t.length+1,h=new ye(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new rt((y,_)=>y-_);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let _=l.get(y.largestBatchId);_===null&&(_=ms(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=ms(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>d.set(y,_)),!(d.size()>=o)););return q.resolve(d)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(s.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new BS(t,s));let l=this.dr.get(t);l===void 0&&(l=Pe(),this.dr.set(t,l)),this.dr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.Er=new Et(Rt.Ar),this.Rr=new Et(Rt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const s=new Rt(e,t);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Rt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new ye(new Ye([])),s=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ye(new Ye([])),s=new Rt(t,e),o=new Rt(t,e+1);let l=Pe();return this.Rr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Rt(e,0),s=this.Er.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ye.comparator(e.key,t.key)||Ne(e.br,t.br)}static Vr(e,t){return Ne(e.br,t.br)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Et(Rt.Ar)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zS(l,t,s,o);this.mutationQueue.push(h);for(const d of o)this.vr=this.vr.add(new Rt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return q.resolve(h)}lookupMutationBatch(e,t){return q.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],h=>{const d=this.Cr(h.br);l.push(d)}),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Et(Ne);return t.forEach(o=>{const l=new Rt(o,0),h=new Rt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],d=>{s=s.add(d.br)})}),q.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new Rt(new ye(l),0);let d=new Et(Ne);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.br)),!0)},h),q.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Be(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return q.forEach(t.mutations,o=>{const l=new Rt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,t){const s=new Rt(t,0),o=this.vr.firstAfterOrEqual(s);return q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.Nr=e,this.docs=function(){return new rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return q.resolve(s?s.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let s=Ur();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))}),q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Ur();const h=t.path,d=new ye(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||rS(nS(_),s)<=0||(o.has(_.key)||ih(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te()}Br(e,t){return q.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new AC(this)}getSize(e){return q.resolve(this.size)}}class AC extends vC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),q.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.persistence=e,this.Lr=new vs(t=>Ip(t),Sp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.kr=0,this.qr=new xp,this.targetCount=0,this.Qr=No.qn()}forEachTarget(e,t){return this.Lr.forEach((s,o)=>t(o)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),q.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new No(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Un(t),q.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Lr.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),q.waitFor(l).next(()=>o)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const s=this.Lr.get(t)||null;return q.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),q.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return q.resolve(s)}containsKey(e,t){return q.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Zc(0),this.Ur=!1,this.Ur=!0,this.Wr=new SC,this.referenceDelegate=e(this),this.Gr=new RC(this),this.indexManager=new fC,this.remoteDocumentCache=function(o){return new kC(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new hC(t),this.jr=new TC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new CC(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new PC(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return q.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class PC extends sS{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Zr=new xp,this.Xr=null}static ei(e){return new Np(e)}get ti(){if(this.Xr)return this.Xr;throw Te()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),q.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),q.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ti,s=>{const o=ye.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ie.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return q.or([()=>q.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class yc{constructor(e,t){this.persistence=e,this.ri=new vs(s=>lS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=_C(this,t)}static ei(e,t){return new yc(e,t)}Hr(){}Jr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return q.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?q.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(d=>{d||(s++,l.removeEntry(h,Ie.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),q.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zu(e.data.value)),t}ir(e,t,s){return q.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=Pe(),o=Pe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return xT()?8:oS(RT())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new xC;return this.ts(e,t,h).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,h,d.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(vo()<=Le.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),q.resolve()):(vo()<=Le.DEBUG&&ce("QueryEngine","Query:",wo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(vo()<=Le.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):q.resolve())}Xi(e,t){if(o_(t))return q.resolve(null);let s=ur(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Bf(t,null,"F"),s=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Pe(...l);return this.Zi.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.rs(t,d);return this.ss(t,y,h,p.readTime)?this.Xi(e,Bf(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,s,o){return o_(t)||o.isEqual(Ie.min())?q.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const h=this.rs(t,l);return this.ss(t,h,s,o)?q.resolve(null):(vo()<=Le.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(t)),this.os(e,h,t,tS(o,-1)).next(d=>d))})}rs(e,t){let s=new Et(Qv(e));return t.forEach((o,l)=>{ih(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return vo()<=Le.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",wo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ci.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new rt(Ne),this.cs=new vs(l=>Ip(l),Sp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function DC(r,e,t,s){return new bC(r,e,t,s)}async function _w(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],d=[];let p=Pe();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:d}))})})}function OC(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,_){const w=y.batch,T=w.keys();let C=q.resolve();return T.forEach(b=>{C=C.next(()=>_.getEntry(p,b)).next(L=>{const N=y.docVersions.get(b);Be(N!==null),L.version.compareTo(N)<0&&(w.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),_.addEntry(L)))})}),C.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Pe();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function vw(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function VC(r,e){const t=Se(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((_,w)=>{const T=o.get(w);if(!T)return;d.push(t.Gr.removeMatchingKeys(l,_.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(l,_.addedDocuments,w)));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Vt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,s)),o=o.insert(w,C),function(L,N,K){return L.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(T,C,_)&&d.push(t.Gr.updateTargetData(l,C))});let p=Ur(),y=Pe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(LC(l,h,e.documentUpdates).next(_=>{p=_.Is,y=_.ds})),!s.isEqual(Ie.min())){const _=t.Gr.getLastRemoteSnapshotVersion(l).next(w=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(_)}return q.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function LC(r,e,t){let s=Pe(),o=Pe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Ur();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):ce("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Is:h,ds:o}})}function MC(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function jC(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,q.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new _i(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function Gf(r,e,t){const s=Se(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!zo(h))throw h;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function __(r,e,t){const s=Se(r);let o=Ie.min(),l=Pe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,_){const w=Se(p),T=w.cs.get(_);return T!==void 0?q.resolve(w.us.get(T)):w.Gr.getTargetData(y,_)}(s,h,ur(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:Pe())).next(d=>(FC(s,kS(e),d),{documents:d,Es:l})))}function FC(r,e,t){let s=r.ls.get(e)||Ie.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class v_{constructor(){this.activeTargetIds=bS()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UC{constructor(){this._o=new v_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new v_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wu=null;function df(){return Wu===null?Wu=function(){return 268435456+Math.round(2147483648*Math.random())}():Wu++,"0x"+Wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class WC extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,h){const d=df(),p=this.No(t,s.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,h),this.Lo(t,p,y,o).then(_=>(ce("RestConnection",`Received RPC '${t}' ${d}: `,_),_),_=>{throw ko("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,s,o,l,h,d){return this.Oo(t,s,o,l,h)}Bo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,s){const o=BC[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,s,o){const l=df();return new Promise((h,d)=>{const p=new Nv;p.setWithCredentials(!0),p.listenOnce(bv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ju.NO_ERROR:const _=p.getResponseJson();ce(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),h(_);break;case Ju.TIMEOUT:ce(Ut,`RPC '${e}' ${l} timed out`),d(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const w=p.getStatus();if(ce(Ut,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const b=function(N){const K=N.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(K)>=0?K:X.UNKNOWN}(C.status);d(new he(b,C.message))}else d(new he(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new he(X.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{ce(Ut,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ce(Ut,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,s,15)})}qo(e,t,s){const o=df(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Vv(),d=Ov(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const _=l.join("");ce(Ut,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=h.createWebChannel(_,p);let T=!1,C=!1;const b=new $C({Eo:N=>{C?ce(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(T||(ce(Ut,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ce(Ut,`RPC '${e}' stream ${o} sending:`,N),w.send(N))},Ao:()=>w.close()}),L=(N,K,G)=>{N.listen(K,ee=>{try{G(ee)}catch(Y){setTimeout(()=>{throw Y},0)}})};return L(w,Ba.EventType.OPEN,()=>{C||(ce(Ut,`RPC '${e}' stream ${o} transport opened.`),b.So())}),L(w,Ba.EventType.CLOSE,()=>{C||(C=!0,ce(Ut,`RPC '${e}' stream ${o} transport closed`),b.Do())}),L(w,Ba.EventType.ERROR,N=>{C||(C=!0,ko(Ut,`RPC '${e}' stream ${o} transport errored:`,N),b.Do(new he(X.UNAVAILABLE,"The operation could not be completed")))}),L(w,Ba.EventType.MESSAGE,N=>{var K;if(!C){const G=N.data[0];Be(!!G);const ee=G,Y=(ee==null?void 0:ee.error)||((K=ee[0])===null||K===void 0?void 0:K.error);if(Y){ce(Ut,`RPC '${e}' stream ${o} received error:`,Y);const se=Y.status;let re=function(k){const x=ft[k];if(x!==void 0)return aw(x)}(se),R=Y.message;re===void 0&&(re=X.INTERNAL,R="Unknown error status: "+se+" with message "+Y.message),C=!0,b.Do(new he(re,R)),w.close()}else ce(Ut,`RPC '${e}' stream ${o} received:`,G),b.vo(G)}}),L(d,Dv.STAT_EVENT,N=>{N.stat===Lf.PROXY?ce(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===Lf.NOPROXY&&ce(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.bo()},0),b}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(r){return new YS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,s,o,l,h,d,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ww(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new he(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.d_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HC extends Ew{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=eC(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?cr(h.readTime):Ie.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=Kf(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=Uf(p)?{documents:rC(l,p)}:{query:iC(l,p).ct},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=cw(l,h.resumeToken);const y=$f(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ie.min())>0){d.readTime=gc(l,h.snapshotVersion.toTimestamp());const y=$f(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const s=oC(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=Kf(this.serializer),t.removeTarget=e,this.c_(t)}}class KC extends Ew{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=nC(e.writeResults,e.commitTime),s=cr(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=Kf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>tC(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,Wf(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(X.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.ko(e,Wf(t,s),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(X.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class qC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Fr(t),this.C_=!1):ce("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{ws(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Se(p);y.k_.add(4),await vl(y),y.K_.set("Unknown"),y.k_.delete(4),await uh(y)}(this))})}),this.K_=new qC(s,o)}}async function uh(r){if(ws(r))for(const e of r.q_)await e(!0)}async function vl(r){for(const e of r.q_)await e(!1)}function Tw(r,e){const t=Se(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),Lp(t)?Vp(t):$o(t).s_()&&Op(t,e))}function Dp(r,e){const t=Se(r),s=$o(t);t.L_.delete(e),s.s_()&&Iw(t,e),t.L_.size===0&&(s.s_()?s.a_():ws(t)&&t.K_.set("Unknown"))}function Op(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$o(r).V_(e)}function Iw(r,e){r.U_.xe(e),$o(r).m_(e)}function Vp(r){r.U_=new GS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),$o(r).start(),r.K_.F_()}function Lp(r){return ws(r)&&!$o(r).i_()&&r.L_.size>0}function ws(r){return Se(r).k_.size===0}function Sw(r){r.U_=void 0}async function XC(r){r.K_.set("Online")}async function YC(r){r.L_.forEach((e,t)=>{Op(r,e)})}async function JC(r,e){Sw(r),Lp(r)?(r.K_.O_(e),Vp(r)):r.K_.set("Unknown")}async function ZC(r,e,t){if(r.K_.set("Online"),e instanceof uw&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.L_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.L_.delete(d),o.U_.removeTarget(d))}(r,e)}catch(s){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _c(r,s)}else if(e instanceof nc?r.U_.$e(e):e instanceof lw?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ie.min()))try{const s=await vw(r.localStore);t.compareTo(s)>=0&&await function(l,h){const d=l.U_.it(h);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.L_.get(y);_&&l.L_.set(y,_.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,y)=>{const _=l.L_.get(p);if(!_)return;l.L_.set(p,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),Iw(l,p);const w=new _i(_.target,p,y,_.sequenceNumber);Op(l,w)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(s){ce("RemoteStore","Failed to raise snapshot:",s),await _c(r,s)}}async function _c(r,e,t){if(!zo(e))throw e;r.k_.add(1),await vl(r),r.K_.set("Offline"),t||(t=()=>vw(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await uh(r)})}function Cw(r,e){return e().catch(t=>_c(r,t,e))}async function ch(r){const e=Se(r),t=Pi(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;ek(e);)try{const o=await MC(e.localStore,s);if(o===null){e.B_.length===0&&t.a_();break}s=o.batchId,tk(e,o)}catch(o){await _c(e,o)}kw(e)&&Aw(e)}function ek(r){return ws(r)&&r.B_.length<10}function tk(r,e){r.B_.push(e);const t=Pi(r);t.s_()&&t.f_&&t.g_(e.mutations)}function kw(r){return ws(r)&&!Pi(r).i_()&&r.B_.length>0}function Aw(r){Pi(r).start()}async function nk(r){Pi(r).w_()}async function rk(r){const e=Pi(r);for(const t of r.B_)e.g_(t.mutations)}async function ik(r,e,t){const s=r.B_.shift(),o=Ap.from(s,e,t);await Cw(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await ch(r)}async function sk(r,e){e&&Pi(r).f_&&await async function(s,o){if(function(h){return WS(h)&&h!==X.ABORTED}(o.code)){const l=s.B_.shift();Pi(s).__(),await Cw(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await ch(s)}}(r,e),kw(r)&&Aw(r)}async function E_(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const s=ws(t);t.k_.add(3),await vl(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await uh(t)}async function ok(r,e){const t=Se(r);e?(t.k_.delete(2),await uh(t)):e||(t.k_.add(2),await vl(t),t.K_.set("Unknown"))}function $o(r){return r.W_||(r.W_=function(t,s,o){const l=Se(t);return l.b_(),new HC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:XC.bind(null,r),mo:YC.bind(null,r),po:JC.bind(null,r),R_:ZC.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Lp(r)?Vp(r):r.K_.set("Unknown")):(await r.W_.stop(),Sw(r))})),r.W_}function Pi(r){return r.G_||(r.G_=function(t,s,o){const l=Se(t);return l.b_(),new KC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:nk.bind(null,r),po:sk.bind(null,r),p_:rk.bind(null,r),y_:ik.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await ch(r)):(await r.G_.stop(),r.B_.length>0&&(ce("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,d=new Mp(e,t,h,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(r,e){if(Fr("AsyncQueue",`${e}: ${r}`),zo(r))return new he(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=$a(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.z_=new rt(ye.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Te():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class bo{constructor(e,t,s,o,l,h,d,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new bo(e,t,Co.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class lk{constructor(){this.queries=I_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Se(t),l=o.queries;o.queries=I_(),l.forEach((h,d)=>{for(const p of d.J_)p.onError(s)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function I_(){return new vs(r=>qv(r),rh)}async function Rw(r,e){const t=Se(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new ak,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=jp(h,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Fp(t)}async function Pw(r,e){const t=Se(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function uk(r,e){const t=Se(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.J_)d.ta(o)&&(s=!0);h.H_=o}}s&&Fp(t)}function ck(r,e,t){const s=Se(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function Fp(r){r.X_.forEach(e=>{e.next()})}var qf,S_;(S_=qf||(qf={})).na="default",S_.Cache="cache";class xw{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new bo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.key=e}}class bw{constructor(e){this.key=e}}class hk{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=Qv(e),this.ma=new Co(this.Va)}get fa(){return this.Ea}ga(e,t){const s=t?t.pa:new T_,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const T=o.get(_),C=ih(this.query,w)?w:null,b=!!T&&this.mutatedKeys.has(T.key),L=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let N=!1;T&&C?T.data.isEqual(C.data)?b!==L&&(s.track({type:3,doc:C}),N=!0):this.ya(T,C)||(s.track({type:2,doc:C}),N=!0,(p&&this.Va(C,p)>0||y&&this.Va(C,y)<0)&&(d=!0)):!T&&C?(s.track({type:0,doc:C}),N=!0):T&&!C&&(s.track({type:1,doc:T}),N=!0,(p||y)&&(d=!0)),N&&(C?(h=h.add(C),l=L?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{ma:h,pa:s,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((_,w)=>function(C,b){const L=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return L(C)-L(b)}(_.type,w.type)||this.Va(_.doc,w.doc)),this.wa(s),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new bo(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new T_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new bw(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new Nw(s))}),t}va(e){this.Ea=e.Es,this.Ra=Pe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return bo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class dk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class fk{constructor(e){this.key=e,this.Fa=!1}}class pk{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new vs(d=>qv(d),rh),this.Oa=new Map,this.Na=new Set,this.Ba=new rt(ye.comparator),this.La=new Map,this.ka=new xp,this.qa={},this.Qa=new Map,this.Ka=No.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function mk(r,e,t=!0){const s=jw(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await Dw(s,e,t,!0),o}async function gk(r,e){const t=jw(r);await Dw(t,e,!0,!1)}async function Dw(r,e,t,s){const o=await jC(r.localStore,ur(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await yk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Tw(r.remoteStore,o),d}async function yk(r,e,t,s,o){r.Ua=(w,T,C)=>async function(L,N,K,G){let ee=N.view.ga(K);ee.ss&&(ee=await __(L.localStore,N.query,!1).then(({documents:R})=>N.view.ga(R,ee)));const Y=G&&G.targetChanges.get(N.targetId),se=G&&G.targetMismatches.get(N.targetId)!=null,re=N.view.applyChanges(ee,L.isPrimaryClient,Y,se);return k_(L,N.targetId,re.ba),re.snapshot}(r,w,T,C);const l=await __(r.localStore,e,!0),h=new hk(e,l.Es),d=h.ga(l.documents),p=_l.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,p);k_(r,t,y.ba);const _=new dk(e,t,h);return r.xa.set(e,_),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function _k(r,e,t){const s=Se(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(h=>!rh(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Gf(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Dp(s.remoteStore,o.targetId),Qf(s,o.targetId)}).catch(Uo)):(Qf(s,o.targetId),await Gf(s.localStore,o.targetId,!0))}async function vk(r,e){const t=Se(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Dp(t.remoteStore,s.targetId))}async function wk(r,e,t){const s=Ak(r);try{const o=await function(h,d){const p=Se(h),y=wt.now(),_=d.reduce((C,b)=>C.add(b.key),Pe());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let b=Ur(),L=Pe();return p.hs.getEntries(C,_).next(N=>{b=N,b.forEach((K,G)=>{G.isValidDocument()||(L=L.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,b)).next(N=>{w=N;const K=[];for(const G of d){const ee=FS(G,w.get(G.key).overlayedDocument);ee!=null&&K.push(new Oi(G.key,ee,Uv(ee.value.mapValue),Pn.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,K,d)}).next(N=>{T=N;const K=N.applyToLocalDocumentSet(w,L);return p.documentOverlayCache.saveOverlays(C,N.batchId,K)})}).then(()=>({batchId:T.batchId,changes:Yv(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let y=h.qa[h.currentUser.toKey()];y||(y=new rt(Ne)),y=y.insert(d,p),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await wl(s,o.changes),await ch(s.remoteStore)}catch(o){const l=jp(o,"Failed to persist write");t.reject(l)}}async function Ow(r,e){const t=Se(r);try{const s=await VC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Be(h.Fa):o.removedDocuments.size>0&&(Be(h.Fa),h.Fa=!1))}),await wl(t,s,e)}catch(s){await Uo(s)}}function C_(r,e,t){const s=Se(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,h)=>{const d=h.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Se(h);p.onlineState=d;let y=!1;p.queries.forEach((_,w)=>{for(const T of w.J_)T.ea(d)&&(y=!0)}),y&&Fp(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Ek(r,e,t){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.La.get(e),l=o&&o.key;if(l){let h=new rt(ye.comparator);h=h.insert(l,$t.newNoDocument(l,Ie.min()));const d=Pe().add(l),p=new ah(Ie.min(),new Map,new rt(Ne),h,d);await Ow(s,p),s.Ba=s.Ba.remove(l),s.La.delete(e),Up(s)}else await Gf(s.localStore,e,!1).then(()=>Qf(s,e,t)).catch(Uo)}async function Tk(r,e){const t=Se(r),s=e.batch.batchId;try{const o=await OC(t.localStore,e);Lw(t,s,null),Vw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await wl(t,o)}catch(o){await Uo(o)}}async function Ik(r,e,t){const s=Se(r);try{const o=await function(h,d){const p=Se(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next(w=>(Be(w!==null),_=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(s.localStore,e);Lw(s,e,t),Vw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await wl(s,o)}catch(o){await Uo(o)}}function Vw(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function Lw(r,e,t){const s=Se(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Qf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||Mw(r,s)})}function Mw(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(Dp(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),Up(r))}function k_(r,e,t){for(const s of t)s instanceof Nw?(r.ka.addReference(s.key,e),Sk(r,s)):s instanceof bw?(ce("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||Mw(r,s.key)):Te()}function Sk(r,e){const t=e.key,s=t.path.canonicalString();r.Ba.get(t)||r.Na.has(s)||(ce("SyncEngine","New document in limbo: "+t),r.Na.add(s),Up(r))}function Up(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new ye(Ye.fromString(e)),s=r.Ka.next();r.La.set(s,new fk(t)),r.Ba=r.Ba.insert(t,s),Tw(r.remoteStore,new _i(ur(nh(t.path)),s,"TargetPurposeLimboResolution",Zc.oe))}}async function wl(r,e,t){const s=Se(r),o=[],l=[],h=[];s.xa.isEmpty()||(s.xa.forEach((d,p)=>{h.push(s.Ua(p,e,t).then(y=>{var _;if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=bp.zi(p.targetId,y);l.push(w)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(p,y){const _=Se(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>q.forEach(y,T=>q.forEach(T.Wi,C=>_.persistence.referenceDelegate.addReference(w,T.targetId,C)).next(()=>q.forEach(T.Gi,C=>_.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))}catch(w){if(!zo(w))throw w;ce("LocalStore","Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const C=_.us.get(T),b=C.snapshotVersion,L=C.withLastLimboFreeSnapshotVersion(b);_.us=_.us.insert(T,L)}}}(s.localStore,l))}async function Ck(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const s=await _w(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new he(X.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wl(t,s.Ts)}}function kk(r,e){const t=Se(r),s=t.La.get(e);if(s&&s.Fa)return Pe().add(s.key);{let o=Pe();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const d=t.xa.get(h);o=o.unionWith(d.view.fa)}return o}}function jw(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ek.bind(null,e),e.Ma.R_=uk.bind(null,e.eventManager),e.Ma.Wa=ck.bind(null,e.eventManager),e}function Ak(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ik.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return DC(this.persistence,new NC,e.initialUser,this.serializer)}ja(e){return new yw(Np.ei,this.serializer)}za(e){return new UC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class Rk extends vc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Be(this.persistence.referenceDelegate instanceof yc);const s=this.persistence.referenceDelegate.garbageCollector;return new gC(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new yw(s=>yc.ei(s,t),this.serializer)}}class Xf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>C_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ck.bind(null,this.syncEngine),await ok(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lk}()}createDatastore(e){const t=lh(e.databaseInfo.databaseId),s=function(l){return new WC(l)}(e.databaseInfo);return function(l,h,d,p){return new GC(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,d){return new QC(s,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>C_(this.syncEngine,t,0),function(){return w_.p()?new w_:new zC}())}createSyncEngine(e,t){return function(o,l,h,d,p,y,_){const w=new pk(o,l,h,d,p,y);return _&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);ce("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await vl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Xf.provider={build:()=>new Xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=Mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{ce("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(ce("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=jp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function pf(r,e){r.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await _w(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function A_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await xk(r);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>E_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>E_(e.remoteStore,o)),r._onlineComponents=e}async function xk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await pf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await pf(r,new vc)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await pf(r,new Rk(void 0));return r._offlineComponents}async function Uw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await A_(r,r._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await A_(r,new Xf))),r._onlineComponents}function Nk(r){return Uw(r).then(e=>e.syncEngine)}async function Yf(r){const e=await Uw(r),t=e.eventManager;return t.onListen=mk.bind(null,e.syncEngine),t.onUnlisten=_k.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),t}function bk(r,e,t={}){const s=new Ii;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,y){const _=new Fw({next:T=>{_.eu(),h.enqueueAndForget(()=>Pw(l,w));const C=T.docs.has(d);!C&&T.fromCache?y.reject(new he(X.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?y.reject(new he(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new xw(nh(d.path),_,{includeMetadataChanges:!0,ua:!0});return Rw(l,w)}(await Yf(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(r,e,t){if(!t)throw new he(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Dk(r,e,t,s){if(e===!0&&s===!0)throw new he(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function P_(r){if(!ye.isDocumentKey(r))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function x_(r){if(ye.isDocumentKey(r))throw new he(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te()}function xn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hh(r);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N_(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new KI;switch(s.type){case"firstParty":return new XI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=R_.get(t);s&&(ce("ComponentProvider","Removing Datastore"),R_.delete(t),s.terminate())}(this),Promise.resolve()}}function Ok(r,e,t,s={}){var o;const l=(r=xn(r,dh))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let d,p;if(typeof s.mockUserToken=="string")d=s.mockUserToken,p=Bt.MOCK_USER;else{d=AT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Bt(y)}r._authCredentials=new GI(new Lv(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class Wt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class Si extends Es{constructor(e,t,s){super(e,t,nh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ye(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function wc(r,e,...t){if(r=hr(r),Bw("collection","path",e),r instanceof dh){const s=Ye.fromString(e,...t);return x_(s),new Si(r,null,s)}{if(!(r instanceof Wt||r instanceof Si))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return x_(s),new Si(r.firestore,null,s)}}function lr(r,e,...t){if(r=hr(r),arguments.length===1&&(e=Mv.newId()),Bw("doc","path",e),r instanceof dh){const s=Ye.fromString(e,...t);return P_(s),new Wt(r,null,new ye(s))}{if(!(r instanceof Wt||r instanceof Si))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return P_(s),new Wt(r.firestore,r instanceof Si?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ww(this,"async_queue_retry"),this.fu=()=>{const s=ff();s&&ce("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new Ii;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!zo(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw Fr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Mp.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function D_(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class xi extends dh{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new b_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b_(e),this._firestoreClient=void 0,await e}}}function Vk(r,e){const t=typeof r=="object"?r:LI(),s=typeof r=="string"?r:"(default)",o=bI(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=CT("firestore");l&&Ok(o,...l)}return o}function zp(r){if(r._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Lk(r),r._firestoreClient}function Lk(r){var e,t,s;const o=r._freezeSettings(),l=function(d,p,y,_){return new hS(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,zw(_.experimentalLongPollingOptions),_.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new Pk(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(Vt.fromBase64String(e))}catch(t){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=/^__.*__$/;class jk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class $w{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Oi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class ph{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new ph(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Bu(e),o}Lu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ec(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Ww(this.Mu)&&Mk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Fk{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||lh(e)}$u(e,t,s,o=!1){return new ph({Mu:e,methodName:t,Ku:s,path:Ot.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mh(r){const e=r._freezeSettings(),t=lh(r._databaseId);return new Fk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Hw(r,e,t,s,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);Kp("Data must be an object, but it was:",h,s);const d=Kw(s,h);let p,y;if(l.merge)p=new gn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const w of l.mergeFields){const T=Jf(e,w,t);if(!h.contains(T))throw new he(X.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qw(_,T)||_.push(T)}p=new gn(_),y=h.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=h.fieldTransforms;return new jk(new sn(d),p,y)}class gh extends El{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function Uk(r,e,t){return new ph({Mu:3,Ku:e.settings.Ku,methodName:r._methodName,Nu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wp extends El{_toFieldTransform(e){return new iw(e.path,new dl)}isEqual(e){return e instanceof Wp}}class Hp extends El{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=Uk(this,e,!0),s=this.Uu.map(l=>Wo(l,t)),o=new xo(s);return new iw(e.path,o)}isEqual(e){return e instanceof Hp&&cc(this.Uu,e.Uu)}}function zk(r,e,t,s){const o=r.$u(1,e,t);Kp("Data must be an object, but it was:",o,s);const l=[],h=sn.empty();Di(s,(p,y)=>{const _=Gp(e,p,t);y=hr(y);const w=o.Lu(_);if(y instanceof gh)l.push(_);else{const T=Wo(y,w);T!=null&&(l.push(_),h.set(_,T))}});const d=new gn(l);return new $w(h,d,o.fieldTransforms)}function Bk(r,e,t,s,o,l){const h=r.$u(1,e,t),d=[Jf(e,s,t)],p=[o];if(l.length%2!=0)throw new he(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Jf(e,l[T])),p.push(l[T+1]);const y=[],_=sn.empty();for(let T=d.length-1;T>=0;--T)if(!qw(y,d[T])){const C=d[T];let b=p[T];b=hr(b);const L=h.Lu(C);if(b instanceof gh)y.push(C);else{const N=Wo(b,L);N!=null&&(y.push(C),_.set(C,N))}}const w=new gn(y);return new $w(_,w,h.fieldTransforms)}function $k(r,e,t,s=!1){return Wo(t,r.$u(s?4:3,e))}function Wo(r,e){if(Gw(r=hr(r)))return Kp("Unsupported field value:",e,r),Kw(r,e);if(r instanceof El)return function(s,o){if(!Ww(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const d of s){let p=Wo(d,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=hr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return DS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=wt.fromDate(s);return{timestampValue:gc(o.serializer,l)}}if(s instanceof wt){const l=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gc(o.serializer,l)}}if(s instanceof Bp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Do)return{bytesValue:cw(o.serializer,s._byteString)};if(s instanceof Wt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof $p)return function(h,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return Cp(d.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${hh(s)}`)}(r,e)}function Kw(r,e){const t={};return jv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(r,(s,o)=>{const l=Wo(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Gw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof wt||r instanceof Bp||r instanceof Do||r instanceof Wt||r instanceof El||r instanceof $p)}function Kp(r,e,t){if(!Gw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=hh(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function Jf(r,e,t){if((e=hr(e))instanceof fh)return e._internalPath;if(typeof e=="string")return Gp(r,e);throw Ec("Field path arguments must be of type string or ",r,!1,void 0,t)}const Wk=new RegExp("[~\\*/\\[\\]]");function Gp(r,e,t){if(e.search(Wk)>=0)throw Ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new fh(...e.split("."))._internalPath}catch{throw Ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ec(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(X.INVALID_ARGUMENT,d+r+p)}function qw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Hk extends Qw{data(){return super.data()}}function yh(r,e){return typeof e=="string"?Gp(r,e):e instanceof fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qp{}class Xw extends qp{}function Yw(r,e,...t){let s=[];e instanceof qp&&s.push(e),s=s.concat(t),function(l){const h=l.filter(p=>p instanceof Qp).length,d=l.filter(p=>p instanceof _h).length;if(h>1||h>0&&d>0)throw new he(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class _h extends Xw{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new _h(e,t,s)}_apply(e){const t=this._parse(e);return Zw(e._query,t),new Es(e.firestore,e.converter,zf(e._query,t))}_parse(e){const t=mh(e.firestore);return function(l,h,d,p,y,_,w){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){V_(w,_);const C=[];for(const b of w)C.push(O_(p,l,b));T={arrayValue:{values:C}}}else T=O_(p,l,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||V_(w,_),T=$k(d,h,w,_==="in"||_==="not-in");return pt.create(y,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jw(r,e,t){const s=e,o=yh("where",r);return _h._create(o,s,t)}class Qp extends qp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qp(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const d=l.getFlattenedFilters();for(const p of d)Zw(h,p),h=zf(h,p)}(e._query,t),new Es(e.firestore,e.converter,zf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xp extends Xw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xp(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new he(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hl(l,h)}(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Bo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Gk(r,e="asc"){const t=e,s=yh("orderBy",r);return Xp._create(s,t)}function O_(r,e,t){if(typeof(t=hr(t))=="string"){if(t==="")throw new he(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gv(e)&&t.indexOf("/")!==-1)throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ye.fromString(t));if(!ye.isDocumentKey(s))throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return e_(r,new ye(s))}if(t instanceof Wt)return e_(r,t._key);throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hh(t)}.`)}function V_(r,e){if(!Array.isArray(r)||r.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zw(r,e){const t=function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class qk{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Di(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>ut(h.doubleValue));return new $p(l)}convertGeoPoint(e){return new Bp(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=th(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const t=ki(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ye.fromString(e);Be(gw(s));const o=new ul(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||Fr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class t0 extends Qw{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(yh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class rc extends t0{data(e={}){return super.data(e)}}class Qk{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ha(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new rc(this._firestore,this._userDataWriter,s.key,s,new Ha(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new rc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new rc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ha(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),_=h.indexOf(d.doc.key)),{type:Xk(d.type),doc:p,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Xk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(r){r=xn(r,Wt);const e=xn(r.firestore,xi);return bk(zp(e),r._key).then(t=>r0(e,r,t))}class n0 extends qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Zf(r,e,t){r=xn(r,Wt);const s=xn(r.firestore,xi),o=e0(r.converter,e,t);return vh(s,[Hw(mh(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Pn.none())])}function ep(r,e,t,...s){r=xn(r,Wt);const o=xn(r.firestore,xi),l=mh(o);let h;return h=typeof(e=hr(e))=="string"||e instanceof fh?Bk(l,"updateDoc",r._key,e,t,s):zk(l,"updateDoc",r._key,e),vh(o,[h.toMutation(r._key,Pn.exists(!0))])}function Jk(r){return vh(xn(r.firestore,xi),[new kp(r._key,Pn.none())])}function Zk(r,e){const t=xn(r.firestore,xi),s=lr(r),o=e0(r.converter,e);return vh(t,[Hw(mh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then(()=>s)}function Oo(r,...e){var t,s,o;r=hr(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||D_(e[h])||(l=e[h],h++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(D_(e[h])){const w=e[h];e[h]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[h+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[h+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,y,_;if(r instanceof Wt)y=xn(r.firestore,xi),_=nh(r._key.path),p={next:w=>{e[h]&&e[h](r0(y,r,w))},error:e[h+1],complete:e[h+2]};else{const w=xn(r,Es);y=xn(w.firestore,xi),_=w._query;const T=new n0(y);p={next:C=>{e[h]&&e[h](new Qk(y,T,w,C))},error:e[h+1],complete:e[h+2]},Kk(r._query)}return function(T,C,b,L){const N=new Fw(L),K=new xw(C,N,b);return T.asyncQueue.enqueueAndForget(async()=>Rw(await Yf(T),K)),()=>{N.eu(),T.asyncQueue.enqueueAndForget(async()=>Pw(await Yf(T),K))}}(zp(y),_,d,p)}function vh(r,e){return function(s,o){const l=new Ii;return s.asyncQueue.enqueueAndForget(async()=>wk(await Nk(s),o,l)),l.promise}(zp(r),e)}function r0(r,e,t){const s=t.docs.get(e._key),o=new n0(r);return new t0(r,o,e._key,s,new Ha(t.hasPendingWrites,t.fromCache),e.converter)}function Tc(){return new Wp("serverTimestamp")}function eA(...r){return new Hp("arrayUnion",r)}(function(e,t=!0){(function(o){Fo=o})(VI),dc(new ol("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),d=new xi(new qI(s.getProvider("auth-internal")),new JI(s.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(y.options.projectId,_)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),So(qy,"4.7.6",e),So(qy,"4.7.6","esm2017")})();var tA="firebase",nA="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */So(tA,nA,"app");const rA={apiKey:"AIzaSyBeuAxA35t_LabwU8Gu-rkuV-mkd02qL0s",authDomain:"test-project-multiplayer.firebaseapp.com",projectId:"test-project-multiplayer",storageBucket:"test-project-multiplayer.firebasestorage.app",messagingSenderId:"983160703654",appId:"1:983160703654:web:535d064be3bd8ccf7e0267",measurementId:"G-FNH4PJMMRD"},iA=Av(rA),on=Vk(iA);let sA={data:""},oA=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||sA,aA=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lA=/\/\*[^]*?\*\/|  +/g,L_=/\n+/g,mi=(r,e)=>{let t="",s="",o="";for(let l in r){let h=r[l];l[0]=="@"?l[1]=="i"?t=l+" "+h+";":s+=l[1]=="f"?mi(h,l):l+"{"+mi(h,l[1]=="k"?"":e)+"}":typeof h=="object"?s+=mi(h,e?e.replace(/([^,])+/g,d=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,d):d?d+" "+p:p)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=mi.p?mi.p(l,h):l+":"+h+";")}return t+(e&&o?e+"{"+o+"}":o)+s},br={},i0=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+i0(r[t]);return e}return r},uA=(r,e,t,s,o)=>{let l=i0(r),h=br[l]||(br[l]=(p=>{let y=0,_=11;for(;y<p.length;)_=101*_+p.charCodeAt(y++)>>>0;return"go"+_})(l));if(!br[h]){let p=l!==r?r:(y=>{let _,w,T=[{}];for(;_=aA.exec(y.replace(lA,""));)_[4]?T.shift():_[3]?(w=_[3].replace(L_," ").trim(),T.unshift(T[0][w]=T[0][w]||{})):T[0][_[1]]=_[2].replace(L_," ").trim();return T[0]})(r);br[h]=mi(o?{["@keyframes "+h]:p}:p,t?"":"."+h)}let d=t&&br.g?br.g:null;return t&&(br.g=br[h]),((p,y,_,w)=>{w?y.data=y.data.replace(w,p):y.data.indexOf(p)===-1&&(y.data=_?p+y.data:y.data+p)})(br[h],e,s,d),h},cA=(r,e,t)=>r.reduce((s,o,l)=>{let h=e[l];if(h&&h.call){let d=h(t),p=d&&d.props&&d.props.className||/^go/.test(d)&&d;h=p?"."+p:d&&typeof d=="object"?d.props?"":mi(d,""):d===!1?"":d}return s+o+(h??"")},"");function wh(r){let e=this||{},t=r.call?r(e.p):r;return uA(t.unshift?t.raw?cA(t,[].slice.call(arguments,1),e.p):t.reduce((s,o)=>Object.assign(s,o&&o.call?o(e.p):o),{}):t,oA(e.target),e.g,e.o,e.k)}let s0,tp,np;wh.bind({g:1});let zr=wh.bind({k:1});function hA(r,e,t,s){mi.p=e,s0=r,tp=t,np=s}function Vi(r,e){let t=this||{};return function(){let s=arguments;function o(l,h){let d=Object.assign({},l),p=d.className||o.className;t.p=Object.assign({theme:tp&&tp()},d),t.o=/ *go\d+/.test(p),d.className=wh.apply(t,s)+(p?" "+p:"");let y=r;return r[0]&&(y=d.as||r,delete d.as),np&&y[0]&&np(d),s0(y,d)}return o}}var dA=r=>typeof r=="function",Ic=(r,e)=>dA(r)?r(e):r,fA=(()=>{let r=0;return()=>(++r).toString()})(),o0=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),pA=20,a0=(r,e)=>{switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,pA)};case 1:return{...r,toasts:r.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:t}=e;return a0(r,{type:r.toasts.find(l=>l.id===t.id)?1:0,toast:t});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let o=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},ic=[],sc={toasts:[],pausedAt:void 0},Ts=r=>{sc=a0(sc,r),ic.forEach(e=>{e(sc)})},mA={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gA=(r={})=>{let[e,t]=$.useState(sc);$.useEffect(()=>(ic.push(t),()=>{let o=ic.indexOf(t);o>-1&&ic.splice(o,1)}),[e]);let s=e.toasts.map(o=>{var l,h,d;return{...r,...r[o.type],...o,removeDelay:o.removeDelay||((l=r[o.type])==null?void 0:l.removeDelay)||(r==null?void 0:r.removeDelay),duration:o.duration||((h=r[o.type])==null?void 0:h.duration)||(r==null?void 0:r.duration)||mA[o.type],style:{...r.style,...(d=r[o.type])==null?void 0:d.style,...o.style}}});return{...e,toasts:s}},yA=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||fA()}),Tl=r=>(e,t)=>{let s=yA(e,r,t);return Ts({type:2,toast:s}),s.id},ze=(r,e)=>Tl("blank")(r,e);ze.error=Tl("error");ze.success=Tl("success");ze.loading=Tl("loading");ze.custom=Tl("custom");ze.dismiss=r=>{Ts({type:3,toastId:r})};ze.remove=r=>Ts({type:4,toastId:r});ze.promise=(r,e,t)=>{let s=ze.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(o=>{let l=e.success?Ic(e.success,o):void 0;return l?ze.success(l,{id:s,...t,...t==null?void 0:t.success}):ze.dismiss(s),o}).catch(o=>{let l=e.error?Ic(e.error,o):void 0;l?ze.error(l,{id:s,...t,...t==null?void 0:t.error}):ze.dismiss(s)}),r};var _A=(r,e)=>{Ts({type:1,toast:{id:r,height:e}})},vA=()=>{Ts({type:5,time:Date.now()})},Ya=new Map,wA=1e3,EA=(r,e=wA)=>{if(Ya.has(r))return;let t=setTimeout(()=>{Ya.delete(r),Ts({type:4,toastId:r})},e);Ya.set(r,t)},TA=r=>{let{toasts:e,pausedAt:t}=gA(r);$.useEffect(()=>{if(t)return;let l=Date.now(),h=e.map(d=>{if(d.duration===1/0)return;let p=(d.duration||0)+d.pauseDuration-(l-d.createdAt);if(p<0){d.visible&&ze.dismiss(d.id);return}return setTimeout(()=>ze.dismiss(d.id),p)});return()=>{h.forEach(d=>d&&clearTimeout(d))}},[e,t]);let s=$.useCallback(()=>{t&&Ts({type:6,time:Date.now()})},[t]),o=$.useCallback((l,h)=>{let{reverseOrder:d=!1,gutter:p=8,defaultPosition:y}=h||{},_=e.filter(C=>(C.position||y)===(l.position||y)&&C.height),w=_.findIndex(C=>C.id===l.id),T=_.filter((C,b)=>b<w&&C.visible).length;return _.filter(C=>C.visible).slice(...d?[T+1]:[0,T]).reduce((C,b)=>C+(b.height||0)+p,0)},[e]);return $.useEffect(()=>{e.forEach(l=>{if(l.dismissed)EA(l.id,l.removeDelay);else{let h=Ya.get(l.id);h&&(clearTimeout(h),Ya.delete(l.id))}})},[e]),{toasts:e,handlers:{updateHeight:_A,startPause:vA,endPause:s,calculateOffset:o}}},IA=zr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SA=zr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CA=zr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,kA=Vi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SA} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${CA} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,AA=zr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RA=Vi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${AA} 1s linear infinite;
`,PA=zr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xA=zr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,NA=Vi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PA} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xA} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bA=Vi("div")`
  position: absolute;
`,DA=Vi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,OA=zr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VA=Vi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${OA} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,LA=({toast:r})=>{let{icon:e,type:t,iconTheme:s}=r;return e!==void 0?typeof e=="string"?$.createElement(VA,null,e):e:t==="blank"?null:$.createElement(DA,null,$.createElement(RA,{...s}),t!=="loading"&&$.createElement(bA,null,t==="error"?$.createElement(kA,{...s}):$.createElement(NA,{...s})))},MA=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jA=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,FA="0%{opacity:0;} 100%{opacity:1;}",UA="0%{opacity:1;} 100%{opacity:0;}",zA=Vi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,BA=Vi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$A=(r,e)=>{let t=r.includes("top")?1:-1,[s,o]=o0()?[FA,UA]:[MA(t),jA(t)];return{animation:e?`${zr(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${zr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},WA=$.memo(({toast:r,position:e,style:t,children:s})=>{let o=r.height?$A(r.position||e||"top-center",r.visible):{opacity:0},l=$.createElement(LA,{toast:r}),h=$.createElement(BA,{...r.ariaProps},Ic(r.message,r));return $.createElement(zA,{className:r.className,style:{...o,...t,...r.style}},typeof s=="function"?s({icon:l,message:h}):$.createElement($.Fragment,null,l,h))});hA($.createElement);var HA=({id:r,className:e,style:t,onHeightUpdate:s,children:o})=>{let l=$.useCallback(h=>{if(h){let d=()=>{let p=h.getBoundingClientRect().height;s(r,p)};d(),new MutationObserver(d).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return $.createElement("div",{ref:l,className:e,style:t},o)},KA=(r,e)=>{let t=r.includes("top"),s=t?{top:0}:{bottom:0},o=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:o0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...o}},GA=wh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Hu=16,qA=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:s,children:o,containerStyle:l,containerClassName:h})=>{let{toasts:d,handlers:p}=TA(t);return $.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Hu,left:Hu,right:Hu,bottom:Hu,pointerEvents:"none",...l},className:h,onMouseEnter:p.startPause,onMouseLeave:p.endPause},d.map(y=>{let _=y.position||e,w=p.calculateOffset(y,{reverseOrder:r,gutter:s,defaultPosition:e}),T=KA(_,w);return $.createElement(HA,{id:y.id,key:y.id,onHeightUpdate:p.updateHeight,className:y.visible?GA:"",style:T},y.type==="custom"?Ic(y.message,y):o?o(y):$.createElement(WA,{toast:y,position:_}))}))};const QA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",XA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",_s=(r,e)=>{for(const t in e)r[t]=e[t];return r},rp="numeric",ip="ascii",sp="alpha",Ja="asciinumeric",Ka="alphanumeric",op="domain",l0="emoji",YA="scheme",JA="slashscheme",mf="whitespace";function ZA(r,e){return r in e||(e[r]=[]),e[r]}function gs(r,e,t){e[rp]&&(e[Ja]=!0,e[Ka]=!0),e[ip]&&(e[Ja]=!0,e[sp]=!0),e[Ja]&&(e[Ka]=!0),e[sp]&&(e[Ka]=!0),e[Ka]&&(e[op]=!0),e[l0]&&(e[op]=!0);for(const s in e){const o=ZA(s,t);o.indexOf(r)<0&&o.push(r)}}function e2(r,e){const t={};for(const s in e)e[s].indexOf(r)>=0&&(t[s]=!0);return t}function mn(r=null){this.j={},this.jr=[],this.jd=null,this.t=r}mn.groups={};mn.prototype={accepts(){return!!this.t},go(r){const e=this,t=e.j[r];if(t)return t;for(let s=0;s<e.jr.length;s++){const o=e.jr[s][0],l=e.jr[s][1];if(l&&o.test(r))return l}return e.jd},has(r,e=!1){return e?r in this.j:!!this.go(r)},ta(r,e,t,s){for(let o=0;o<r.length;o++)this.tt(r[o],e,t,s)},tr(r,e,t,s){s=s||mn.groups;let o;return e&&e.j?o=e:(o=new mn(e),t&&s&&gs(e,t,s)),this.jr.push([r,o]),o},ts(r,e,t,s){let o=this;const l=r.length;if(!l)return o;for(let h=0;h<l-1;h++)o=o.tt(r[h]);return o.tt(r[l-1],e,t,s)},tt(r,e,t,s){s=s||mn.groups;const o=this;if(e&&e.j)return o.j[r]=e,e;const l=e;let h,d=o.go(r);if(d?(h=new mn,_s(h.j,d.j),h.jr.push.apply(h.jr,d.jr),h.jd=d.jd,h.t=d.t):h=new mn,l){if(s)if(h.t&&typeof h.t=="string"){const p=_s(e2(h.t,s),t);gs(l,p,s)}else t&&gs(l,t,s);h.t=l}return o.j[r]=h,h}};const Ce=(r,e,t,s,o)=>r.ta(e,t,s,o),st=(r,e,t,s,o)=>r.tr(e,t,s,o),M_=(r,e,t,s,o)=>r.ts(e,t,s,o),ne=(r,e,t,s,o)=>r.tt(e,t,s,o),Lr="WORD",ap="UWORD",u0="ASCIINUMERICAL",c0="ALPHANUMERICAL",pl="LOCALHOST",lp="TLD",up="UTLD",oc="SCHEME",Io="SLASH_SCHEME",Yp="NUM",cp="WS",Jp="NL",Za="OPENBRACE",el="CLOSEBRACE",Sc="OPENBRACKET",Cc="CLOSEBRACKET",kc="OPENPAREN",Ac="CLOSEPAREN",Rc="OPENANGLEBRACKET",Pc="CLOSEANGLEBRACKET",xc="FULLWIDTHLEFTPAREN",Nc="FULLWIDTHRIGHTPAREN",bc="LEFTCORNERBRACKET",Dc="RIGHTCORNERBRACKET",Oc="LEFTWHITECORNERBRACKET",Vc="RIGHTWHITECORNERBRACKET",Lc="FULLWIDTHLESSTHAN",Mc="FULLWIDTHGREATERTHAN",jc="AMPERSAND",Zp="APOSTROPHE",Fc="ASTERISK",pi="AT",Uc="BACKSLASH",zc="BACKTICK",Bc="CARET",gi="COLON",em="COMMA",$c="DOLLAR",ir="DOT",Wc="EQUALS",tm="EXCLAMATION",Rn="HYPHEN",tl="PERCENT",Hc="PIPE",Kc="PLUS",Gc="POUND",nl="QUERY",nm="QUOTE",h0="FULLWIDTHMIDDLEDOT",rm="SEMI",sr="SLASH",rl="TILDE",qc="UNDERSCORE",d0="EMOJI",Qc="SYM";var f0=Object.freeze({__proto__:null,WORD:Lr,UWORD:ap,ASCIINUMERICAL:u0,ALPHANUMERICAL:c0,LOCALHOST:pl,TLD:lp,UTLD:up,SCHEME:oc,SLASH_SCHEME:Io,NUM:Yp,WS:cp,NL:Jp,OPENBRACE:Za,CLOSEBRACE:el,OPENBRACKET:Sc,CLOSEBRACKET:Cc,OPENPAREN:kc,CLOSEPAREN:Ac,OPENANGLEBRACKET:Rc,CLOSEANGLEBRACKET:Pc,FULLWIDTHLEFTPAREN:xc,FULLWIDTHRIGHTPAREN:Nc,LEFTCORNERBRACKET:bc,RIGHTCORNERBRACKET:Dc,LEFTWHITECORNERBRACKET:Oc,RIGHTWHITECORNERBRACKET:Vc,FULLWIDTHLESSTHAN:Lc,FULLWIDTHGREATERTHAN:Mc,AMPERSAND:jc,APOSTROPHE:Zp,ASTERISK:Fc,AT:pi,BACKSLASH:Uc,BACKTICK:zc,CARET:Bc,COLON:gi,COMMA:em,DOLLAR:$c,DOT:ir,EQUALS:Wc,EXCLAMATION:tm,HYPHEN:Rn,PERCENT:tl,PIPE:Hc,PLUS:Kc,POUND:Gc,QUERY:nl,QUOTE:nm,FULLWIDTHMIDDLEDOT:h0,SEMI:rm,SLASH:sr,TILDE:rl,UNDERSCORE:qc,EMOJI:d0,SYM:Qc});const Dr=/[a-z]/,za=new RegExp("\\p{L}","u"),gf=new RegExp("\\p{Emoji}","u"),Or=/\d/,yf=/\s/,j_="\r",_f=`
`,t2="",n2="",vf="";let Ku=null,Gu=null;function r2(r=[]){const e={};mn.groups=e;const t=new mn;Ku==null&&(Ku=F_(QA)),Gu==null&&(Gu=F_(XA)),ne(t,"'",Zp),ne(t,"{",Za),ne(t,"}",el),ne(t,"[",Sc),ne(t,"]",Cc),ne(t,"(",kc),ne(t,")",Ac),ne(t,"<",Rc),ne(t,">",Pc),ne(t,"",xc),ne(t,"",Nc),ne(t,"",bc),ne(t,"",Dc),ne(t,"",Oc),ne(t,"",Vc),ne(t,"",Lc),ne(t,"",Mc),ne(t,"&",jc),ne(t,"*",Fc),ne(t,"@",pi),ne(t,"`",zc),ne(t,"^",Bc),ne(t,":",gi),ne(t,",",em),ne(t,"$",$c),ne(t,".",ir),ne(t,"=",Wc),ne(t,"!",tm),ne(t,"-",Rn),ne(t,"%",tl),ne(t,"|",Hc),ne(t,"+",Kc),ne(t,"#",Gc),ne(t,"?",nl),ne(t,'"',nm),ne(t,"/",sr),ne(t,";",rm),ne(t,"~",rl),ne(t,"_",qc),ne(t,"\\",Uc),ne(t,"",h0);const s=st(t,Or,Yp,{[rp]:!0});st(s,Or,s);const o=st(s,Dr,u0,{[Ja]:!0}),l=st(s,za,c0,{[Ka]:!0}),h=st(t,Dr,Lr,{[ip]:!0});st(h,Or,o),st(h,Dr,h),st(o,Or,o),st(o,Dr,o);const d=st(t,za,ap,{[sp]:!0});st(d,Dr),st(d,Or,l),st(d,za,d),st(l,Or,l),st(l,Dr),st(l,za,l);const p=ne(t,_f,Jp,{[mf]:!0}),y=ne(t,j_,cp,{[mf]:!0}),_=st(t,yf,cp,{[mf]:!0});ne(t,vf,_),ne(y,_f,p),ne(y,vf,_),st(y,yf,_),ne(_,j_),ne(_,_f),st(_,yf,_),ne(_,vf,_);const w=st(t,gf,d0,{[l0]:!0});ne(w,"#"),st(w,gf,w),ne(w,t2,w);const T=ne(w,n2);ne(T,"#"),st(T,gf,w);const C=[[Dr,h],[Or,o]],b=[[Dr,null],[za,d],[Or,l]];for(let L=0;L<Ku.length;L++)fi(t,Ku[L],lp,Lr,C);for(let L=0;L<Gu.length;L++)fi(t,Gu[L],up,ap,b);gs(lp,{tld:!0,ascii:!0},e),gs(up,{utld:!0,alpha:!0},e),fi(t,"file",oc,Lr,C),fi(t,"mailto",oc,Lr,C),fi(t,"http",Io,Lr,C),fi(t,"https",Io,Lr,C),fi(t,"ftp",Io,Lr,C),fi(t,"ftps",Io,Lr,C),gs(oc,{scheme:!0,ascii:!0},e),gs(Io,{slashscheme:!0,ascii:!0},e),r=r.sort((L,N)=>L[0]>N[0]?1:-1);for(let L=0;L<r.length;L++){const N=r[L][0],G=r[L][1]?{[YA]:!0}:{[JA]:!0};N.indexOf("-")>=0?G[op]=!0:Dr.test(N)?Or.test(N)?G[Ja]=!0:G[ip]=!0:G[rp]=!0,M_(t,N,N,G)}return M_(t,"localhost",pl,{ascii:!0}),t.jd=new mn(Qc),{start:t,tokens:_s({groups:e},f0)}}function p0(r,e){const t=i2(e.replace(/[A-Z]/g,d=>d.toLowerCase())),s=t.length,o=[];let l=0,h=0;for(;h<s;){let d=r,p=null,y=0,_=null,w=-1,T=-1;for(;h<s&&(p=d.go(t[h]));)d=p,d.accepts()?(w=0,T=0,_=d):w>=0&&(w+=t[h].length,T++),y+=t[h].length,l+=t[h].length,h++;l-=w,h-=T,y-=w,o.push({t:_.t,v:e.slice(l-y,l),s:l-y,e:l})}return o}function i2(r){const e=[],t=r.length;let s=0;for(;s<t;){let o=r.charCodeAt(s),l,h=o<55296||o>56319||s+1===t||(l=r.charCodeAt(s+1))<56320||l>57343?r[s]:r.slice(s,s+2);e.push(h),s+=h.length}return e}function fi(r,e,t,s,o){let l;const h=e.length;for(let d=0;d<h-1;d++){const p=e[d];r.j[p]?l=r.j[p]:(l=new mn(s),l.jr=o.slice(),r.j[p]=l),r=l}return l=new mn(t),l.jr=o.slice(),r.j[e[h-1]]=l,l}function F_(r){const e=[],t=[];let s=0,o="0123456789";for(;s<r.length;){let l=0;for(;o.indexOf(r[s+l])>=0;)l++;if(l>0){e.push(t.join(""));for(let h=parseInt(r.substring(s,s+l),10);h>0;h--)t.pop();s+=l}else t.push(r[s]),s++}return e}const Vo={defaultProtocol:"http",events:null,format:U_,formatHref:U_,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Eh(r,e=null){let t=_s({},Vo);r&&(t=_s(t,r instanceof Eh?r.o:r));const s=t.ignoreTags,o=[];for(let l=0;l<s.length;l++)o.push(s[l].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=o}Eh.prototype={o:Vo,ignoreTags:[],defaultRender(r){return r},check(r){return this.get("validate",r.toString(),r)},get(r,e,t){const s=e!=null;let o=this.o[r];return o&&(typeof o=="object"?(o=t.t in o?o[t.t]:Vo[r],typeof o=="function"&&s&&(o=o(e,t))):typeof o=="function"&&s&&(o=o(e,t.t,t)),o)},getObj(r,e,t){let s=this.o[r];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(r){const e=r.render(this);return(this.get("render",null,r)||this.defaultRender)(e,r.t,r)}};function U_(r){return r}var m0=Object.freeze({__proto__:null,defaults:Vo,Options:Eh,assign:_s});function g0(r,e){this.t="token",this.v=r,this.tk=e}g0.prototype={isLink:!1,toString(){return this.v},toHref(r){return this.toString()},toFormattedString(r){const e=this.toString(),t=r.get("truncate",e,this),s=r.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(r){return r.get("formatHref",this.toHref(r.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(r=Vo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(r),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(r){return{type:this.t,value:this.toFormattedString(r),isLink:this.isLink,href:this.toFormattedHref(r),start:this.startIndex(),end:this.endIndex()}},validate(r){return r.get("validate",this.toString(),this)},render(r){const e=this,t=this.toHref(r.get("defaultProtocol")),s=r.get("formatHref",t,this),o=r.get("tagName",t,e),l=this.toFormattedString(r),h={},d=r.get("className",t,e),p=r.get("target",t,e),y=r.get("rel",t,e),_=r.getObj("attributes",t,e),w=r.getObj("events",t,e);return h.href=s,d&&(h.class=d),p&&(h.target=p),y&&(h.rel=y),_&&_s(h,_),{tagName:o,attributes:h,content:l,eventListeners:w}}};function Th(r,e){class t extends g0{constructor(o,l){super(o,l),this.t=r}}for(const s in e)t.prototype[s]=e[s];return t.t=r,t}const z_=Th("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),B_=Th("text"),s2=Th("nl"),qu=Th("url",{isLink:!0,toHref(r=Vo.defaultProtocol){return this.hasProtocol()?this.v:`${r}://${this.v}`},hasProtocol(){const r=this.tk;return r.length>=2&&r[0].t!==pl&&r[1].t===gi}}),An=r=>new mn(r);function o2({groups:r}){const e=r.domain.concat([jc,Fc,pi,Uc,zc,Bc,$c,Wc,Rn,Yp,tl,Hc,Kc,Gc,sr,Qc,rl,qc]),t=[gi,em,ir,tm,tl,nl,nm,rm,Rc,Pc,Za,el,Cc,Sc,kc,Ac,xc,Nc,bc,Dc,Oc,Vc,Lc,Mc],s=[jc,Zp,Fc,Uc,zc,Bc,$c,Wc,Rn,Za,el,tl,Hc,Kc,Gc,nl,sr,Qc,rl,qc],o=An(),l=ne(o,rl);Ce(l,s,l),Ce(l,r.domain,l);const h=An(),d=An(),p=An();Ce(o,r.domain,h),Ce(o,r.scheme,d),Ce(o,r.slashscheme,p),Ce(h,s,l),Ce(h,r.domain,h);const y=ne(h,pi);ne(l,pi,y),ne(d,pi,y),ne(p,pi,y);const _=ne(l,ir);Ce(_,s,l),Ce(_,r.domain,l);const w=An();Ce(y,r.domain,w),Ce(w,r.domain,w);const T=ne(w,ir);Ce(T,r.domain,w);const C=An(z_);Ce(T,r.tld,C),Ce(T,r.utld,C),ne(y,pl,C);const b=ne(w,Rn);ne(b,Rn,b),Ce(b,r.domain,w),Ce(C,r.domain,w),ne(C,ir,T),ne(C,Rn,b);const L=ne(C,gi);Ce(L,r.numeric,z_);const N=ne(h,Rn),K=ne(h,ir);ne(N,Rn,N),Ce(N,r.domain,h),Ce(K,s,l),Ce(K,r.domain,h);const G=An(qu);Ce(K,r.tld,G),Ce(K,r.utld,G),Ce(G,r.domain,h),Ce(G,s,l),ne(G,ir,K),ne(G,Rn,N),ne(G,pi,y);const ee=ne(G,gi),Y=An(qu);Ce(ee,r.numeric,Y);const se=An(qu),re=An();Ce(se,e,se),Ce(se,t,re),Ce(re,e,se),Ce(re,t,re),ne(G,sr,se),ne(Y,sr,se);const R=ne(d,gi),S=ne(p,gi),k=ne(S,sr),x=ne(k,sr);Ce(d,r.domain,h),ne(d,ir,K),ne(d,Rn,N),Ce(p,r.domain,h),ne(p,ir,K),ne(p,Rn,N),Ce(R,r.domain,se),ne(R,sr,se),ne(R,nl,se),Ce(x,r.domain,se),Ce(x,e,se),ne(x,sr,se);const O=[[Za,el],[Sc,Cc],[kc,Ac],[Rc,Pc],[xc,Nc],[bc,Dc],[Oc,Vc],[Lc,Mc]];for(let j=0;j<O.length;j++){const[P,qe]=O[j],ot=ne(se,P);ne(re,P,ot),ne(ot,qe,se);const et=An(qu);Ce(ot,e,et);const be=An();Ce(ot,t),Ce(et,e,et),Ce(et,t,be),Ce(be,e,et),Ce(be,t,be),ne(et,qe,se),ne(be,qe,se)}return ne(o,pl,G),ne(o,Jp,s2),{start:o,tokens:f0}}function a2(r,e,t){let s=t.length,o=0,l=[],h=[];for(;o<s;){let d=r,p=null,y=null,_=0,w=null,T=-1;for(;o<s&&!(p=d.go(t[o].t));)h.push(t[o++]);for(;o<s&&(y=p||d.go(t[o].t));)p=null,d=y,d.accepts()?(T=0,w=d):T>=0&&T++,o++,_++;if(T<0)o-=_,o<s&&(h.push(t[o]),o++);else{h.length>0&&(l.push(wf(B_,e,h)),h=[]),o-=T,_-=T;const C=w.t,b=t.slice(o-_,o);l.push(wf(C,e,b))}}return h.length>0&&l.push(wf(B_,e,h)),l}function wf(r,e,t){const s=t[0].s,o=t[t.length-1].e,l=e.slice(s,o);return new r(l,t)}const zt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function l2(){zt.scanner=r2(zt.customSchemes);for(let r=0;r<zt.tokenQueue.length;r++)zt.tokenQueue[r][1]({scanner:zt.scanner});zt.parser=o2(zt.scanner.tokens);for(let r=0;r<zt.pluginQueue.length;r++)zt.pluginQueue[r][1]({scanner:zt.scanner,parser:zt.parser});return zt.initialized=!0,zt}function y0(r){return zt.initialized||l2(),a2(zt.parser.start,r,p0(zt.scanner.start,r))}y0.scan=p0;function u2(r,e,t){const s=y0(r),o=[];for(let l=0;l<s.length;l++){const h=s[l];if(h.t==="nl"&&e.get("nl2br")){const d=`__linkify-el-${t.elementId++}`;o.push($.createElement("br",{key:d}))}else if(!h.isLink||!e.check(h))o.push(h.toString());else{let d=e.render(h);if(!("key"in d.props)){const p=`__linkify-el-${t.elementId++}`,y=m0.assign({key:p},d.props);d=$.cloneElement(d,y)}o.push(d)}}return o}function _0(r,e,t){if($.Children.count(r.props.children)===0)return r;const s=[];$.Children.forEach(r.props.children,h=>{typeof h=="string"?s.push.apply(s,u2(h,e,t)):$.isValidElement(h)?typeof h.type=="string"&&e.ignoreTags.indexOf(h.type.toUpperCase())>=0?s.push(h):s.push(_0(h,e,t)):s.push(h)});const o=`__linkify-el-${t.elementId++}`,l=m0.assign({key:o},r.props);return $.cloneElement(r,l,s)}const c2=r=>{let e=0;const t=({tagName:p,attributes:y,content:_})=>(y.key=`__linkify-lnk-${e++}`,y.class&&(y.className=y.class,delete y.class),$.createElement(p,y,_)),s={key:"__linkify-wrapper"};for(const p in r)p!=="options"&&p!=="as"&&p!=="tagName"&&p!=="children"&&(s[p]=r[p]);const o=new Eh(r.options,t),l=r.as||r.tagName||$.Fragment||"span",h=r.children,d=$.createElement(l,s,h);return _0(d,o,{elementId:0})},h2=({gameId:r})=>{const{user:e,isAuthenticated:t,loginWithRedirect:s}=gl(),[o,l]=$.useState([]),[h,d]=$.useState(""),p=$.useRef(null);$.useEffect(()=>{if(!r||!(e!=null&&e.sub))return;if(!on){console.error("Firestore database not initialized");return}const _=Yw(wc(on,"messages"),Jw("gameId","==",r),Gk("timestamp","asc"));return Oo(_,T=>{const C=T.docs.map(b=>{var N;const L=b.data();return{id:b.id,text:L.text,isOwn:L.userId===e.sub,timestamp:((N=L.timestamp)==null?void 0:N.toDate())||new Date,userId:L.userId}});l(C)},T=>{console.error("Message listener error:",T)})},[r,e==null?void 0:e.sub]),$.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[o]);const y=async()=>{if(!(!h.trim()||!(e!=null&&e.sub)||!r))try{await Zk(wc(on,"messages"),{text:h,userId:e.sub,gameId:r,timestamp:Tc()}),d("")}catch(_){console.error("Error sending message:",_)}};return t?M.jsxs("div",{className:"chat-container",children:[M.jsx("div",{className:"chat-header",children:M.jsxs("p",{children:["Chatting as ",e==null?void 0:e.name," in Game: ",r]})}),M.jsx("div",{className:"chat-messages",ref:p,children:o.map(_=>M.jsx("div",{className:`message ${_.isOwn?"own-message":"other-message"}`,children:M.jsxs("div",{className:"message-content",children:[M.jsx(c2,{options:{target:"_blank"},children:_.text}),M.jsx("span",{className:"timestamp",children:_.timestamp.toLocaleTimeString()})]})},_.id))}),M.jsxs("div",{className:"chat-input",children:[M.jsx("input",{type:"text",value:h,onChange:_=>d(_.target.value),onKeyPress:_=>_.key==="Enter"&&y(),placeholder:"Type your message..."}),M.jsx("button",{onClick:y,children:"Send"})]})]}):M.jsxs("div",{className:"auth-prompt",children:[M.jsx("p",{children:"You are not logged in. Please login to chat."}),M.jsx("button",{onClick:()=>s(),children:"Login"})]})},d2=r=>{const{gameId:e}=r,{user:t,isAuthenticated:s}=gl(),[o,l]=$.useState([]),[h,d]=$.useState(new Set),p=$.useCallback(async _=>{if(t!=null&&t.sub)try{await Zf(lr(on,"users",t.sub),{id:t.sub,name:t.name||"Anonymous",online:_,lastSeen:Tc(),picture:t.picture||null},{merge:!0})}catch(w){console.error("Presence update error:",w)}},[t]);$.useEffect(()=>{if(!s||!(t!=null&&t.sub))return;const _=()=>p(!1),w=setInterval(()=>p(!0),3e4);return window.addEventListener("beforeunload",_),p(!0),()=>{window.removeEventListener("beforeunload",_),clearInterval(w),p(!1)}},[s,t,p]),$.useEffect(()=>{if(!s)return;const _=Yw(wc(on,"users"),Jw("online","==",!0));return Oo(_,T=>{const C=T.docs.map(b=>{var L;return{id:b.id,...b.data(),lastSeen:(L=b.data().lastSeen)==null?void 0:L.toDate()}});l(C.filter(b=>b.id!==(t==null?void 0:t.sub)))},T=>{console.error("Online users listener error:",T),ze.error("Error fetching online players")})},[s,t==null?void 0:t.sub]),$.useEffect(()=>{const _=new Set(o.map(w=>w.id));d(w=>new Set([...w].filter(T=>_.has(T))))},[o]),$.useEffect(()=>{d(new Set)},[e]);const y=async _=>{if(!e||!(t!=null&&t.sub)){ze.error("You need to create a game first");return}try{await Zf(lr(on,"users",_,"invites",e),{gameId:e,from:t.sub,fromName:t.name||"Anonymous",status:"pending",sentAt:Tc()}),d(w=>new Set([...w,_])),ze.success("Invite sent!")}catch(w){ze.error("Failed to send invite"),console.error("Error sending invite:",w)}};return M.jsxs("div",{className:"online-players bg-white p-4 rounded-lg shadow-md w-full max-w-md mx-auto",children:[M.jsxs("h3",{className:"text-xl font-semibold mb-4 online-players-label",children:["Logged In Players (",o.length,")"]}),M.jsx("ul",{className:"space-y-3",children:o.map(_=>M.jsxs("li",{className:"flex items-center justify-between p-2 border-b border-gray-200",children:[M.jsxs("div",{className:"flex items-center space-x-3",children:[M.jsx("img",{src:_.picture||"",alt:_.name||"Anonymous",width:"24",height:"24",className:"rounded-full",onError:w=>{w.target.src=""}}),M.jsx("span",{className:"text-sm font-medium text-gray-700",children:_.name||"Anonymous"})]}),M.jsx("button",{onClick:()=>y(_.id),disabled:!e||h.has(_.id),"aria-label":`Invite ${_.name} to game`,className:"px-4 py-2 text-sm font-semibold invite-button rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed",children:h.has(_.id)?"Invited":"Invite to Game"})]},_.id))})]})},f2=(r,e,t=8)=>{const s=r[e];if(!s)return[];const o=[[0,1],[1,0],[1,1],[1,-1]],l=Math.floor(e/t),h=e%t,d=[e];for(const[p,y]of o){let _=1;const w=[e];let T=l+p,C=h+y;for(;T>=0&&C>=0&&T<6&&C<t&&r[T*t+C]===s;)w.push(T*t+C),_++,T+=p,C+=y;for(T=l-p,C=h-y;T>=0&&C>=0&&T<6&&C<t&&r[T*t+C]===s;)w.unshift(T*t+C),_++,T-=p,C-=y;if(_>=4){d.push(...w);break}}return Array.from(new Set(d)).slice(0,4)},p2=({gameId:r,gameState:e})=>{const t=(e==null?void 0:e.lastMoveIndex)!==void 0?f2(e.board,e.lastMoveIndex):[],s=(o,l)=>{const h=t.includes(l);return M.jsxs("div",{className:"w-12 h-12 rounded-full border-2 border-gray-600 relative",children:[M.jsx("div",{className:`w-full h-full rounded-full ${o==="red"?"bg-red-500":o==="yellow"?"bg-yellow-500":"bg-gray-200"}`}),h&&M.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-pulse",children:M.jsx("svg",{className:"w-8 h-8 text-black filter drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",children:M.jsx("path",{d:"M12 0l3.09 6.26L22 7.27l-5 4.87 1.18 6.88L12 16l-6.18 3.02L7 12.14 2 7.27l6.91-1.01L12 0z"})})})]})};return e?e.status!=="finished"?M.jsxs("div",{className:"text-center p-8 text-xl",children:["Game ",r," is still in progress!",M.jsx("div",{className:"mt-4 text-lg",children:e.players.length<2?"Waiting for opponent...":"Keep playing!"})]}):M.jsxs("div",{className:"flex flex-col items-center max-h-[50vh] p-8 bg-gray-100 overflow-auto",children:[M.jsx("h1",{className:"text-4xl font-bold mb-8 text-gray-800",children:"Game Over"}),M.jsxs("div",{className:"mb-8 text-center",children:[M.jsx("h2",{className:"text-2xl font-semibold",children:e.winner?M.jsxs("span",{className:`${e.winner==="red"?"text-red-600":"text-yellow-600"}`,children:[e.winner.toUpperCase()," PLAYER WINS!"]}):"It's a Draw!"}),M.jsxs("p",{className:"mt-2 text-gray-600",children:["Game ID: ",r]}),M.jsx("p",{className:"mt-2 text-gray-600",children:"Check following for last game position."})]}),M.jsx("div",{className:"bg-[#2c3e50] p-4 rounded-xl shadow-lg flex items-center justify-center",children:M.jsx("div",{className:"grid grid-cols-8 gap-2 w-[min(40vw,40vh)] h-[min(40vw,40vh)] min-w-[550px] min-h-[550px]",children:e.board.map((o,l)=>M.jsx("div",{className:"flex items-center justify-center bg-[#34495e] rounded-lg p-1 transition-all duration-200 hover:brightness-125",style:{aspectRatio:"1 / 1",flexGrow:1},children:s(o,l)},l))})}),M.jsxs("div",{className:"mt-8 flex flex-col gap-4 items-center",children:[M.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-all",onClick:()=>window.location.href="/",children:"Main Menu"}),e.winner&&M.jsxs("div",{className:"text-sm text-gray-500",children:[e.winner," player was victorious!"]})]})]}):M.jsxs("div",{className:"text-center p-8 text-xl",children:["No game data available for game ID: ",r]})},Qu=4,Vr=8,m2=({gameId:r})=>{const[e,t]=$.useState(!1),s=$.useCallback(async()=>{try{await navigator.clipboard.writeText(r),t(!0),setTimeout(()=>t(!1),2e3)}catch(o){console.error("Failed to copy:",o)}},[r]);return M.jsxs("div",{className:"game-id-container",children:[M.jsx("h2",{className:"game-id",children:r}),M.jsxs("button",{className:"copy-button",onClick:s,children:["",e&&M.jsx("span",{className:"copied-message",children:"Copied!"})]})]})},g2=({gameId:r,playerId:e})=>{const[t,s]=$.useState(null),[o,l]=$.useState(!1),[h,d]=$.useState(null);$.useEffect(()=>{if(!r)return;const C=lr(on,"games",r),b=Oo(C,L=>{const N=L.data();N&&s({board:N.board,currentPlayer:N.currentPlayer,players:N.players,status:N.status,winner:N.winner})});return()=>b()},[r]);const p=async()=>{try{await ep(lr(on,"games",r),{board:Array(Vr**2).fill(""),currentPlayer:"red",status:"playing",winner:null})}catch(C){console.error("Error restarting game:",C)}};$.useEffect(()=>{const C=lr(on,"games",r),b=Oo(C,L=>{const N=L.data();s(N),N.winner&&ze.success(`Game Over! ${N.winner} player wins!`)});return()=>b()},[r]);const y=(C,b)=>{const L=C[b];if(!L)return!1;const N=Math.floor(b/Vr),K=b%Vr,G=(ee,Y)=>{let se=0,re=N+ee,R=K+Y;for(;re>=0&&re<Vr&&R>=0&&R<Vr&&C[re*Vr+R]===L;)se++,re+=ee,R+=Y;return se};return G(0,-1)+G(0,1)+1>=Qu||G(-1,0)+G(1,0)+1>=Qu||G(-1,-1)+G(1,1)+1>=Qu||G(-1,1)+G(1,-1)+1>=Qu},_=async C=>{if(!(!t||t.status==="finished")){if(t.players.length<2){ze.error("Waiting for opponent to join");return}if(t.currentPlayer!==w()){ze.error("It's not your turn!");return}if(t.board[C]){ze.error("Invalid move");return}try{const b=[...t.board],L=w();b[C]=L;const N=y(b,C);await ep(lr(on,"games",r),{lastMoveIndex:C,board:b,currentPlayer:t.currentPlayer==="red"?"yellow":"red",...N&&{winner:L,status:"finished"}})}catch(b){ze.error("Move failed"),console.error("Error updating document:",b)}}},w=()=>t?t.players[0]===e?"red":"yellow":"spectator",T=C=>{d(C),console.log(h),console.log(`Joined game: ${C}`)};return t?M.jsxs("div",{className:"game-container flex flex-col",children:[M.jsx("p",{className:"text-center text-lg text-red-700 font-medium p-4 bg-gray-100 rounded-md shadow-md",children:"Please Do Not Reload The Page"}),M.jsx("button",{onClick:()=>l(!o),className:"fixed bottom-4 right-4 z-30 chat-icon p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),M.jsxs("div",{className:`fixed top-0 right-0 h-full w-80 bg-white shadow-lg transform transition-transform duration-300 ease-in-out z-40 ${o?"translate-x-0":"translate-x-full"}`,children:[M.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[M.jsx("h2",{className:"text-lg font-semibold",children:"Game Chat"}),M.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),M.jsx(h2,{gameId:r})]}),M.jsxs("div",{className:"game-info",children:[M.jsxs("p",{children:["Your color: ",M.jsx("span",{className:w(),children:w()})]}),M.jsxs("p",{children:["Players connected: ",t.players.length,"/2"]}),M.jsxs("p",{children:["Current turn: ",t.currentPlayer]})]}),t.status==="finished"?M.jsxs("div",{className:"game-over",children:[M.jsx("button",{onClick:p,children:"Play Again"}),M.jsx(p2,{gameId:r,gameState:t})]}):t.players.length===2||t.status==="playing"?M.jsx("div",{children:M.jsx("div",{className:"board",children:Array.from({length:Vr}).map((C,b)=>M.jsx("div",{className:"row",children:Array.from({length:Vr}).map((L,N)=>{const K=b*Vr+N;return M.jsx("div",{className:"cell",onClick:()=>_(K),children:t.board[K]&&M.jsx("div",{className:`piece ${t.board[K]}`})},K)})},b))})}):M.jsxs("div",{children:[M.jsxs("div",{className:"waiting-message",children:[M.jsx("p",{className:"waiting-message-p",children:"Share this Game ID with player 2:"}),M.jsx(m2,{gameId:r}),M.jsx("p",{className:"waiting-message-p",children:"Waiting for opponent to join..."})]}),M.jsx(d2,{gameId:r,onGameJoined:T})]})]}):M.jsx("div",{children:"Loading game..."})},$_=({className:r=""})=>M.jsxs("svg",{className:`animate-spin h-5 w-5 ${r}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[M.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),M.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});function y2({cellRefs:r,targetIndex:e,color:t,transitionDuration:s}){const o=$.useRef(null);return $.useEffect(()=>{const l=()=>{if(!o.current||!r[e])return;const d=r[e].getBoundingClientRect();o.current.style.transition=`
        left ${s}ms linear,
        top ${s}ms linear,
        background-color ${s}ms linear
      `,o.current.style.left=`${d.left+d.width/2}px`,o.current.style.top=`${d.top+d.height/2}px`,o.current.style.backgroundColor=t};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t,s,r]),M.jsx("div",{ref:o,style:{position:"fixed",width:"calc(min(50vw, 50vh) / 16)",height:"calc(min(50vw, 50vh) / 16)",backgroundColor:"white",borderRadius:"50%",boxShadow:"0 0 8px rgba(0, 0, 0, 0.3)",pointerEvents:"none",transform:"translate(-50%, -50%)",zIndex:1e3,opacity:.85,transition:`left ${s}ms ease-out, top ${s}ms ease-out`}})}const Ef=8,Tf=[26,30,27,29,28,25],_2=1e3;function v2({gameState:r,handleMove:e}){const[t,s]=$.useState(0),o=$.useRef([]),l=$.useCallback(d=>{e(d)},[e]);$.useEffect(()=>{const d=setInterval(()=>{const p=(t+1)%Tf.length;s(p),setTimeout(()=>l(Tf[p]),500)},_2);return()=>clearInterval(d)},[t,l]);const h=()=>t%2===0?"yellow":"red";return M.jsxs("div",{className:"board-container",children:[M.jsx(y2,{cellRefs:o.current,targetIndex:Tf[t],color:h(),transitionDuration:500}),M.jsx("div",{className:"board",children:Array.from({length:Ef}).map((d,p)=>M.jsx("div",{className:"row",children:Array.from({length:Ef}).map((y,_)=>{const w=p*Ef+_;return M.jsx("div",{className:"cell",onClick:()=>e(w),ref:T=>{T&&(o.current[w]=T)},children:r.board[w]&&M.jsx("div",{className:`piece ${r.board[w]}`})},w)})},p))})]})}const W_=8,w2=()=>{const[r,e]=$.useState(""),[t,s]=$.useState(null),[o,l]=$.useState(!1),[h,d]=$.useState(!1),{user:p,isAuthenticated:y,loginWithRedirect:_}=gl();$.useEffect(()=>{if(!t||!(p!=null&&p.sub))return;const se=lr(on,"games",t),re=Oo(se,R=>{const S=R.data();S!=null&&S.players.includes(p.sub)&&s(R.id)});return()=>re()},[t,p==null?void 0:p.sub]);const w=async()=>{if(!y||!(p!=null&&p.sub))return;l(!0);const se=`game-${Date.now()}`;try{await Zf(lr(on,"games",se),{board:Array(W_**2).fill(""),currentPlayer:"red",players:[p.sub],status:"waiting",creator:p.sub,createdAt:Tc()}),ze.success("Game created! Waiting for opponent...")}catch(re){ze.error("Failed to create game"),console.error("Error creating game:",re)}finally{l(!1)}s(se)},[T,C]=$.useState(null),b=$.useCallback(async(se=r)=>{if(!(!se||!(p!=null&&p.sub))){d(!0);try{const re=lr(on,"games",se),R=await Yk(re);if(!R.exists()){ze.error("Game not found");return}const S=R.data();if(S.players.includes(p.sub)){s(se);return}if(S.players.length>=2){ze.error("Game is full");return}await ep(re,{players:eA(p.sub),status:S.players.length+1>=2?"playing":"waiting"}),s(se),ze.success("Joined game!")}catch(re){ze.error("Failed to join game"),console.error("Error joining game:",re)}finally{d(!1)}}},[p==null?void 0:p.sub,r]);$.useEffect(()=>{if(!y||!(p!=null&&p.sub))return;const se=wc(on,`users/${p.sub}/invites`),re=Oo(se,R=>{R.docChanges().forEach(S=>{if(S.type==="added"){const k=S.doc.data();confirm(`${k.fromName} invited you to a game! Join now?`)&&Jk(S.doc.ref).then(()=>{b(k.gameId),C(k.gameId)}).catch(x=>{console.error("Error handling invite:",x),ze.error("Failed to process invite")})}})},R=>{console.error("Invite listener error:",R),ze.error("Error processing invites")});return()=>re()},[y,p==null?void 0:p.sub,b]),$.useEffect(()=>{T&&(console.log("New invite received:",T),C(null))},[T]);const L=Array(W_**2).fill(""),[N,K]=$.useState({board:L}),[G,ee]=$.useState("red"),Y=se=>{K(re=>{let R=[...re.board];return re.board[se]&&(R=L),R[se]=G,{board:R}}),ee(re=>re==="red"?"yellow":"red")};return y?t?M.jsx(g2,{gameId:t,playerId:(p==null?void 0:p.sub)||""}):M.jsxs("div",{className:"bg-gray-100 flex flex-col items-center justify-center p-4 max-w-full max-h-[100vh] overflow-auto",children:[M.jsx("p",{className:"text-center text-lg text-red-700 font-medium p-4 bg-gray-100 rounded-md shadow-md",children:"You must create a new game to be online and get invited by other players."}),M.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[M.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[M.jsx("img",{src:p==null?void 0:p.picture,alt:"User avatar",className:"w-12 h-12 rounded-full"}),M.jsxs("div",{children:[M.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Welcome, ",p==null?void 0:p.name]}),M.jsx("p",{className:"text-gray-600",children:"Ready to play?"})]})]}),M.jsxs("div",{className:"space-y-6",children:[M.jsx("button",{onClick:w,disabled:o,className:"w-full create-new-game-button font-medium py-3 px-6 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?M.jsxs(M.Fragment,{children:[M.jsx($_,{className:"text-white mr-2"}),"Creating Game..."]}):"Create New Game"}),M.jsxs("div",{className:"relative",children:[M.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:M.jsx("div",{className:"w-full border-t border-gray-300"})}),M.jsx("div",{className:"relative flex justify-center",children:M.jsx("span",{className:"bg-white px-4 text-sm text-gray-500",children:"OR"})})]}),M.jsx("form",{onSubmit:se=>{se.preventDefault(),b()},children:M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"gameId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Join Existing Game"}),M.jsx("input",{id:"gameId",type:"text",value:r,onChange:se=>e(se.target.value.trim()),placeholder:"Enter Game ID here...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",required:!0})]}),M.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 create-new-game-button font-medium py-3 px-6 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:h?M.jsxs(M.Fragment,{children:[M.jsx($_,{className:"text-white mr-2"}),"Joining Game..."]}):"Join Game"})]})})]}),M.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:M.jsx("p",{children:"Share your Game ID with a friend to play together!"})})]})]}):M.jsxs("div",{className:"max-h-[70vh] bg-gray-100 flex flex-col items-center justify-center p-4",children:[M.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[M.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Welcome to Connect Four"}),M.jsx("p",{className:"text-gray-600 mb-6",children:"Please sign in to start playing"}),M.jsx("button",{onClick:()=>_(),className:"login-button font-medium py-2 px-6 rounded-lg transition-colors duration-200",children:"Log In/ Sign Up"})]}),M.jsx(v2,{gameState:N,handleMove:Y})]})};var v0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},H_=Mr.createContext&&Mr.createContext(v0),E2=["attr","size","title"];function T2(r,e){if(r==null)return{};var t=I2(r,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function I2(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function Xc(){return Xc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Xc.apply(this,arguments)}function K_(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function Yc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(t),!0).forEach(function(s){S2(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):K_(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function S2(r,e,t){return e=C2(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function C2(r){var e=k2(r,"string");return typeof e=="symbol"?e:e+""}function k2(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function w0(r){return r&&r.map((e,t)=>Mr.createElement(e.tag,Yc({key:t},e.attr),w0(e.child)))}function A2(r){return e=>Mr.createElement(R2,Xc({attr:Yc({},r.attr)},e),w0(r.child))}function R2(r){var e=t=>{var{attr:s,size:o,title:l}=r,h=T2(r,E2),d=o||t.size||"1em",p;return t.className&&(p=t.className),r.className&&(p=(p?p+" ":"")+r.className),Mr.createElement("svg",Xc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:p,style:Yc(Yc({color:r.color||t.color},t.style),r.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Mr.createElement("title",null,l),r.children)};return H_!==void 0?Mr.createElement(H_.Consumer,null,t=>e(t)):e(v0)}function P2(r){return A2({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(r)}const x2=()=>{const{user:r}=gl();return M.jsx("div",{className:"min-h-80vh bg-gray-100",children:M.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4",children:M.jsx("div",{className:"bg-white rounded-lg shadow-md p-8",children:M.jsxs("div",{className:"flex items-center space-x-6",children:[M.jsx("img",{src:r==null?void 0:r.picture,alt:r==null?void 0:r.name,className:"w-32 h-32 rounded-full border-4 border-blue-500"}),M.jsxs("div",{children:[M.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:r==null?void 0:r.name}),M.jsx("p",{className:"text-lg text-gray-600 mt-2",children:r==null?void 0:r.email}),M.jsxs("div",{className:"mt-4",children:[M.jsxs("p",{className:"text-gray-500",children:[M.jsx("span",{className:"font-semibold",children:"Email verified:"}),r!=null&&r.email_verified?" Yes":" No"]}),M.jsxs("p",{className:"text-gray-500",children:[M.jsx("span",{className:"font-semibold",children:"Last updated:"}),new Date((r==null?void 0:r.updated_at)||"").toLocaleDateString()]})]})]})]})})})})},N2=()=>{const{loginWithRedirect:r,logout:e,isAuthenticated:t}=gl();return M.jsx("div",{children:t?M.jsx("button",{className:"auth-button",onClick:()=>e({logoutParams:{returnTo:"https://ni-kit-mht.github.io/test-project-multiplayer/"}}),children:"Log Out"}):M.jsx("button",{className:"auth-button",onClick:()=>r(),children:"Log In"})})};function b2(){const[r,e]=$.useState(!1);return M.jsxs("footer",{className:"app-footer",children:[M.jsx("button",{className:"rules-button",onClick:()=>e(!r),children:r?"Hide Rules":"Show Rules"}),r&&M.jsxs("div",{className:"rules-popup",children:[M.jsx("div",{className:"rules-header",children:"Game Rules"}),M.jsxs("ol",{children:[M.jsx("li",{children:"Once the players create a new game and invite a player with the gameId; they can start playing the game"}),M.jsx("li",{children:"Players take turns placing their pieces"}),M.jsx("li",{children:"Red always goes first"}),M.jsx("li",{children:"Click any empty cell to place your piece"}),M.jsx("li",{children:"Game continues until any player makes connected four dots"}),M.jsx("li",{children:"Be nice in chat"}),M.jsx("li",{children:"Those who send invite have 100% chance to win with correct play"})]}),M.jsx("button",{className:"rules-button",onClick:()=>e(!1),children:"Close"})]})]})}function D2(){const r=()=>M.jsx("nav",{className:"game-nav",children:M.jsxs("div",{className:"nav-container",children:[M.jsxs("div",{className:"nav-brand",children:[M.jsx(P2,{className:"nav-icon"}),M.jsx("span",{children:"Multiplayer Board Game"})]}),M.jsxs("div",{className:"nav-links",children:[M.jsx(Sy,{to:"/",className:"nav-link",children:"Home"}),M.jsx(Sy,{to:"/profile",className:"nav-link",children:"Profile"}),M.jsx(N2,{})]})]})}),e=()=>M.jsxs(M.Fragment,{children:[M.jsx("main",{className:"game-container",children:M.jsx(w2,{})}),M.jsx(b2,{})]});return M.jsxs("div",{className:"app-container",children:[M.jsx(qA,{position:"top-right"}),M.jsx(r,{}),M.jsxs(S1,{children:[M.jsx(Xu,{path:"/",element:M.jsx(e,{})}),M.jsx(Xu,{path:"/profile",element:M.jsx(x2,{})}),M.jsx(Xu,{path:"*",element:M.jsx(T1,{to:"/"})})]})]})}DE.createRoot(document.getElementById("root")).render(M.jsx($.StrictMode,{children:M.jsx(N1,{basename:"/test-project-multiplayer",children:M.jsx(mT,{domain:"dev-5sughtnn8ge8qbi1.jp.auth0.com",clientId:"2cqTGb70cIDaEGBqR9pO1x2EPz5A5GJZ",authorizationParams:{redirect_uri:window.location.origin+"/test-project-multiplayer/"},children:M.jsx(D2,{})})})}));
